<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>URANGO â€” ì•„ì›ƒë„ì–´ ì†Œì…œ í”Œë«í¼ í”„ë¡œí† íƒ€ì… v2.0</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, 'Helvetica Neue', Arial, sans-serif; background: #141414; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; padding: 24px 20px; gap: 28px; flex-wrap: wrap; }

  :root {
    --bg:      #F4F3F0;
    --surface: #FFFFFF;
    --dark:    #111111;
    --dark2:   #1F1F1F;
    --accent:  #FF4D00;
    --text1:   #111111;
    --text2:   #737373;
    --text3:   #ADADAD;
    --border:  #E5E5E0;
    --golf:    #166534;
    --golf2:   #16A34A;
    --r:       12px;
    --shadow:  0 1px 3px rgba(0,0,0,0.06), 0 4px 14px rgba(0,0,0,0.05);
    --primary: #111111;
    --secondary: #1F1F1F;
    --light: #F4F3F0;
  }

  /* â”€â”€â”€ Phone Frame â”€â”€â”€ */
  .phone-frame {
    width: 375px; height: 812px; background: var(--bg);
    border-radius: 40px; overflow: hidden;
    box-shadow: 0 30px 80px rgba(0,0,0,0.5), 0 0 0 8px #2d2d2d, 0 0 0 10px #1a1a1a;
    position: relative; flex-shrink: 0;
  }
  .screen { display: none; flex-direction: column; height: 100%; }
  .screen.active { display: flex; }

  /* â”€â”€â”€ Status Bar â”€â”€â”€ */
  .status-bar {
    background: var(--dark); padding: 12px 20px 8px;
    display: flex; justify-content: space-between; align-items: center;
    color: white; font-size: 12px; font-weight: 600; flex-shrink: 0;
  }

  /* â”€â”€â”€ Header â”€â”€â”€ */
  .header { background: var(--dark); padding: 12px 20px 14px; color: white; display: flex; align-items: center; gap: 10px; flex-shrink: 0; }
  .header h1 { font-size: 18px; font-weight: 800; letter-spacing: 2px; text-transform: uppercase; }
  .back-btn { cursor: pointer; font-size: 20px; line-height: 1; user-select: none; }
  .header .subtitle { font-size: 11px; color: rgba(255,255,255,0.5); letter-spacing: 0.5px; }

  /* â”€â”€â”€ Content Area â”€â”€â”€ */
  .content { flex: 1; overflow-y: auto; background: var(--bg); min-height: 0; }
  .content::-webkit-scrollbar { width: 3px; }
  .content::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

  /* â”€â”€â”€ Bottom Nav â”€â”€â”€ */
  .bottom-nav { background: var(--surface); border-top: 1px solid var(--border); display: flex; padding: 6px 0 14px; flex-shrink: 0; }
  .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 4px; cursor: pointer; padding: 4px 0; transition: all 0.2s; }
  .nav-item.active .nav-icon { color: var(--accent); }
  .nav-item.active .nav-label { color: var(--accent); font-weight: 700; }
  .nav-icon { font-size: 20px; color: var(--text3); transition: color 0.2s; line-height: 1; }
  .nav-label { font-size: 10px; color: var(--text3); letter-spacing: 0.3px; }

  /* â”€â”€â”€ Hero Banner â”€â”€â”€ */
  .hero-banner { background: var(--dark); padding: 20px 20px 24px; color: white; }
  .hero-banner h2 { font-size: 22px; font-weight: 800; margin-bottom: 4px; letter-spacing: -0.5px; }
  .hero-banner p { font-size: 13px; color: rgba(255,255,255,0.5); }
  .hero-banner .hero-stats { display: flex; gap: 20px; margin-top: 18px; }
  .hero-stat { text-align: center; }
  .hero-stat .num { font-size: 20px; font-weight: 800; }
  .hero-stat .lbl { font-size: 10px; color: rgba(255,255,255,0.45); margin-top: 2px; text-transform: uppercase; letter-spacing: 0.5px; }

  /* â”€â”€â”€ Categories â”€â”€â”€ */
  .categories-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 14px; }
  .category-card { background: var(--surface); border-radius: var(--r); padding: 18px 14px; cursor: pointer; transition: all 0.2s; border: 1.5px solid var(--border); text-align: center; }
  .category-card:hover { border-color: var(--dark); transform: translateY(-1px); }
  .category-card .cat-emoji { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; color: var(--text1); }
  .category-card .cat-name { font-size: 14px; font-weight: 700; color: var(--text1); letter-spacing: 0.3px; }
  .category-card .cat-count { font-size: 11px; color: var(--text3); margin-top: 4px; }
  .category-card.active { border-color: var(--dark); background: var(--dark); }
  .category-card.active .cat-name { color: white; }
  .category-card.active .cat-count { color: rgba(255,255,255,0.45); }

  .section-title { font-size: 11px; font-weight: 700; color: var(--text2); padding: 14px 16px 8px; text-transform: uppercase; letter-spacing: 1px; }

  /* â”€â”€â”€ Activity Card â”€â”€â”€ */
  .activity-card { background: var(--surface); margin: 0 16px 10px; border-radius: var(--r); overflow: hidden; border: 1px solid var(--border); cursor: pointer; transition: all 0.2s; }
  .activity-card:hover { border-color: #c8c7c2; box-shadow: var(--shadow); }
  .activity-card-header { background: var(--dark); padding: 11px 14px; color: white; display: flex; justify-content: space-between; align-items: center; }
  .activity-cat-badge { background: rgba(255,255,255,0.1); border-radius: 5px; padding: 2px 8px; font-size: 10px; font-weight: 700; letter-spacing: 0.5px; }
  .activity-level { font-size: 11px; color: rgba(255,255,255,0.5); }
  .activity-card-body { padding: 12px 14px; }
  .activity-title { font-size: 14px; font-weight: 700; color: var(--text1); margin-bottom: 6px; }
  .activity-meta { display: flex; gap: 10px; flex-wrap: wrap; }
  .meta-item { display: flex; align-items: center; gap: 4px; font-size: 12px; color: var(--text2); }
  .activity-card-footer { padding: 10px 14px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
  .leader-info { display: flex; align-items: center; gap: 8px; }
  .leader-avatar { width: 26px; height: 26px; border-radius: 50%; background: var(--dark2); display: flex; align-items: center; justify-content: center; font-size: 11px; color: white; font-weight: 700; }
  .leader-name { font-size: 12px; color: var(--text2); }
  .stars { color: #FFB800; font-size: 12px; }
  .join-btn { background: var(--accent); color: white; border: none; border-radius: 7px; padding: 6px 14px; font-size: 12px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
  .join-btn:hover { background: #e04400; }

  /* â”€â”€â”€ Search â”€â”€â”€ */
  .search-bar-wrap { background: var(--surface); padding: 10px 14px; display: flex; gap: 8px; flex-shrink: 0; border-bottom: 1px solid var(--border); }
  .search-input { flex: 1; border: 1.5px solid var(--border); border-radius: 9px; padding: 9px 14px; font-size: 14px; outline: none; transition: border-color 0.2s; background: var(--bg); }
  .search-input:focus { border-color: var(--dark); }
  .search-btn { background: var(--dark); color: white; border: none; border-radius: 9px; padding: 9px 16px; font-size: 13px; font-weight: 600; cursor: pointer; }
  .filter-chips { background: var(--surface); padding: 8px 14px 10px; display: flex; gap: 6px; overflow-x: auto; border-bottom: 1px solid var(--border); flex-shrink: 0; }
  .filter-chips::-webkit-scrollbar { display: none; }
  .chip { white-space: nowrap; border: 1px solid var(--border); border-radius: 7px; padding: 5px 12px; font-size: 12px; color: var(--text2); cursor: pointer; transition: all 0.2s; background: var(--surface); }
  .chip.active { background: var(--dark); color: white; border-color: var(--dark); }

  /* â”€â”€â”€ Create Form â”€â”€â”€ */
  .create-form { padding: 14px; }
  .form-group { margin-bottom: 16px; }
  .form-label { font-size: 11px; font-weight: 700; color: var(--text2); margin-bottom: 7px; display: block; text-transform: uppercase; letter-spacing: 0.6px; }
  .form-control { width: 100%; border: 1.5px solid var(--border); border-radius: 9px; padding: 11px 14px; font-size: 14px; outline: none; transition: border-color 0.2s; background: var(--surface); }
  .form-control:focus { border-color: var(--dark); }
  .radio-group { display: flex; gap: 6px; flex-wrap: wrap; }
  .radio-btn { border: 1.5px solid var(--border); border-radius: 7px; padding: 7px 14px; font-size: 13px; cursor: pointer; transition: all 0.2s; background: var(--surface); }
  .radio-btn.active { background: var(--dark); color: white; border-color: var(--dark); }
  .create-submit { width: 100%; background: var(--accent); color: white; border: none; border-radius: 11px; padding: 15px; font-size: 16px; font-weight: 700; cursor: pointer; margin-top: 8px; transition: background 0.2s; }
  .create-submit:hover { background: #e04400; }

  /* â”€â”€â”€ Profile â”€â”€â”€ */
  .profile-header { background: var(--dark); padding: 28px 20px 50px; color: white; text-align: center; flex-shrink: 0; }
  .profile-avatar { width: 76px; height: 76px; border-radius: 50%; background: rgba(255,255,255,0.08); display: flex; align-items: center; justify-content: center; font-size: 34px; margin: 0 auto 12px; border: 2px solid rgba(255,255,255,0.15); }
  .profile-name { font-size: 20px; font-weight: 800; margin-bottom: 4px; letter-spacing: -0.3px; }
  .profile-id { font-size: 13px; color: rgba(255,255,255,0.45); }
  .profile-rating { font-size: 15px; margin-top: 8px; }
  .profile-stats { display: flex; background: var(--surface); margin: -30px 16px 0; border-radius: var(--r); box-shadow: 0 4px 20px rgba(0,0,0,0.12); padding: 16px; }
  .stat-item { flex: 1; text-align: center; }
  .stat-num { font-size: 20px; font-weight: 800; color: var(--accent); }
  .stat-lbl { font-size: 11px; color: var(--text3); margin-top: 3px; }
  .profile-menu { padding: 14px; }
  .menu-item { background: var(--surface); border-radius: var(--r); padding: 13px 14px; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; cursor: pointer; transition: border-color 0.2s; border: 1px solid var(--border); }
  .menu-item:hover { border-color: var(--dark); }
  .menu-icon { font-size: 17px; width: 34px; height: 34px; background: var(--bg); border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .menu-text { flex: 1; font-size: 14px; font-weight: 500; color: var(--text1); }
  .menu-arrow { color: var(--text3); font-size: 13px; }

  /* â”€â”€â”€ Messages â”€â”€â”€ */
  .dm-list { padding: 10px; }
  .dm-item { background: var(--surface); border-radius: var(--r); padding: 12px 14px; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; cursor: pointer; transition: border-color 0.2s; border: 1px solid var(--border); }
  .dm-item:hover { border-color: var(--dark); }
  .dm-avatar { width: 44px; height: 44px; border-radius: 50%; background: var(--dark); display: flex; align-items: center; justify-content: center; font-size: 17px; color: white; font-weight: 700; flex-shrink: 0; }
  .dm-info { flex: 1; min-width: 0; }
  .dm-name { font-size: 14px; font-weight: 600; color: var(--text1); }
  .dm-preview { font-size: 12px; color: var(--text3); margin-top: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .dm-time { font-size: 11px; color: var(--text3); flex-shrink: 0; }
  .unread-badge { background: var(--accent); color: white; border-radius: 50%; width: 18px; height: 18px; font-size: 10px; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0; }

  /* â”€â”€â”€ Activity Detail â”€â”€â”€ */
  .detail-map { background: #E8E7E4; height: 150px; display: flex; align-items: center; justify-content: center; flex-direction: column; color: var(--text2); font-size: 13px; flex-shrink: 0; }
  .detail-map-icon { font-size: 36px; margin-bottom: 6px; opacity: 0.5; }
  .detail-body { padding: 14px 16px; }
  .detail-title { font-size: 18px; font-weight: 800; color: var(--text1); margin-bottom: 12px; letter-spacing: -0.3px; }
  .detail-info-row { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px; font-size: 13px; color: var(--text2); }
  .detail-info-icon { font-size: 15px; width: 22px; text-align: center; flex-shrink: 0; margin-top: 1px; }
  .detail-section { margin-top: 16px; }
  .detail-section-title { font-size: 11px; font-weight: 700; color: var(--text1); margin-bottom: 10px; padding-bottom: 6px; border-bottom: 2px solid var(--accent); text-transform: uppercase; letter-spacing: 0.8px; }
  .detail-leader-card { background: var(--bg); border-radius: var(--r); padding: 13px; display: flex; align-items: center; gap: 12px; border: 1px solid var(--border); }
  .detail-avatar-lg { width: 48px; height: 48px; border-radius: 50%; background: var(--dark); display: flex; align-items: center; justify-content: center; font-size: 20px; color: white; font-weight: 700; flex-shrink: 0; }
  .detail-leader-info { flex: 1; }
  .detail-leader-name { font-size: 15px; font-weight: 700; color: var(--text1); }
  .detail-leader-stats { font-size: 12px; color: var(--text3); margin-top: 3px; }
  .detail-stars { color: #FFB800; font-size: 13px; margin-top: 3px; }
  .detail-desc { font-size: 13px; color: var(--text2); line-height: 1.7; background: var(--bg); border-radius: 9px; padding: 13px; }
  .participants-row { display: flex; gap: 8px; flex-wrap: wrap; }
  .participant-avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; color: white; font-weight: 700; }
  .detail-join-bar { padding: 12px 16px; background: var(--surface); border-top: 1px solid var(--border); display: flex; gap: 12px; align-items: center; flex-shrink: 0; }
  .detail-join-info { font-size: 13px; color: var(--text2); flex: 1; }
  .detail-join-info strong { color: var(--accent); font-size: 15px; }
  .detail-join-btn { background: var(--accent); color: white; border: none; border-radius: 10px; padding: 12px 20px; font-size: 15px; font-weight: 700; cursor: pointer; transition: background 0.2s; }
  .detail-join-btn:hover { background: #e04400; }

  /* â”€â”€â”€ Chat â”€â”€â”€ */
  .chat-header-info { flex: 1; }
  .chat-header-name { font-size: 16px; font-weight: 700; }
  .chat-header-status { font-size: 11px; color: rgba(255,255,255,0.45); }
  .chat-messages { flex: 1; overflow-y: auto; padding: 14px; background: var(--bg); min-height: 0; }
  .chat-messages::-webkit-scrollbar { width: 3px; }
  .chat-messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
  .msg-row { display: flex; margin-bottom: 10px; align-items: flex-end; gap: 8px; }
  .msg-row.mine { flex-direction: row-reverse; }
  .msg-avatar { width: 30px; height: 30px; border-radius: 50%; background: var(--dark); display: flex; align-items: center; justify-content: center; font-size: 12px; color: white; font-weight: 700; flex-shrink: 0; }
  .msg-bubble { max-width: 220px; padding: 10px 14px; border-radius: 16px; font-size: 13px; line-height: 1.5; }
  .msg-row:not(.mine) .msg-bubble { background: var(--surface); color: var(--text1); border-bottom-left-radius: 4px; border: 1px solid var(--border); }
  .msg-row.mine .msg-bubble { background: var(--dark); color: white; border-bottom-right-radius: 4px; }
  .msg-time { font-size: 10px; color: var(--text3); margin-bottom: 2px; }
  .chat-input-bar { background: var(--surface); padding: 10px 14px; display: flex; gap: 8px; align-items: center; border-top: 1px solid var(--border); flex-shrink: 0; }
  .chat-input { flex: 1; border: 1.5px solid var(--border); border-radius: 9px; padding: 10px 14px; font-size: 14px; outline: none; background: var(--bg); }
  .chat-input:focus { border-color: var(--dark); }
  .chat-send-btn { background: var(--dark); color: white; border: none; border-radius: 50%; width: 38px; height: 38px; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }

  /* â”€â”€â”€ Notifications â”€â”€â”€ */
  .notify-list { padding: 10px; }
  .notify-item { background: var(--surface); border-radius: var(--r); padding: 13px 14px; margin-bottom: 8px; display: flex; align-items: flex-start; gap: 12px; border: 1px solid var(--border); cursor: pointer; transition: border-color 0.2s; }
  .notify-item:hover { border-color: var(--dark); }
  .notify-item.unread { border-left: 3px solid var(--accent); }
  .notify-icon { font-size: 22px; flex-shrink: 0; margin-top: 2px; }
  .notify-content { flex: 1; }
  .notify-text { font-size: 13px; color: var(--text1); line-height: 1.5; }
  .notify-text strong { color: var(--text1); font-weight: 700; }
  .notify-time { font-size: 11px; color: var(--text3); margin-top: 4px; }
  .notify-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--accent); flex-shrink: 0; margin-top: 8px; }

  /* â”€â”€â”€ Page Info â”€â”€â”€ */
  .page-info { text-align: center; padding: 10px 20px; background: var(--surface); border-bottom: 1px solid var(--border); font-size: 12px; color: var(--text3); }

  /* â”€â”€â”€ Demo Label â”€â”€â”€ */
  .demo-info { color: white; text-align: center; max-width: 340px; padding-top: 20px; align-self: flex-start; }
  .demo-info h2 { font-size: 28px; font-weight: 800; color: var(--accent); margin-bottom: 8px; }
  .demo-info p { font-size: 14px; color: rgba(255,255,255,0.45); line-height: 1.6; }
  .demo-screens { margin-top: 16px; display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
  .demo-chip { background: rgba(255,255,255,0.07); border-radius: 7px; padding: 5px 14px; font-size: 12px; color: rgba(255,255,255,0.65); border: 1px solid rgba(255,255,255,0.1); }
  .demo-fix { background: rgba(255,77,0,0.1); border-color: rgba(255,77,0,0.25); color: var(--accent); }

  /* â”€â”€â”€ Golf Screens â”€â”€â”€ */
  .golf-search-bar { background: var(--surface); padding: 10px 14px; display: flex; gap: 8px; flex-shrink: 0; border-bottom: 1px solid var(--border); }
  .golf-region-chips { background: var(--surface); padding: 8px 14px 10px; display: flex; gap: 6px; overflow-x: auto; border-bottom: 1px solid var(--border); flex-shrink: 0; }
  .golf-region-chips::-webkit-scrollbar { display: none; }
  .golf-card { background: var(--surface); margin: 0 14px 10px; border-radius: var(--r); overflow: hidden; border: 1px solid var(--border); cursor: pointer; transition: all 0.2s; }
  .golf-card:hover { border-color: var(--dark); box-shadow: var(--shadow); }
  .golf-card-banner { height: 72px; display: flex; align-items: center; justify-content: space-between; padding: 0 16px; color: white; background: var(--golf); }
  .golf-card-name { font-size: 16px; font-weight: 800; letter-spacing: 0.3px; }
  .golf-card-holes { font-size: 12px; color: rgba(255,255,255,0.65); margin-top: 2px; }
  .golf-card-icon { font-size: 30px; opacity: 0.6; }
  .golf-card-body { padding: 11px 14px; }
  .golf-card-loc { font-size: 12px; color: var(--text3); display: flex; align-items: center; gap: 4px; margin-bottom: 8px; }
  .golf-card-row { display: flex; justify-content: space-between; align-items: center; }
  .golf-rating { display: flex; align-items: center; gap: 4px; font-size: 13px; color: var(--text1); font-weight: 600; }
  .golf-price { font-size: 13px; color: var(--golf); font-weight: 700; }
  .golf-tags { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 8px; }
  .golf-tag { background: var(--bg); color: var(--text2); border-radius: 6px; padding: 3px 10px; font-size: 11px; font-weight: 500; }
  .golf-api-badge { background: #dcfce7; color: var(--golf); border-radius: 6px; padding: 3px 10px; font-size: 11px; font-weight: 600; }
  .golf-loading { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 200px; gap: 12px; color: var(--text3); font-size: 14px; }
  .spinner { width: 28px; height: 28px; border: 2px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* Golf Detail */
  .golf-detail-banner { padding: 22px 20px 20px; color: white; background: var(--golf); }
  .golf-detail-name { font-size: 22px; font-weight: 800; margin-bottom: 4px; letter-spacing: -0.3px; }
  .golf-detail-sub { font-size: 13px; color: rgba(255,255,255,0.6); }
  .golf-detail-stats { display: flex; background: var(--surface); margin: 0 14px; border-radius: var(--r); box-shadow: var(--shadow); overflow: hidden; }
  .golf-stat { flex: 1; text-align: center; padding: 13px 8px; border-right: 1px solid var(--border); }
  .golf-stat:last-child { border-right: none; }
  .golf-stat-num { font-size: 18px; font-weight: 800; color: var(--golf); }
  .golf-stat-lbl { font-size: 10px; color: var(--text3); margin-top: 2px; text-transform: uppercase; letter-spacing: 0.3px; }
  .date-picker-row { display: flex; gap: 8px; padding: 14px 14px 0; overflow-x: auto; }
  .date-picker-row::-webkit-scrollbar { display: none; }
  .date-btn { flex-shrink: 0; text-align: center; padding: 9px 13px; border-radius: 9px; border: 1.5px solid var(--border); cursor: pointer; transition: all 0.2s; background: var(--surface); }
  .date-btn.active { background: var(--dark); border-color: var(--dark); color: white; }
  .date-btn .d-day { font-size: 11px; color: var(--text3); }
  .date-btn.active .d-day { color: rgba(255,255,255,0.55); }
  .date-btn .d-date { font-size: 16px; font-weight: 700; color: var(--text1); }
  .date-btn.active .d-date { color: white; }
  .tee-section-title { font-size: 11px; font-weight: 700; color: var(--text2); padding: 12px 14px 8px; text-transform: uppercase; letter-spacing: 0.6px; }
  .tee-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 0 14px 14px; }
  .tee-btn { text-align: center; padding: 10px 6px; border-radius: 8px; border: 1.5px solid var(--border); cursor: pointer; transition: all 0.2s; background: var(--surface); }
  .tee-btn.active { background: var(--dark); border-color: var(--dark); color: white; }
  .tee-btn.full { background: var(--bg); border-color: var(--border); color: var(--text3); cursor: not-allowed; }
  .tee-time { font-size: 15px; font-weight: 700; }
  .tee-info { font-size: 10px; color: var(--text3); margin-top: 2px; }
  .tee-btn.active .tee-info { color: rgba(255,255,255,0.55); }

  /* Golf Booking */
  .booking-summary { background: var(--bg); border: 1px solid var(--border); border-radius: var(--r); padding: 14px 16px; margin: 14px; }
  .booking-summary-title { font-size: 11px; color: var(--text3); margin-bottom: 8px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
  .booking-summary-name { font-size: 16px; font-weight: 800; color: var(--text1); }
  .booking-summary-info { font-size: 13px; color: var(--text2); margin-top: 4px; }
  .player-selector { display: flex; align-items: center; justify-content: center; gap: 20px; margin: 8px 0; }
  .player-btn { width: 36px; height: 36px; border-radius: 50%; border: 1.5px solid var(--border); background: var(--surface); color: var(--text1); font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: 700; transition: all 0.2s; }
  .player-btn:hover { background: var(--dark); color: white; border-color: var(--dark); }
  .player-count { font-size: 28px; font-weight: 800; color: var(--text1); min-width: 40px; text-align: center; }
  .price-breakdown { background: var(--bg); border-radius: var(--r); padding: 14px 16px; margin: 0 14px 14px; }
  .price-row { display: flex; justify-content: space-between; font-size: 13px; color: var(--text2); margin-bottom: 8px; }
  .price-row.total { font-size: 15px; font-weight: 700; color: var(--text1); border-top: 1px solid var(--border); padding-top: 10px; margin-top: 4px; }
  .price-row.total span:last-child { color: var(--accent); }
  .booking-btn { margin: 0 14px 14px; width: calc(100% - 28px); background: var(--golf); color: white; border: none; border-radius: 11px; padding: 15px; font-size: 16px; font-weight: 700; cursor: pointer; transition: background 0.2s; }
  .booking-btn:hover { background: #14532d; }

  /* Booking Confirm */
  .confirm-circle { width: 72px; height: 72px; border-radius: 50%; background: var(--golf); display: flex; align-items: center; justify-content: center; font-size: 32px; margin: 28px auto 16px; }
  .confirm-booking-id { font-size: 13px; color: var(--text3); text-align: center; margin-bottom: 4px; }
  .confirm-id-val { font-size: 22px; font-weight: 800; color: var(--golf); text-align: center; letter-spacing: 2px; margin-bottom: 20px; }
  .confirm-detail-card { background: var(--bg); border-radius: var(--r); padding: 15px; margin: 0 14px 14px; }
  .confirm-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 13px; }
  .confirm-row:last-child { margin-bottom: 0; }
  .confirm-label { color: var(--text3); }
  .confirm-value { color: var(--text1); font-weight: 600; }
  .confirm-actions { display: flex; gap: 10px; padding: 0 14px 14px; }
  .confirm-btn-sec { flex: 1; background: var(--bg); color: var(--text1); border: 1.5px solid var(--border); border-radius: 9px; padding: 12px; font-size: 14px; font-weight: 600; cursor: pointer; text-align: center; }
  .confirm-btn-pri { flex: 1; background: var(--golf); color: white; border: none; border-radius: 9px; padding: 12px; font-size: 14px; font-weight: 600; cursor: pointer; }

  /* â”€â”€â”€ Photo Upload â”€â”€â”€ */
  .photo-section { padding: 0 16px 16px; }
  .photo-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; margin-bottom: 10px; }
  .photo-thumb { aspect-ratio: 1; border-radius: 7px; overflow: hidden; background: var(--bg); border: 1px solid var(--border); position: relative; }
  .photo-thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
  .photo-thumb-del { position: absolute; top: 3px; right: 3px; width: 18px; height: 18px; background: rgba(0,0,0,0.55); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: white; font-size: 10px; line-height: 1; }
  .photo-add-btn { display: flex; align-items: center; justify-content: center; gap: 6px; width: 100%; padding: 11px; border: 1.5px dashed var(--border); border-radius: var(--r); font-size: 13px; color: var(--text2); cursor: pointer; transition: all 0.2s; background: transparent; }
  .photo-add-btn:hover { border-color: var(--dark); color: var(--text1); background: var(--bg); }
  .photo-empty { font-size: 12px; color: var(--text3); text-align: center; padding: 18px 0; }
  .cover-upload-zone { display: flex; align-items: center; justify-content: center; gap: 8px; height: 90px; border: 1.5px dashed var(--border); border-radius: var(--r); cursor: pointer; font-size: 13px; color: var(--text2); transition: all 0.2s; overflow: hidden; position: relative; }
  .cover-upload-zone:hover { border-color: var(--dark); color: var(--text1); }
  .cover-upload-zone img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; }

  /* â”€â”€â”€ Strava Screens â”€â”€â”€ */
  .strava-tabs { background: var(--surface); display: flex; border-bottom: 1px solid var(--border); flex-shrink: 0; }
  .strava-tab { flex: 1; text-align: center; padding: 12px 0; font-size: 14px; font-weight: 600; color: var(--text3); cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
  .strava-tab.active { color: #FC4C02; border-bottom-color: #FC4C02; }
  .strava-card { background: var(--surface); margin: 0 14px 10px; border-radius: var(--r); overflow: hidden; border: 1px solid var(--border); cursor: pointer; transition: all 0.2s; }
  .strava-card:hover { border-color: #FC4C02; box-shadow: var(--shadow); }
  .strava-card-header { padding: 11px 14px; color: white; display: flex; justify-content: space-between; align-items: center; }
  .strava-badge { background: #FC4C02; border-radius: 5px; padding: 2px 8px; font-size: 10px; font-weight: 700; letter-spacing: 0.5px; color: white; flex-shrink: 0; }
  .strava-card-body { padding: 12px 14px; }
  .strava-stats-row { display: flex; gap: 14px; flex-wrap: wrap; margin-bottom: 6px; }
  .strava-stat-item { display: flex; flex-direction: column; gap: 1px; }
  .strava-stat-val { font-size: 14px; font-weight: 700; color: var(--text1); }
  .strava-stat-lbl { font-size: 10px; color: var(--text3); text-transform: uppercase; letter-spacing: 0.3px; }
  .strava-card-footer { padding: 8px 14px; border-top: 1px solid var(--border); display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
  .strava-foot-item { font-size: 11px; color: var(--text2); display: flex; align-items: center; gap: 3px; }
  /* Strava Detail */
  .strava-detail-banner { padding: 20px; color: white; }
  .strava-detail-name { font-size: 20px; font-weight: 800; margin-bottom: 4px; }
  .strava-detail-loc { font-size: 13px; color: rgba(255,255,255,0.55); }
  .strava-big-stats { display: flex; background: var(--surface); margin: 0 14px; border-radius: var(--r); box-shadow: var(--shadow); overflow: hidden; }
  .strava-big-stat { flex: 1; text-align: center; padding: 13px 8px; border-right: 1px solid var(--border); }
  .strava-big-stat:last-child { border-right: none; }
  .strava-big-num { font-size: 17px; font-weight: 800; color: #FC4C02; }
  .strava-big-lbl { font-size: 10px; color: var(--text3); margin-top: 2px; text-transform: uppercase; letter-spacing: 0.3px; }
  .strava-elevation-card { margin: 14px 14px 0; background: var(--surface); border-radius: var(--r); border: 1px solid var(--border); overflow: hidden; }
  .strava-elevation-title { font-size: 11px; font-weight: 700; color: var(--text2); padding: 10px 14px 4px; text-transform: uppercase; letter-spacing: 0.6px; }
  .strava-segment-item { padding: 10px 14px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
  .strava-segment-item:last-child { border-bottom: none; }
  .strava-segment-name { font-size: 13px; font-weight: 600; color: var(--text1); }
  .strava-segment-info { font-size: 11px; color: var(--text3); margin-top: 2px; }
  .strava-segment-kom { font-size: 12px; font-weight: 700; color: #FC4C02; }
  .strava-cta { margin: 14px; display: block; width: calc(100% - 28px); background: #FC4C02; color: white; border: none; border-radius: 11px; padding: 15px; font-size: 16px; font-weight: 700; cursor: pointer; transition: background 0.2s; }
  .strava-cta:hover { background: #e04000; }
  .strava-load-btn { display: none; align-items: center; gap: 8px; width: 100%; padding: 11px 14px; border: 1.5px solid #FC4C02; border-radius: 9px; font-size: 13px; font-weight: 600; color: #FC4C02; cursor: pointer; transition: all 0.2s; background: transparent; margin-bottom: 8px; }
  .strava-load-btn:hover { background: rgba(252,76,2,0.06); }
</style>
</head>
<body>

<!-- â”€â”€â”€ Demo Info Panel â”€â”€â”€ -->
<div class="demo-info">
  <h2>URANGO</h2>
  <p>ì•„ì›ƒë„ì–´ ì•¡í‹°ë¹„í‹°<br>ì†Œì…œ í”Œë«í¼<br>ì¸í„°ë™í‹°ë¸Œ í”„ë¡œí† íƒ€ì…</p>
  <div class="demo-screens">
    <div class="demo-chip">ğŸ  í™ˆ</div>
    <div class="demo-chip">ğŸ” ê²€ìƒ‰</div>
    <div class="demo-chip">â• í™œë™ ìƒì„±</div>
    <div class="demo-chip">ğŸ‘¤ í”„ë¡œí•„</div>
    <div class="demo-chip">ğŸ’¬ ë©”ì‹œì§€</div>
    <div class="demo-chip">ğŸ“‹ í™œë™ ìƒì„¸ âœ¨</div>
    <div class="demo-chip">ğŸ’¬ ì±„íŒ… âœ¨</div>
    <div class="demo-chip">ì•Œë¦¼ âœ¨</div>
    <div class="demo-chip">ê³¨í”„ ì˜ˆì•½ âœ¨</div>
    <div class="demo-chip" style="background:rgba(252,76,2,0.15);border-color:rgba(252,76,2,0.35);color:#FC4C02">Strava ì½”ìŠ¤ âœ¨</div>
  </div>
  <div style="margin-top:20px; background:rgba(255,255,255,0.05); border-radius:12px; padding:14px; text-align:left; font-size:12px; line-height:1.8; color:rgba(255,255,255,0.6)">
    <div style="color:#FC4C02; font-weight:700; margin-bottom:6px">âœ… v3.2 ì‹ ê·œ â€” Strava ì½”ìŠ¤ ì—°ë™</div>
    <div>ğŸš´ Cycle ì½”ìŠ¤ 8ê°œ (í•œê°•Â·ë‚¨ì‚°Â·íŒ”ë‹¹Â·ì œì£¼ ë“±)</div>
    <div>ğŸƒ Run ì½”ìŠ¤ 7ê°œ (ë‚¨ì‚°Â·í•œê°•Â·ì˜¬ë¦¼í”½ê³µì› ë“±)</div>
    <div>ğŸ“Š ê³ ë„ í”„ë¡œíŒŒì¼ SVG ì‹œê°í™”</div>
    <div>âš¡ ì½”ìŠ¤ ì„ íƒ â†’ í™œë™ í¼ ìë™ì…ë ¥</div>
    <div>ğŸ”— Strava API OAuth2 êµ¬ì¡° ì£¼ì„ í¬í•¨</div>
  </div>
  <div style="margin-top:12px; background:rgba(255,255,255,0.05); border-radius:12px; padding:14px; text-align:left; font-size:12px; line-height:1.8; color:rgba(255,255,255,0.6)">
    <div style="color:var(--accent); font-weight:700; margin-bottom:6px">âœ… v2.0 ê¸°ì¡´ ê¸°ëŠ¥</div>
    <div>ğŸ”§ í° í”„ë ˆì„ ë†’ì´ ê³ ì •</div>
    <div>ğŸ• ì‹¤ì‹œê°„ ì‹œê° í‘œì‹œ</div>
    <div>ğŸ“‹ í™œë™ ìƒì„¸ í™”ë©´ ì¶”ê°€</div>
    <div>ğŸ’¬ ì±„íŒ… í™”ë©´ (ì „ì†¡ ê°€ëŠ¥)</div>
    <div>ğŸ”” ì•Œë¦¼ í™”ë©´ ì¶”ê°€</div>
    <div>â›³ ê³¨í”„ì¥ ì˜ˆì•½ ì‹œìŠ¤í…œ</div>
    <div>ğŸš€ í™œë™ ìƒì„± â†’ í™ˆ ë°˜ì˜</div>
  </div>
  <div style="margin-top:12px; font-size:11px; opacity:0.4;">Version 3.2 Â· 2026.02.27</div>
</div>

<!-- â”€â”€â”€ Phone Frame â”€â”€â”€ -->
<div class="phone-frame">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HOME SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen active" id="screen-home">
    <div class="status-bar">
      <span id="clock-home">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span>
    </div>
    <div class="header" style="justify-content:space-between">
      <div>
        <h1>URANGO</h1>
        <div class="subtitle">ì–´ë””ë¡œ ë– ë‚ ê¹Œìš”?</div>
      </div>
      <div style="cursor:pointer;position:relative;color:white;line-height:0" onclick="goScreen('notify')">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg>
        <div style="position:absolute;top:-2px;right:-2px;width:8px;height:8px;background:var(--accent);border-radius:50%;border:2px solid var(--dark)"></div>
      </div>
    </div>
    <div class="content" id="content-home">
      <div class="hero-banner">
        <h2>í•¨ê»˜ ë‹¬ë¦¬ê³ ,<br>í•¨ê»˜ ì˜¤ë¥´ê³ !</h2>
        <p>ê²€ì¦ëœ ë¦¬ë”ì™€ í•¨ê»˜í•˜ëŠ” ì•ˆì „í•œ ì•„ì›ƒë„ì–´</p>
        <div class="hero-stats">
          <div class="hero-stat"><div class="num">1,247</div><div class="lbl">í™œì„± í™œë™</div></div>
          <div class="hero-stat"><div class="num">8,924</div><div class="lbl">í™œë™ ë¦¬ë”</div></div>
          <div class="hero-stat"><div class="num">42,100</div><div class="lbl">ì „ì²´ íšŒì›</div></div>
        </div>
      </div>
      <div class="page-info">ì„œìš¸íŠ¹ë³„ì‹œ ê¸°ì¤€ ì¶”ì²œ í™œë™</div>
      <div class="categories-grid">
        <div class="category-card" onclick="goCategory('Cycle')">
          <div class="cat-emoji"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="16" r="4"/><circle cx="18" cy="16" r="4"/><path d="M6 16l5-9h3"/><path d="M14 7l3 9"/><path d="M10 7l2 5h6"/><circle cx="15" cy="5.5" r="1.5"/></svg></div>
          <div class="cat-name">Cycle</div>
          <div class="cat-count">342ê°œ í™œë™</div>
        </div>
        <div class="category-card" onclick="goCategory('Golf')">
          <div class="cat-emoji"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="3" x2="12" y2="22"/><path d="M12 3l8 4-8 4V3z"/><ellipse cx="12" cy="22" rx="5" ry="1.5"/></svg></div>
          <div class="cat-name">Golf</div>
          <div class="cat-count">ê³¨í”„ì¥ ì˜ˆì•½</div>
        </div>
        <div class="category-card" onclick="goCategory('Run')">
          <div class="cat-emoji"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="13" cy="4" r="1.8"/><path d="M7 20l2.5-5 3 2.5 2-5.5"/><path d="M7 14l2.5-3.5 4.5-0.5 2.5-2.5"/><path d="M16 14l2.5 4"/></svg></div>
          <div class="cat-name">Run</div>
          <div class="cat-count">426ê°œ í™œë™</div>
        </div>
        <div class="category-card" onclick="goCategory('Mountain')">
          <div class="cat-emoji"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 20l5.5-11 4 7 2.5-4.5L21 20H3z"/><path d="M13.5 15.5l2.5-4.5"/></svg></div>
          <div class="cat-name">Mountain</div>
          <div class="cat-count">292ê°œ í™œë™</div>
        </div>
      </div>
      <div class="section-title">ì´ë²ˆ ì£¼ ì¶”ì²œ í™œë™</div>
      <div id="home-activity-list"></div>
      <div style="height:20px"></div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item active" onclick="goScreen('home')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1H4a1 1 0 01-1-1V9.5z"/><path d="M9 21V12h6v9"/></svg></div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item" onclick="goScreen('search')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item" onclick="goScreen('create')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg></div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item" onclick="goScreen('profile')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg></div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item" onclick="goScreen('messages')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SEARCH SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-search">
    <div class="status-bar"><span id="clock-search">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header"><h1>í™œë™ ê²€ìƒ‰</h1></div>
    <div class="search-bar-wrap">
      <input class="search-input" id="search-input" placeholder="ë¦¬ë”, ì¥ì†Œ, ì½”ìŠ¤ ê²€ìƒ‰..." type="text" oninput="renderSearchResults()">
      <button class="search-btn" onclick="renderSearchResults()">ê²€ìƒ‰</button>
    </div>
    <!-- Fix: ì¹´í…Œê³ ë¦¬ ì¹©(ë‹¨ì¼) + ì˜µì…˜ ì¹©(ë³µìˆ˜) ë¶„ë¦¬ -->
    <div class="filter-chips" id="filter-chips">
      <div class="chip cat-chip active" data-cat="ì „ì²´" onclick="toggleCatChip(this)">ì „ì²´</div>
      <div class="chip cat-chip" data-cat="Cycle" onclick="toggleCatChip(this)">Cycle</div>
      <div class="chip cat-chip" data-cat="Golf" onclick="toggleCatChip(this)">Golf</div>
      <div class="chip cat-chip" data-cat="Run" onclick="toggleCatChip(this)">Run</div>
      <div class="chip cat-chip" data-cat="Mountain" onclick="toggleCatChip(this)">Mountain</div>
      <div class="chip opt-chip" data-opt="ì´ë²ˆì£¼" onclick="toggleOptChip(this)">ì´ë²ˆì£¼</div>
      <div class="chip opt-chip" data-opt="ì¦‰ì‹œì°¸ì—¬" onclick="toggleOptChip(this)">ì¦‰ì‹œì°¸ì—¬</div>
      <div class="chip opt-chip" data-opt="ì´ˆê¸‰" onclick="toggleOptChip(this)">ì´ˆê¸‰</div>
    </div>
    <div class="content">
      <div class="page-info" id="search-count">ì´ 5ê°œì˜ í™œë™ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤</div>
      <div id="search-results-list"></div>
      <div style="height:20px"></div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item" onclick="goScreen('home')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1H4a1 1 0 01-1-1V9.5z"/><path d="M9 21V12h6v9"/></svg></div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item active" onclick="goScreen('search')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item" onclick="goScreen('create')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg></div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item" onclick="goScreen('profile')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg></div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item" onclick="goScreen('messages')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CREATE SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-create">
    <div class="status-bar"><span id="clock-create">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header"><h1>í™œë™ ë§Œë“¤ê¸°</h1></div>
    <div class="content">
      <div class="create-form">
        <div class="form-group">
          <label class="form-label">ì¹´í…Œê³ ë¦¬ ì„ íƒ</label>
          <div class="radio-group" id="cat-radio">
            <div class="radio-btn active" onclick="selectRadio(this,'cat-radio')">Cycle</div>
            <div class="radio-btn" onclick="selectRadio(this,'cat-radio')">Golf</div>
            <div class="radio-btn" onclick="selectRadio(this,'cat-radio')">Run</div>
            <div class="radio-btn" onclick="selectRadio(this,'cat-radio')">Mountain</div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">í™œë™ ì œëª©</label>
          <input class="form-control" id="new-title" type="text" placeholder="ì˜ˆ: í•œê°• ë¼ì´ë”© í•¨ê»˜í•´ìš”!">
        </div>
        <div class="form-group">
          <label class="form-label">ë‚ ì§œ</label>
          <input class="form-control" id="new-date" type="date" value="2026-03-15">
        </div>
        <!-- Fix: ì§€ì—­ ì„ íƒ ì˜µì…˜ ì¶”ê°€ -->
        <div class="form-group">
          <label class="form-label">ì§€ì—­</label>
          <select class="form-control" id="new-region">
            <option value="ì„œìš¸">ì„œìš¸íŠ¹ë³„ì‹œ</option>
            <option value="ê²½ê¸°">ê²½ê¸°ë„</option>
            <option value="ì¸ì²œ">ì¸ì²œê´‘ì—­ì‹œ</option>
            <option value="ë¶€ì‚°">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ëŒ€êµ¬">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
            <option value="ëŒ€ì „">ëŒ€ì „ê´‘ì—­ì‹œ</option>
            <option value="ê´‘ì£¼">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
            <option value="ìš¸ì‚°">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ê°•ì›">ê°•ì›ë„</option>
            <option value="ì¶©ì²­">ì¶©ì²­ë„</option>
            <option value="ì „ë¼">ì „ë¼ë„</option>
            <option value="ê²½ìƒ">ê²½ìƒë„</option>
            <option value="ì œì£¼">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">ìƒì„¸ ì½”ìŠ¤</label>
          <button class="strava-load-btn" id="strava-load-btn" onclick="openStravaFromCreate()">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
            Strava ì½”ìŠ¤ ë¶ˆëŸ¬ì˜¤ê¸°
          </button>
          <input class="form-control" id="new-course" type="text" placeholder="ì˜ˆ: ì—¬ì˜ë„ í•œê°•ê³µì› â†’ ëšì„¬ ì™•ë³µ">
        </div>
        <div class="form-group">
          <label class="form-label">ë‚œì´ë„</label>
          <div class="radio-group" id="level-radio">
            <div class="radio-btn active" onclick="selectRadio(this,'level-radio')"><span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:#16a34a;margin-right:5px;vertical-align:middle"></span>ì´ˆê¸‰</div>
            <div class="radio-btn" onclick="selectRadio(this,'level-radio')"><span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:#f59e0b;margin-right:5px;vertical-align:middle"></span>ì¤‘ê¸‰</div>
            <div class="radio-btn" onclick="selectRadio(this,'level-radio')"><span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:#ef4444;margin-right:5px;vertical-align:middle"></span>ê³ ê¸‰</div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">ì¸ì› ì œí•œ</label>
          <div class="radio-group" id="size-radio">
            <div class="radio-btn" onclick="selectRadio(this,'size-radio')">2~5ëª…</div>
            <div class="radio-btn active" onclick="selectRadio(this,'size-radio')">6~10ëª…</div>
            <div class="radio-btn" onclick="selectRadio(this,'size-radio')">11ëª… ì´ìƒ</div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">í™œë™ ì†Œê°œ</label>
          <textarea class="form-control" id="new-desc" rows="3" placeholder="í™œë™ì— ëŒ€í•œ ê°„ë‹¨í•œ ì†Œê°œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">ì»¤ë²„ ì‚¬ì§„ <span style="font-weight:400;color:var(--text3)">(ì„ íƒ)</span></label>
          <label class="cover-upload-zone" for="cover-photo-input">
            <span id="cover-placeholder" style="display:flex;align-items:center;gap:6px;font-size:13px;color:var(--text3)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
              ì‚¬ì§„ ì„ íƒ
            </span>
            <input type="file" id="cover-photo-input" accept="image/*" style="display:none" onchange="previewCover(this)">
          </label>
        </div>
        <button class="create-submit" onclick="submitCreate()">í™œë™ ìƒì„±í•˜ê¸°</button>
      </div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item" onclick="goScreen('home')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1H4a1 1 0 01-1-1V9.5z"/><path d="M9 21V12h6v9"/></svg></div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item" onclick="goScreen('search')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item active" onclick="goScreen('create')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg></div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item" onclick="goScreen('profile')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg></div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item" onclick="goScreen('messages')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PROFILE SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-profile">
    <div class="status-bar"><span id="clock-profile">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="profile-header">
      <div class="profile-avatar"><svg width="38" height="38" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.8)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg></div>
      <div class="profile-name">í™ê¸¸ë™</div>
      <div class="profile-id">@hong_outdoor</div>
      <div class="profile-rating">â˜… 4.8ì   Â·  ë¦¬ë”</div>
    </div>
    <div class="content">
      <div class="profile-stats">
        <div class="stat-item"><div class="stat-num">24</div><div class="stat-lbl">ë¦¬ë“œ í™œë™</div></div>
        <div class="stat-item" style="border-left:1px solid #eee;border-right:1px solid #eee"><div class="stat-num">87</div><div class="stat-lbl">ì°¸ì—¬ í™œë™</div></div>
        <div class="stat-item"><div class="stat-num">312</div><div class="stat-lbl">íŒ”ë¡œì›Œ</div></div>
      </div>
      <div style="padding:14px 16px 8px;font-size:11px;font-weight:700;color:var(--text3);text-transform:uppercase;letter-spacing:0.8px">ì„ í˜¸ ì¹´í…Œê³ ë¦¬</div>
      <div style="padding:0 16px;display:flex;gap:6px;flex-wrap:wrap">
        <div class="chip active">Cycle</div>
        <div class="chip active">Mountain</div>
      </div>
      <div class="profile-menu">
        <div class="menu-item" onclick="showToast('ë‚´ í™œë™ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤')">
          <div class="menu-icon"><svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 010-5H6M18 9h1.5a2.5 2.5 0 000-5H18M4 22h16M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22M18 2H6v7a6 6 0 0012 0V2z"/></svg></div>
          <div class="menu-text">ë‚´ í™œë™ ëª©ë¡</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('íŒ”ë¡œì‰ 198ëª… / íŒ”ë¡œì›Œ 312ëª…')">
          <div class="menu-icon"><svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg></div>
          <div class="menu-text">íŒ”ë¡œì‰ / íŒ”ë¡œì›Œ</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('ì‚¬ì§„ì²©: 87ì¥ì˜ ì‚¬ì§„ì´ ìˆìŠµë‹ˆë‹¤')">
          <div class="menu-icon"><svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/><circle cx="12" cy="13" r="4"/></svg></div>
          <div class="menu-text">ì‚¬ì§„ì²©</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('í‰ê·  í‰ì  4.8ì  (ì´ 56íšŒ í‰ê°€)')">
          <div class="menu-icon"><svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></div>
          <div class="menu-text">í‰ê°€ ë‚´ì—­</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('ì•Œë¦¼ ì„¤ì •ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤')">
          <div class="menu-icon"><svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg></div>
          <div class="menu-text">ì•Œë¦¼ ì„¤ì •</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('ê³„ì • ì„¤ì •ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤')">
          <div class="menu-icon"><svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg></div>
          <div class="menu-text">ê³„ì • ì„¤ì •</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤')">
          <div class="menu-icon"><svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg></div>
          <div class="menu-text" style="color:#ef4444">ë¡œê·¸ì•„ì›ƒ</div><div class="menu-arrow">â€º</div>
        </div>
      </div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item" onclick="goScreen('home')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1H4a1 1 0 01-1-1V9.5z"/><path d="M9 21V12h6v9"/></svg></div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item" onclick="goScreen('search')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item" onclick="goScreen('create')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg></div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item active" onclick="goScreen('profile')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg></div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item" onclick="goScreen('messages')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MESSAGES SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-messages">
    <div class="status-bar"><span id="clock-messages">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header"><h1>ë©”ì‹œì§€</h1></div>
    <div class="content">
      <div class="page-info">ì½ì§€ ì•Šì€ ë©”ì‹œì§€ 3ê°œ</div>
      <div class="dm-list">
        <div class="dm-item" onclick="openChat('ë°•ë¯¼ì¤€','ë°•','#111111')">
          <div class="dm-avatar">ë°•</div>
          <div class="dm-info">
            <div class="dm-name">ë°•ë¯¼ì¤€ ë¦¬ë”</div>
            <div class="dm-preview">ì•ˆë…•í•˜ì„¸ìš”! í•œê°• ë¼ì´ë”© ì‹ ì²­ í™•ì¸í–ˆìŠµë‹ˆë‹¤</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">ë°©ê¸ˆ</div><div class="unread-badge">2</div>
          </div>
        </div>
        <div class="dm-item" onclick="openChat('ê¹€ì„œì—°','ê¹€','#166534')">
          <div class="dm-avatar" style="background:#166534">ê¹€</div>
          <div class="dm-info">
            <div class="dm-name">ê¹€ì„œì—° ë¦¬ë”</div>
            <div class="dm-preview">ë¶í•œì‚° íŠ¸ë ˆí‚¹ ì¤€ë¹„ë¬¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">1ì‹œê°„ ì „</div><div class="unread-badge">1</div>
          </div>
        </div>
        <div class="dm-item" onclick="openChat('ì •í˜„ìš°','ì •','#1F1F1F')">
          <div class="dm-avatar" style="background:#1F1F1F">ì •</div>
          <div class="dm-info">
            <div class="dm-name">ì •í˜„ìš° ë¦¬ë”</div>
            <div class="dm-preview">ê°€í‰ íˆ¬ì–´ ì˜ ë‹¤ë…€ì™”ìŠµë‹ˆë‹¤! ë‹¤ìŒì— ë˜ ë´¬ìš”</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">ì–´ì œ</div>
          </div>
        </div>
        <div class="dm-item" onclick="openChat('ì´ì¤€í˜¸','ì´','#374151')">
          <div class="dm-avatar" style="background:#374151">ì´</div>
          <div class="dm-info">
            <div class="dm-name">ì´ì¤€í˜¸ ë¦¬ë”</div>
            <div class="dm-preview">5K ëŸ¬ë‹ ê°™ì´ ë‹¬ë ¸ë˜ ë¶„ë“¤ ë‹¨ì²´ ì±„íŒ…ë°© ë§Œë“¤ì—ˆì–´ìš”!</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">2ì¼ ì „</div>
          </div>
        </div>
        <div class="dm-item" onclick="openChat('ìµœë‹¤í˜„','ìµœ','#6366f1')">
          <div class="dm-avatar" style="background:#6366f1">ìµœ</div>
          <div class="dm-info">
            <div class="dm-name">ìµœë‹¤í˜„ ë¦¬ë”</div>
            <div class="dm-preview">ë‹¤ìŒ ë„ë´‰ì‚° íŠ¸ë ˆí‚¹ë„ ê¸°ëŒ€í•´ì£¼ì„¸ìš”! â›°ï¸</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">3ì¼ ì „</div>
          </div>
        </div>
      </div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item" onclick="goScreen('home')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1H4a1 1 0 01-1-1V9.5z"/><path d="M9 21V12h6v9"/></svg></div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item" onclick="goScreen('search')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item" onclick="goScreen('create')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg></div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item" onclick="goScreen('profile')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg></div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item active" onclick="goScreen('messages')"><div class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] ACTIVITY DETAIL SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-detail">
    <div class="status-bar"><span id="clock-detail">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header">
      <span class="back-btn" onclick="goBack()">â†</span>
      <h1 id="detail-cat-label">í™œë™ ìƒì„¸</h1>
    </div>
    <div class="content" id="detail-content"></div>
    <div class="detail-join-bar">
      <div class="detail-join-info">ë‚¨ì€ ìë¦¬ <strong id="detail-slots">-</strong></div>
      <button class="detail-join-btn" onclick="showToast('âœ… ì°¸ê°€ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!')">ì°¸ê°€ ì‹ ì²­í•˜ê¸°</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] CHAT SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-chat">
    <div class="status-bar"><span id="clock-chat">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header">
      <span class="back-btn" onclick="goScreen('messages')">â†</span>
      <div class="chat-header-info">
        <div class="chat-header-name" id="chat-name">ë°•ë¯¼ì¤€ ë¦¬ë”</div>
        <div class="chat-header-status">ì˜¨ë¼ì¸</div>
      </div>
      <div style="cursor:pointer;color:white;line-height:0" onclick="showToast('í†µí™” ì—°ê²° ì¤‘...')"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 013.07 9.8a19.79 19.79 0 01-3.07-8.67A2 2 0 012 .84h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L6.09 8.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg></div>
    </div>
    <div class="chat-messages" id="chat-messages"></div>
    <div class="chat-input-bar">
      <input class="chat-input" id="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="if(event.key==='Enter')sendMessage()">
      <button class="chat-send-btn" onclick="sendMessage()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] NOTIFY SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-notify">
    <div class="status-bar"><span id="clock-notify">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header">
      <span class="back-btn" onclick="goScreen('home')">â†</span>
      <h1>ì•Œë¦¼</h1>
    </div>
    <div class="content">
      <div class="page-info">ì½ì§€ ì•Šì€ ì•Œë¦¼ 4ê°œ</div>
      <div class="notify-list">
        <div class="notify-item unread" onclick="this.classList.remove('unread');this.querySelector('.notify-dot')?.remove();showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div>
          <div class="notify-content">
            <div class="notify-text"><strong>ë°•ë¯¼ì¤€ ë¦¬ë”</strong>ê°€ ê·€í•˜ì˜ í•œê°• ë¼ì´ë”© ì°¸ê°€ ì‹ ì²­ì„ <strong>ìŠ¹ì¸</strong>í–ˆìŠµë‹ˆë‹¤.</div>
            <div class="notify-time">ë°©ê¸ˆ ì „</div>
          </div>
          <div class="notify-dot"></div>
        </div>
        <div class="notify-item unread" onclick="this.classList.remove('unread');this.querySelector('.notify-dot')?.remove();showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--dark)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div>
          <div class="notify-content">
            <div class="notify-text"><strong>ë°•ë¯¼ì¤€ ë¦¬ë”</strong>ê°€ ë©”ì‹œì§€ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤: "ì•ˆë…•í•˜ì„¸ìš”! í•œê°• ë¼ì´ë”©..."</div>
            <div class="notify-time">5ë¶„ ì „</div>
          </div>
          <div class="notify-dot"></div>
        </div>
        <div class="notify-item unread" onclick="this.classList.remove('unread');this.querySelector('.notify-dot')?.remove();showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#6366f1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg></div>
          <div class="notify-content">
            <div class="notify-text"><strong>ê¹€ì„œì—°</strong>ë‹˜ì´ íŒ”ë¡œìš°í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.</div>
            <div class="notify-time">1ì‹œê°„ ì „</div>
          </div>
          <div class="notify-dot"></div>
        </div>
        <div class="notify-item unread" onclick="this.classList.remove('unread');this.querySelector('.notify-dot')?.remove();showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="#f59e0b" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></div>
          <div class="notify-content">
            <div class="notify-text"><strong>ì´ì¤€í˜¸</strong>ë‹˜ì´ <strong>â˜…â˜…â˜…â˜…â˜… 5.0</strong> í‰ì ì„ ë‚¨ê²¼ìŠµë‹ˆë‹¤.</div>
            <div class="notify-time">3ì‹œê°„ ì „</div>
          </div>
          <div class="notify-dot"></div>
        </div>
        <div class="notify-item" onclick="showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg></div>
          <div class="notify-content">
            <div class="notify-text">ì°¸ê°€í•˜ì‹  <strong>ì˜¬ë¦¼í”½ê³µì› 5K ëŸ¬ë‹í¬ë£¨</strong> í™œë™ì´ ë‚´ì¼ì…ë‹ˆë‹¤!</div>
            <div class="notify-time">ì–´ì œ</div>
          </div>
        </div>
        <div class="notify-item" onclick="showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--text2)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg></div>
          <div class="notify-content">
            <div class="notify-text">ê·¼ì²˜ì— ìƒˆ í™œë™ ë“±ë¡: <strong>í•œê°• ìì „ê±° ë¼ì´ë”© ì´ˆë³´í™˜ì˜</strong></div>
            <div class="notify-time">2ì¼ ì „</div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] GOLF COURSE LIST SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-golf">
    <div class="status-bar"><span id="clock-golf">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header" style="justify-content:space-between">
      <div style="display:flex;align-items:center;gap:10px">
        <span class="back-btn" onclick="goBack()">â†</span>
        <div>
          <h1>ê³¨í”„ì¥ ì˜ˆì•½</h1>
          <div class="subtitle" id="golf-api-status">ê³¨í”„ì¥ ê²€ìƒ‰ ì¤‘...</div>
        </div>
      </div>
    </div>
    <div class="golf-search-bar">
      <input class="search-input" id="golf-search-input" placeholder="ê³¨í”„ì¥ ì´ë¦„, ì§€ì—­ ê²€ìƒ‰..." type="text" oninput="filterGolfCourses()">
      <button class="search-btn" onclick="filterGolfCourses()">ê²€ìƒ‰</button>
    </div>
    <div class="golf-region-chips" id="golf-region-chips">
      <div class="chip active" data-region="ì „ì²´" onclick="selectGolfRegion(this)">ì „ì²´</div>
      <div class="chip" data-region="ì„œìš¸" onclick="selectGolfRegion(this)">ì„œìš¸</div>
      <div class="chip" data-region="ê²½ê¸°" onclick="selectGolfRegion(this)">ê²½ê¸°</div>
      <div class="chip" data-region="ì¸ì²œ" onclick="selectGolfRegion(this)">ì¸ì²œ</div>
      <div class="chip" data-region="ê°•ì›" onclick="selectGolfRegion(this)">ê°•ì›</div>
      <div class="chip" data-region="ì¶©ì²­" onclick="selectGolfRegion(this)">ì¶©ì²­</div>
      <div class="chip" data-region="ê²½ìƒ" onclick="selectGolfRegion(this)">ê²½ìƒ</div>
      <div class="chip" data-region="ì „ë¼" onclick="selectGolfRegion(this)">ì „ë¼</div>
      <div class="chip" data-region="ì œì£¼" onclick="selectGolfRegion(this)">ì œì£¼</div>
    </div>
    <div class="content" id="golf-list-content">
      <div class="page-info" id="golf-count">ê³¨í”„ì¥ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
      <div id="golf-list"></div>
      <div style="height:20px"></div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] GOLF DETAIL + TEE TIME SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-golf-detail">
    <div class="status-bar"><span id="clock-golf-detail">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header" id="golf-detail-header">
      <span class="back-btn" onclick="goBack()">â†</span>
      <h1 id="golf-detail-title">ê³¨í”„ì¥ ìƒì„¸</h1>
    </div>
    <div class="content" id="golf-detail-content"></div>
    <div class="detail-join-bar">
      <div class="detail-join-info">í‹°íƒ€ì„ ì„ íƒ í›„<br><strong id="golf-selected-time">ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”</strong></div>
      <button class="detail-join-btn" style="background:linear-gradient(135deg,#2e7d32,#43a047)"
        onclick="openGolfBooking()">ì˜ˆì•½í•˜ê¸°</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] GOLF BOOKING FORM SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-golf-booking">
    <div class="status-bar"><span id="clock-golf-booking">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header">
      <span class="back-btn" onclick="goBack()">â†</span>
      <h1>ì˜ˆì•½ ì •ë³´ ì…ë ¥</h1>
    </div>
    <div class="content">
      <div class="booking-summary" id="booking-summary-box"></div>
      <div style="padding:0 16px 8px">
        <div class="form-label" style="margin-bottom:12px">í”Œë ˆì´ì–´ ìˆ˜</div>
        <div class="player-selector">
          <button class="player-btn" onclick="changePlayerCount(-1)">âˆ’</button>
          <div class="player-count" id="player-count-display">4</div>
          <button class="player-btn" onclick="changePlayerCount(1)">+</button>
        </div>
        <div style="text-align:center;font-size:12px;color:#888;margin-top:4px">ìµœëŒ€ 4ëª…</div>
      </div>
      <div style="padding:16px 16px 8px">
        <div class="form-label" style="margin-bottom:10px">ì¹´íŠ¸ / ìºë”” ì„ íƒ</div>
        <div class="radio-group" id="cart-radio">
          <div class="radio-btn active" onclick="selectRadio(this,'cart-radio')">ì¹´íŠ¸+ìºë””</div>
          <div class="radio-btn" onclick="selectRadio(this,'cart-radio')">ì¹´íŠ¸ ì „ìš©</div>
          <div class="radio-btn" onclick="selectRadio(this,'cart-radio')">ë„ë³´</div>
        </div>
      </div>
      <div style="padding:16px 16px 8px">
        <div class="form-label" style="margin-bottom:10px">ì˜ˆì•½ì ì •ë³´</div>
        <input class="form-control" id="booker-name" type="text" placeholder="ì˜ˆì•½ì ì„±í•¨" style="margin-bottom:10px">
        <input class="form-control" id="booker-phone" type="tel" placeholder="ì—°ë½ì²˜ (010-0000-0000)">
      </div>
      <div class="price-breakdown" id="price-breakdown"></div>
      <button class="booking-btn" onclick="confirmGolfBooking()">ì˜ˆì•½ í™•ì •í•˜ê¸°</button>
      <div style="text-align:center;font-size:11px;color:#aaa;padding-bottom:16px">
        ì˜ˆì•½ í›„ ì·¨ì†ŒëŠ” ë¼ìš´ë”© 48ì‹œê°„ ì „ê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] GOLF BOOKING CONFIRM SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-golf-confirm">
    <div class="status-bar"><span id="clock-golf-confirm">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header" style="background:linear-gradient(135deg,#2e7d32,#43a047)">
      <h1 style="margin:0 auto">ì˜ˆì•½ ì™„ë£Œ</h1>
    </div>
    <div class="content">
      <div class="confirm-circle"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></div>
      <div style="text-align:center;font-size:18px;font-weight:800;color:var(--dark);margin-bottom:6px">ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div>
      <div class="confirm-booking-id">ì˜ˆì•½ ë²ˆí˜¸</div>
      <div class="confirm-id-val" id="confirm-booking-id">GF00000000</div>
      <div class="confirm-detail-card" id="confirm-detail"></div>
      <div class="confirm-actions">
        <div class="confirm-btn-sec" onclick="showToast('ìº˜ë¦°ë”ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤')">ìº˜ë¦°ë” ì¶”ê°€</div>
        <div class="confirm-btn-pri" onclick="goScreen('home')">í™ˆìœ¼ë¡œ</div>
      </div>
      <div style="text-align:center;font-size:12px;color:#aaa;padding-bottom:16px">
        ì˜ˆì•½ í™•ì¸ì„œê°€ ë“±ë¡ëœ ì—°ë½ì²˜ë¡œ ë°œì†¡ë©ë‹ˆë‹¤
      </div>
    </div>
  </div>


  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] STRAVA COURSE LIST SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-strava">
    <div class="status-bar"><span id="clock-strava">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header" style="justify-content:space-between">
      <div style="display:flex;align-items:center;gap:10px">
        <span class="back-btn" onclick="goBack()">â†</span>
        <div>
          <h1>Strava <span style="color:#FC4C02">ì½”ìŠ¤</span></h1>
          <div class="subtitle">ì¸ê¸° ì½”ìŠ¤ë¡œ í™œë™ ì‹œì‘í•˜ê¸°</div>
        </div>
      </div>
      <div style="color:#FC4C02;line-height:0">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#FC4C02" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
      </div>
    </div>
    <div class="strava-tabs">
      <div class="strava-tab active" id="strava-tab-cycle" onclick="switchStravaTab('cycle')">Cycle</div>
      <div class="strava-tab" id="strava-tab-run" onclick="switchStravaTab('run')">Run</div>
    </div>
    <div class="golf-region-chips" id="strava-region-chips">
      <div class="chip active" data-region="ì „ì²´" onclick="selectStravaRegion(this)">ì „ì²´</div>
      <div class="chip" data-region="ì„œìš¸" onclick="selectStravaRegion(this)">ì„œìš¸</div>
      <div class="chip" data-region="ê²½ê¸°" onclick="selectStravaRegion(this)">ê²½ê¸°</div>
      <div class="chip" data-region="ê°•ì›" onclick="selectStravaRegion(this)">ê°•ì›</div>
      <div class="chip" data-region="ì œì£¼" onclick="selectStravaRegion(this)">ì œì£¼</div>
    </div>
    <div class="content">
      <div class="page-info" id="strava-count">Strava ì¸ê¸° ì½”ìŠ¤</div>
      <div id="strava-list"></div>
      <div style="height:20px"></div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] STRAVA COURSE DETAIL SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-strava-detail">
    <div class="status-bar"><span id="clock-strava-detail">9:41</span><span style="display:flex;align-items:center;gap:5px"><svg width="14" height="10" viewBox="0 0 16 12" fill="white"><rect x="0" y="4" width="2.5" height="8" rx="0.5"/><rect x="4" y="2.5" width="2.5" height="9.5" rx="0.5"/><rect x="8" y="1" width="2.5" height="11" rx="0.5"/><rect x="12" y="0" width="2.5" height="12" rx="0.5" opacity="0.35"/></svg><svg width="20" height="10" viewBox="0 0 22 12" fill="none"><rect x="0.5" y="0.5" width="18" height="11" rx="1.5" stroke="white" stroke-opacity="0.6"/><rect x="19" y="4" width="2.5" height="4" rx="1" fill="white" fill-opacity="0.6"/><rect x="1.5" y="1.5" width="13" height="9" rx="1" fill="white"/></svg></span></div>
    <div class="header">
      <span class="back-btn" onclick="goBack()">â†</span>
      <h1 id="strava-detail-title">ì½”ìŠ¤ ìƒì„¸</h1>
    </div>
    <div class="content" id="strava-detail-content"></div>
  </div>

</div><!-- /phone-frame -->

<!-- Toast -->
<div id="toast" style="display:none;position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:#212121;color:white;padding:12px 24px;border-radius:24px;font-size:14px;z-index:9999;box-shadow:0 4px 20px rgba(0,0,0,0.3);white-space:nowrap;transition:opacity 0.3s"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PHOTO UPLOAD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderPhotoGrid(actId) {
  const photos = (ACTIVITIES.find(a => a.id === actId) || {}).photos || [];
  if (!photos.length) return `<div class="photo-empty" style="grid-column:1/-1">ì•„ì§ ì‚¬ì§„ì´ ì—†ìŠµë‹ˆë‹¤</div>`;
  return photos.map((src, i) => `
    <div class="photo-thumb">
      <img src="${src}" alt="í™œë™ ì‚¬ì§„ ${i+1}">
      <div class="photo-thumb-del" onclick="deletePhoto(${actId},${i})">âœ•</div>
    </div>`).join('');
}

function uploadPhoto(actId, input) {
  const act = ACTIVITIES.find(a => a.id === actId);
  if (!act) return;
  if (!act.photos) act.photos = [];
  const files = Array.from(input.files);
  let loaded = 0;
  files.forEach(file => {
    const reader = new FileReader();
    reader.onload = e => {
      act.photos.push(e.target.result);
      loaded++;
      if (loaded === files.length) {
        const grid = document.getElementById(`photo-grid-${actId}`);
        if (grid) grid.innerHTML = renderPhotoGrid(actId);
        showToast(`ì‚¬ì§„ ${files.length}ì¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤`);
      }
    };
    reader.readAsDataURL(file);
  });
  input.value = '';
}

function deletePhoto(actId, idx) {
  const act = ACTIVITIES.find(a => a.id === actId);
  if (!act || !act.photos) return;
  act.photos.splice(idx, 1);
  const grid = document.getElementById(`photo-grid-${actId}`);
  if (grid) grid.innerHTML = renderPhotoGrid(actId);
  showToast('ì‚¬ì§„ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
}

function previewCover(input) {
  const file = input.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = e => {
    const zone = input.closest('.cover-upload-zone');
    const placeholder = document.getElementById('cover-placeholder');
    if (placeholder) placeholder.style.display = 'none';
    let img = zone.querySelector('img');
    if (!img) { img = document.createElement('img'); zone.appendChild(img); }
    img.src = e.target.result;
  };
  reader.readAsDataURL(file);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ACTIVITY DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ACTIVITIES = [
  {
    id: 0, cat: 'Cycle', catEmoji: 'ğŸš´',
    photos: [],
    title: 'í•œê°• ë¼ì´ë”© í•¨ê»˜í•´ìš”',
    date: '2026.03.15 (í† ) 08:00', location: 'ì—¬ì˜ë„ í•œê°•ê³µì›',
    course: 'ì—¬ì˜ë„ í•œê°•ê³µì› â†’ ëšì„¬ ì™•ë³µ (ì•½ 40km)', level: 'ğŸŸ¢ ì´ˆê¸‰',
    current: 4, max: 6, popJoin: false,
    leader: 'ë°•ë¯¼ì¤€', initial: 'ë°•', grad: '#111111',
    rating: 'â˜…â˜…â˜…â˜…â˜… 4.9', ratingCount: '(48íšŒ ë¦¬ë“œ)',
    headerGrad: '#111111',
    desc: 'í•œê°•ì„ ë”°ë¼ ì‹œì›í•˜ê²Œ ë¼ì´ë”©í•˜ëŠ” ëª¨ì„ì…ë‹ˆë‹¤! ì´ˆë³´ìë„ í™˜ì˜í•˜ë©° ì•ˆì „í•˜ê²Œ ì¦ê¸¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ë“œë¦½ë‹ˆë‹¤. ìì „ê±° ëŒ€ì—¬ ê°€ëŠ¥í•˜ë©°, ì¤‘ê°„ ì¹´í˜ íœ´ì‹ ìˆìŠµë‹ˆë‹¤. í—¬ë©§ê³¼ ì¥ê°‘ì€ í•„ì°¸ì´ì—ìš” ğŸ˜Š'
  },
  {
    id: 1, cat: 'Mountain', catEmoji: 'â›°ï¸',
    photos: [],
    title: 'ë¶í•œì‚° ë‘˜ë ˆê¸¸ íŠ¸ë ˆí‚¹',
    date: '2026.03.20 (ëª©) 07:30', location: 'ë¶í•œì‚°êµ­ë¦½ê³µì› ì…êµ¬',
    course: 'ë¶í•œì‚°ì„± ì…êµ¬ â†’ ëŒ€ì„±ë¬¸ â†’ ì¹¼ë°”ìœ„ ëŠ¥ì„  (ì•½ 12km)', level: 'ğŸŸ¡ ì¤‘ê¸‰',
    current: 7, max: 10, popJoin: false,
    leader: 'ê¹€ì„œì—°', initial: 'ê¹€', grad: '#166534',
    rating: 'â˜…â˜…â˜…â˜…Â½ 4.7', ratingCount: '(31íšŒ ë¦¬ë“œ)',
    headerGrad: '#166534',
    desc: 'ë¶í•œì‚° ë‘˜ë ˆê¸¸ ì½”ìŠ¤ë¥¼ í•¨ê»˜ ê±·ëŠ” íŠ¸ë ˆí‚¹ì…ë‹ˆë‹¤. ìì—° ì†ì—ì„œ íë§í•˜ë©° ê±´ê°•ì„ ì±™ê²¨ìš”! ë“±ì‚° ìŠ¤í‹±ê³¼ ì ì ˆí•œ ë“±ì‚°í™” ì°©ìš© ê¶Œì¥í•©ë‹ˆë‹¤. í•˜ì‚° í›„ ë’¤í’€ì´ë„ ì˜ˆì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤ ğŸº'
  },
  {
    id: 2, cat: 'Run', catEmoji: 'ğŸƒ',
    photos: [],
    title: 'ì˜¬ë¦¼í”½ê³µì› 5K ëŸ¬ë‹í¬ë£¨',
    date: '2026.03.22 (í† ) 07:00', location: 'ì˜¬ë¦¼í”½ê³µì› 88í˜¸ìˆ˜',
    course: '88í˜¸ìˆ˜ â†’ í‰í™”ì˜ë¬¸ â†’ 88í˜¸ìˆ˜ (5km ìˆœí™˜)', level: 'ğŸŸ¢ ì´ˆê¸‰',
    current: 12, max: 15, popJoin: false,
    leader: 'ì´ì¤€í˜¸', initial: 'ì´', grad: '#374151',
    rating: 'â˜…â˜…â˜…â˜…â˜… 5.0', ratingCount: '(67íšŒ ë¦¬ë“œ)',
    headerGrad: '#374151',
    desc: '5km ê°€ë³ê²Œ ë‹¬ë¦¬ëŠ” ëŸ¬ë‹í¬ë£¨ì…ë‹ˆë‹¤. í˜ì´ìŠ¤ëŠ” 6~7ë¶„/kmë¡œ ì²œì²œíˆ ì¦ê¸°ë©° ë‹¬ë ¤ìš”! ëŸ¬ë‹ í›„ ìŠ¤íŠ¸ë ˆì¹­ ë° ì•„ì¹¨ ì‹ì‚¬ í•¨ê»˜ í•©ë‹ˆë‹¤. ì´ˆë³´ìë„ ì™„ì£¼ ê°€ëŠ¥í•œ ì½”ìŠ¤ì˜ˆìš” ğŸ…'
  },
  {
    id: 3, cat: 'Mountain', catEmoji: 'â›°ï¸',
    photos: [],
    title: 'ë„ë´‰ì‚° ë‹¨í’ íŠ¸ë ˆí‚¹',
    date: '2026.03.16 (ì¼) 08:00', location: 'ë„ë´‰ì‚°ì—­ 1ë²ˆ ì¶œêµ¬',
    course: 'ë„ë´‰ì‚°ì—­ â†’ ë„ë´‰ì‚°ì¥ â†’ ë§ˆë‹¹ë°”ìœ„ (ì™•ë³µ ì•½ 8km)', level: 'ğŸŸ¡ ì¤‘ê¸‰',
    current: 3, max: 5, popJoin: true,
    leader: 'ìµœë‹¤í˜„', initial: 'ìµœ', grad: '#6366f1',
    rating: 'â˜…â˜…â˜…â˜…Â½ 4.8', ratingCount: '(31íšŒ ë¦¬ë“œ)',
    headerGrad: '#1F1F1F',
    desc: 'ë„ë´‰ì‚°ì˜ ì•„ë¦„ë‹¤ìš´ ê²½ì¹˜ë¥¼ ì¦ê¸°ëŠ” íŠ¸ë ˆí‚¹ì…ë‹ˆë‹¤. ì¤‘ê¸‰ ì½”ìŠ¤ì´ì§€ë§Œ ê°€ì´ë“œê°€ í•¨ê»˜í•˜ë‹ˆ ê±±ì • ë§ˆì„¸ìš”! ì¦‰ì‹œ ì°¸ì—¬ ê°€ëŠ¥í•œ í™œë™ì…ë‹ˆë‹¤.'
  },
  {
    id: 4, cat: 'Golf', catEmoji: 'â›³',
    photos: [],
    title: 'ë² ì–´ì¦ˆë² ìŠ¤íŠ¸ ì²­ë¼ ì£¼ë§ ë¼ìš´ë”©',
    date: '2026.03.22 (í† ) 07:00', location: 'ì¸ì²œ ì²­ë¼ ë² ì–´ì¦ˆë² ìŠ¤íŠ¸ GC',
    course: '18í™€ Par 72 Â· ì­ ë‹ˆí´ë¼ìš°ìŠ¤ ë””ìì¸', level: 'ğŸŸ¡ ì¤‘ê¸‰',
    current: 3, max: 4, popJoin: false,
    leader: 'ì •í˜„ìš°', initial: 'ì •', grad: '#166534',
    rating: 'â˜…â˜…â˜…â˜…â˜… 5.0', ratingCount: '(67íšŒ ë¦¬ë“œ)',
    headerGrad: '#166534',
    desc: 'ì„¸ê³„ ëª…ë¬¸ ì½”ìŠ¤ë¥¼ ì¬í˜„í•œ ë² ì–´ì¦ˆë² ìŠ¤íŠ¸ ì²­ë¼ì—ì„œ í•¨ê»˜ ë¼ìš´ë”©í•´ìš”! 4ì¸ íŒ€ í•œ ìë¦¬ ë‚¨ì•˜ìŠµë‹ˆë‹¤. ì¤‘ê¸‰ ì´ìƒ ê¶Œì¥ ğŸŒï¸'
  }
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CHAT DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CHAT_HISTORY = {
  'ë°•ë¯¼ì¤€': [
    { mine: false, text: 'ì•ˆë…•í•˜ì„¸ìš”! í•œê°• ë¼ì´ë”© ì‹ ì²­ í™•ì¸í–ˆìŠµë‹ˆë‹¤ ğŸ˜Š', time: 'ì˜¤ì „ 9:20' },
    { mine: false, text: 'ì´ë²ˆ ì£¼ í† ìš”ì¼ ì˜¤ì „ 8ì‹œì— ì—¬ì˜ë„ í•œê°•ê³µì› ìì „ê±° ëŒ€ì—¬ì†Œ ì•ì—ì„œ ë§Œë‚˜ìš”!', time: 'ì˜¤ì „ 9:21' },
    { mine: true,  text: 'ë„¤! í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê¼­ ì°¸ì„í• ê²Œìš” ğŸš´', time: 'ì˜¤ì „ 9:35' },
    { mine: false, text: 'í—¬ë©§ì´ë‘ ì¥ê°‘ì€ ê¼­ ì±™ê²¨ì˜¤ì„¸ìš”. ì—†ìœ¼ì‹œë©´ í˜„ì¥ ëŒ€ì—¬ë„ ê°€ëŠ¥í•´ìš” ğŸ˜„', time: 'ì˜¤ì „ 9:36' },
  ],
  'ê¹€ì„œì—°': [
    { mine: false, text: 'ë¶í•œì‚° íŠ¸ë ˆí‚¹ ì¤€ë¹„ë¬¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤ ğŸ’', time: 'ì˜¤ì „ 8:00' },
    { mine: false, text: 'ë“±ì‚°í™”, ë“±ì‚° ìŠ¤í‹±, ë¬¼ 2L ì´ìƒ, ê°„ì‹ í•„ì°¸!', time: 'ì˜¤ì „ 8:01' },
    { mine: true,  text: 'ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ ì¤€ë¹„í•´ì„œ ê°€ê² ìŠµë‹ˆë‹¤', time: 'ì˜¤ì „ 8:30' },
  ],
  'ì •í˜„ìš°': [
    { mine: true,  text: 'ê°€í‰ íˆ¬ì–´ ì •ë§ ì¬ë¯¸ìˆì—ˆì–´ìš”!', time: 'ì–´ì œ ì˜¤í›„ 6:00' },
    { mine: false, text: 'ê°€í‰ íˆ¬ì–´ ì˜ ë‹¤ë…€ì™”ìŠµë‹ˆë‹¤! ë‹¤ìŒì— ë˜ ë´¬ìš” ğŸ›£ï¸', time: 'ì–´ì œ ì˜¤í›„ 6:15' },
  ],
  'ì´ì¤€í˜¸': [
    { mine: false, text: '5K ëŸ¬ë‹ ê°™ì´ ë‹¬ë ¸ë˜ ë¶„ë“¤ ë‹¨ì²´ ì±„íŒ…ë°© ë§Œë“¤ì—ˆì–´ìš”!', time: '2ì¼ ì „' },
    { mine: true,  text: 'ì˜¤ ì´ˆëŒ€í•´ì£¼ì„¸ìš”!', time: '2ì¼ ì „' },
    { mine: false, text: 'ì´ˆëŒ€í–ˆìŠµë‹ˆë‹¤! í™•ì¸í•´ë³´ì„¸ìš” ğŸ˜„', time: '2ì¼ ì „' },
  ],
  'ìµœë‹¤í˜„': [
    { mine: false, text: 'ë‹¤ìŒ ë„ë´‰ì‚° íŠ¸ë ˆí‚¹ë„ ê¸°ëŒ€í•´ì£¼ì„¸ìš”! â›°ï¸', time: '3ì¼ ì „' },
    { mine: true,  text: 'ë„¤, ê¼­ ì‹ ì²­í• ê²Œìš”!', time: '3ì¼ ì „' },
  ]
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NAVIGATION (Fix: history stack for back)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let screenHistory = ['home'];

function goScreen(name) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  const next = document.getElementById('screen-' + name);
  if (!next) return;
  next.classList.add('active');
  // scroll to top
  const content = next.querySelector('.content');
  if (content) content.scrollTop = 0;
  // push to history (avoid duplicates)
  if (screenHistory[screenHistory.length - 1] !== name) {
    screenHistory.push(name);
    if (screenHistory.length > 10) screenHistory.shift();
  }
}

function goBack() {
  if (screenHistory.length > 1) {
    screenHistory.pop(); // remove current
    const prev = screenHistory[screenHistory.length - 1];
    // navigate without pushing to history again
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    const prevEl = document.getElementById('screen-' + prev);
    if (prevEl) {
      prevEl.classList.add('active');
      const content = prevEl.querySelector('.content');
      if (content) content.scrollTop = 0;
    }
  } else {
    goScreen('home');
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CATEGORY â†’ SEARCH (Fix: ì—°ë™)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function goCategory(catName) {
  document.querySelectorAll('#filter-chips .cat-chip').forEach(c => {
    c.classList.toggle('active', c.dataset.cat === catName);
  });
  renderSearchResults();
  goScreen('search');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SEARCH FILTER (Fix: ë³µìˆ˜ ì„ íƒ)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleCatChip(el) {
  if (el.dataset.cat === 'Golf') {
    goScreen('golf');
    loadGolfCourses('ì „ì²´');
    return;
  }
  if (el.dataset.cat === 'ì „ì²´') {
    document.querySelectorAll('#filter-chips .cat-chip').forEach(c => c.classList.remove('active'));
    el.classList.add('active');
  } else {
    document.querySelector('.cat-chip[data-cat="ì „ì²´"]').classList.remove('active');
    el.classList.toggle('active');
    const anyActive = document.querySelectorAll('.cat-chip:not([data-cat="ì „ì²´"]).active').length > 0;
    if (!anyActive) document.querySelector('.cat-chip[data-cat="ì „ì²´"]').classList.add('active');
  }
  renderSearchResults();
}

function toggleOptChip(el) {
  el.classList.toggle('active'); // ë³µìˆ˜ ì„ íƒ í—ˆìš©
  renderSearchResults();
}

function renderSearchResults() {
  const keyword = (document.getElementById('search-input')?.value || '').trim().toLowerCase();
  const allActive = document.querySelector('.cat-chip[data-cat="ì „ì²´"]')?.classList.contains('active');
  const activeCats = allActive ? null : Array.from(document.querySelectorAll('.cat-chip:not([data-cat="ì „ì²´"]).active')).map(c => c.dataset.cat);
  const popJoinOnly = document.querySelector('.opt-chip[data-opt="ì¦‰ì‹œì°¸ì—¬"]')?.classList.contains('active');
  const beginnerOnly = document.querySelector('.opt-chip[data-opt="ì´ˆê¸‰"]')?.classList.contains('active');

  const results = ACTIVITIES.filter(a => {
    if (activeCats && !activeCats.includes(a.cat)) return false;
    if (popJoinOnly && !a.popJoin) return false;
    if (beginnerOnly && !a.level.includes('ì´ˆê¸‰')) return false;
    if (keyword && !a.title.toLowerCase().includes(keyword) &&
        !a.location.toLowerCase().includes(keyword) &&
        !a.leader.toLowerCase().includes(keyword)) return false;
    return true;
  });

  const countEl = document.getElementById('search-count');
  if (countEl) countEl.textContent = `ì´ ${results.length}ê°œì˜ í™œë™ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤`;

  const list = document.getElementById('search-results-list');
  if (!list) return;
  list.innerHTML = '';
  results.forEach(a => list.appendChild(buildCard(a, true)));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SVG ICON HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const IC = {
  cal: `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>`,
  pin: `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>`,
  ppl: `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg>`,
  rte: `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="6" cy="19" r="3"/><circle cx="18" cy="5" r="3"/><path d="M12 19h4.5a3.5 3.5 0 000-7h-8a3.5 3.5 0 010-7H12"/></svg>`,
  map: `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></svg>`,
  img: `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>`,
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CARD BUILDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildCard(a, showLevel) {
  const lvlDot = a.level.includes('ì´ˆê¸‰') ? '#16a34a' : a.level.includes('ì¤‘ê¸‰') ? '#f59e0b' : '#ef4444';
  const lvlTxt = a.level.replace(/[ğŸŸ¢ğŸŸ¡ğŸ”´]\s*/g,'');
  const div = document.createElement('div');
  div.className = 'activity-card';
  div.onclick = () => openDetail(a.id);
  div.innerHTML = `
    <div class="activity-card-header" style="background:${a.headerGrad}">
      <span class="activity-cat-badge">${a.cat}</span>
      <span class="activity-level">${a.popJoin ? 'ì¦‰ì‹œì°¸ì—¬' : `<span style="display:inline-block;width:6px;height:6px;border-radius:50%;background:${lvlDot};margin-right:4px;vertical-align:middle"></span>${lvlTxt}`}</span>
    </div>
    <div class="activity-card-body">
      <div class="activity-title">${a.title.replace(/[ğŸŒŠğŸŒ¿ğŸ…ğŸğŸŒï¸â›³ğŸš´â›°ï¸ğŸƒ]\s*/g,'').trim()}</div>
      <div class="activity-meta">
        <div class="meta-item">${IC.cal} ${a.date}</div>
        <div class="meta-item">${IC.pin} ${a.location}</div>
        <div class="meta-item">${IC.ppl} ${a.current}/${a.max}ëª…</div>
      </div>
    </div>
    <div class="activity-card-footer">
      <div class="leader-info">
        <div class="leader-avatar" style="background:${a.grad}">${a.initial}</div>
        <div>
          <div class="leader-name">${a.leader} ë¦¬ë”</div>
          <div class="stars">${a.rating}</div>
        </div>
      </div>
      <button class="join-btn"
        onclick="event.stopPropagation();openDetail(${a.id})">
        ${a.popJoin ? 'ì¦‰ì‹œì°¸ì—¬' : 'ì°¸ê°€ ì‹ ì²­'}
      </button>
    </div>
  `;
  return div;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ACTIVITY DETAIL (New Screen)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openDetail(id) {
  const a = ACTIVITIES[id];
  if (!a) return;

  document.getElementById('detail-cat-label').textContent = a.cat;
  document.getElementById('detail-slots').textContent = `${a.max - a.current}ëª…`;

  const pColors = ['#111111','#166534','#1F1F1F','#374151','#6366f1','#8b5cf6','#f59e0b','#ef4444'];
  const pNames  = ['ì´','ìµœ','ì •','ê°•','ìœ¤','í•œ','ì˜¤','ë¬¸'];
  const participantsHtml = pNames.slice(0, a.current).map((n, i) =>
    `<div class="participant-avatar" style="background:${pColors[i % pColors.length]}">${n}</div>`
  ).join('') + (a.max - a.current > 0
    ? `<div class="participant-avatar" style="background:var(--bg);color:var(--text3);border:1.5px dashed var(--border);font-size:11px">+${a.max - a.current}</div>`
    : '');

  const lvlDot = a.level.includes('ì´ˆê¸‰') ? '#16a34a' : a.level.includes('ì¤‘ê¸‰') ? '#f59e0b' : '#ef4444';
  const lvlTxt = a.level.replace(/[ğŸŸ¢ğŸŸ¡ğŸ”´]\s*/g,'');
  const cleanTitle = a.title.replace(/[ğŸŒŠğŸŒ¿ğŸ…ğŸğŸŒï¸â›³ğŸš´â›°ï¸ğŸƒ]\s*/g,'').trim();

  document.getElementById('detail-content').innerHTML = `
    <div class="detail-map">
      <div class="detail-map-icon" style="opacity:0.4">${IC.map}</div>
      <div style="font-size:12px;margin-top:4px">${a.location}</div>
      <div style="font-size:11px;opacity:0.5;margin-top:3px">ì§€ë„ ì—°ë™ ì˜ˆì •</div>
    </div>
    <div class="detail-body">
      <div style="display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px">
        <span style="background:${a.headerGrad};color:white;border-radius:6px;padding:3px 10px;font-size:11px;font-weight:700;letter-spacing:0.5px">${a.cat}</span>
        <span style="background:var(--bg);color:var(--text2);border-radius:6px;padding:3px 10px;font-size:11px;font-weight:600;border:1px solid var(--border);display:inline-flex;align-items:center;gap:4px"><span style="width:6px;height:6px;border-radius:50%;background:${lvlDot};display:inline-block"></span>${lvlTxt}</span>
        ${a.popJoin ? '<span style="background:#fff7ed;color:#c2410c;border-radius:6px;padding:3px 10px;font-size:11px;font-weight:600">ì¦‰ì‹œì°¸ì—¬</span>' : ''}
      </div>
      <div class="detail-title">${cleanTitle}</div>
      <div class="detail-info-row"><div class="detail-info-icon">${IC.cal}</div><div>${a.date}</div></div>
      <div class="detail-info-row"><div class="detail-info-icon">${IC.pin}</div><div>${a.location}</div></div>
      <div class="detail-info-row"><div class="detail-info-icon">${IC.rte}</div><div>${a.course}</div></div>
      <div class="detail-info-row"><div class="detail-info-icon">${IC.ppl}</div><div>${a.current}ëª… ì°¸ê°€ ì¤‘ / ìµœëŒ€ ${a.max}ëª…</div></div>
      <div class="detail-section">
        <div class="detail-section-title">ë¦¬ë” ì •ë³´</div>
        <div class="detail-leader-card">
          <div class="detail-avatar-lg" style="background:${a.grad}">${a.initial}</div>
          <div class="detail-leader-info">
            <div class="detail-leader-name">${a.leader} ë¦¬ë”</div>
            <div class="detail-stars">${a.rating}</div>
            <div class="detail-leader-stats">${a.ratingCount} Â· ì¸ì¦ ë¦¬ë”</div>
          </div>
          <button style="background:var(--bg);color:var(--text1);border:1.5px solid var(--border);border-radius:8px;padding:6px 14px;font-size:12px;font-weight:600;cursor:pointer"
            onclick="openChat('${a.leader}','${a.initial}','${a.grad}')">DM</button>
        </div>
      </div>
      <div class="detail-section">
        <div class="detail-section-title">ì°¸ê°€ì (${a.current}/${a.max})</div>
        <div class="participants-row">${participantsHtml}</div>
      </div>
      <div class="detail-section">
        <div class="detail-section-title">í™œë™ ì†Œê°œ</div>
        <div class="detail-desc">${a.desc}</div>
      </div>
    </div>
    <div class="photo-section">
      <div class="detail-section-title" style="margin-bottom:10px">í™œë™ ì‚¬ì§„</div>
      <div class="photo-grid" id="photo-grid-${a.id}">${renderPhotoGrid(a.id)}</div>
      <label class="photo-add-btn" for="photo-input-${a.id}">
        ${IC.img} ì‚¬ì§„ ì¶”ê°€í•˜ê¸°
        <input type="file" id="photo-input-${a.id}" accept="image/*" multiple style="display:none"
          onchange="uploadPhoto(${a.id}, this)">
      </label>
    </div>
    <div style="height:20px"></div>
  `;

  goScreen('detail');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CHAT (New Screen)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openChat(name, initial, grad) {
  document.getElementById('chat-name').textContent = name + ' ë¦¬ë”';
  const msgs = CHAT_HISTORY[name] || [];
  const container = document.getElementById('chat-messages');
  container.innerHTML = msgs.map(m => `
    <div class="msg-row ${m.mine ? 'mine' : ''}">
      ${!m.mine ? `<div class="msg-avatar" style="background:${grad}">${initial}</div>` : ''}
      <div>
        <div class="msg-time" style="text-align:${m.mine ? 'right' : 'left'}">${m.time}</div>
        <div class="msg-bubble">${m.text}</div>
      </div>
    </div>
  `).join('');
  setTimeout(() => { container.scrollTop = container.scrollHeight; }, 50);
  goScreen('chat');
}

function sendMessage() {
  const input = document.getElementById('chat-input');
  const text = input.value.trim();
  if (!text) return;
  const container = document.getElementById('chat-messages');
  const now = new Date();
  const t = `${now.getHours()}:${String(now.getMinutes()).padStart(2,'0')}`;
  const div = document.createElement('div');
  div.className = 'msg-row mine';
  div.innerHTML = `<div><div class="msg-time" style="text-align:right">${t}</div><div class="msg-bubble">${text}</div></div>`;
  container.appendChild(div);
  container.scrollTop = container.scrollHeight;
  input.value = '';
  // auto reply
  setTimeout(() => {
    const name = document.getElementById('chat-name').textContent;
    const reply = document.createElement('div');
    reply.className = 'msg-row';
    reply.innerHTML = `<div class="msg-avatar" style="background:var(--primary)">${name[0]}</div><div><div class="msg-time">${t}</div><div class="msg-bubble">í™•ì¸í–ˆìŠµë‹ˆë‹¤! ğŸ˜Š</div></div>`;
    container.appendChild(reply);
    container.scrollTop = container.scrollHeight;
  }, 800);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CREATE ACTIVITY (Fix: í™ˆ ë°˜ì˜)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function submitCreate() {
  const title = document.getElementById('new-title').value.trim();
  if (!title) { showToast('â— í™œë™ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”'); return; }

  const cat = document.querySelector('#cat-radio .radio-btn.active')?.textContent.trim() || 'Cycle';
  const level = document.querySelector('#level-radio .radio-btn.active')?.textContent.trim() || 'ì´ˆê¸‰';
  const dateVal = document.getElementById('new-date').value;
  const region  = document.getElementById('new-region');
  const regionText = region.options[region.selectedIndex].text;
  const course  = document.getElementById('new-course').value || 'ì½”ìŠ¤ ë¯¸ì •';
  const desc    = document.getElementById('new-desc').value || 'í™œë™ ì†Œê°œê°€ ì—†ìŠµë‹ˆë‹¤.';

  const newA = {
    id: ACTIVITIES.length, cat, title,
    date: `${dateVal.replace(/-/g,'.')} 09:00`,
    location: regionText, course, level,
    current: 1, max: 10, popJoin: false,
    leader: 'í™ê¸¸ë™', initial: 'í™',
    grad: '#111111',
    rating: 'â˜…â˜…â˜…â˜…â˜… -', ratingCount: '(ì‹ ê·œ ë¦¬ë”)',
    headerGrad: '#111111',
    desc
  };
  ACTIVITIES.push(newA);

  // í¼ ì´ˆê¸°í™”
  document.getElementById('new-title').value = '';
  document.getElementById('new-course').value = '';
  document.getElementById('new-desc').value = '';

  showToast('âœ… í™œë™ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');

  setTimeout(() => {
    goScreen('home');
    renderHomeActivities();
  }, 1000);
}

function selectRadio(el, groupId) {
  document.querySelectorAll('#' + groupId + ' .radio-btn').forEach(r => r.classList.remove('active'));
  el.classList.add('active');
  if (groupId === 'cat-radio') showStravaBtn();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HOME ACTIVITY LIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderHomeActivities() {
  const list = document.getElementById('home-activity-list');
  if (!list) return;
  list.innerHTML = '';
  ACTIVITIES.forEach(a => list.appendChild(buildCard(a, false)));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TOAST (Fix: ì¤‘ë³µ timer ë°©ì§€)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let toastTimer;
function showToast(msg) {
  clearTimeout(toastTimer);
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.style.display = 'block';
  t.style.opacity = '1';
  toastTimer = setTimeout(() => { t.style.opacity = '0'; setTimeout(() => { t.style.display = 'none'; }, 300); }, 2500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  REAL-TIME CLOCK (Fix: ì‹¤ì‹œê°„ ì‹œê°)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateClock() {
  const now = new Date();
  const h = now.getHours();
  const m = String(now.getMinutes()).padStart(2, '0');
  const timeStr = `${h}:${m}`;
  document.querySelectorAll('[id^="clock-"]').forEach(el => el.textContent = timeStr);
}
updateClock();
setInterval(updateClock, 10000);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  GOLF â€” ë°ì´í„° & API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// í•œêµ­ ì§€ì—­ë³„ Bounding Box (ìœ„ë„min, ê²½ë„min, ìœ„ë„max, ê²½ë„max)
const REGION_BBOX = {
  'ì „ì²´':  '33.0,124.0,38.6,132.0',
  'ì„œìš¸':  '37.42,126.73,37.70,127.18',
  'ê²½ê¸°':  '36.90,126.40,38.05,127.90',
  'ì¸ì²œ':  '37.22,126.34,37.79,126.97',
  'ê°•ì›':  '37.00,127.50,38.60,129.40',
  'ì¶©ì²­':  '36.00,126.60,37.20,128.00',
  'ê²½ìƒ':  '34.50,127.80,36.70,129.60',
  'ì „ë¼':  '34.30,126.10,36.00,127.90',
  'ì œì£¼':  '33.10,126.10,33.60,126.95',
};

// ë¡œì»¬ í´ë°± ë°ì´í„° (Overpass API ì‹¤íŒ¨ ì‹œ ì‚¬ìš©)
const GOLF_FALLBACK = [
  { id:'f1', name:'ë² ì–´ì¦ˆë² ìŠ¤íŠ¸ ì²­ë¼ GC', location:'ì¸ì²œê´‘ì—­ì‹œ ì„œêµ¬ ì²­ë¼ë™', region:'ì¸ì²œ', holes:18, par:72, price_wd:200000, price_we:280000, rating:4.9, reviews:567, color:'#1b5e20', desc:'ì­ ë‹ˆí´ë¼ìš°ìŠ¤ ë””ìì¸ì˜ ëª…í’ˆ 18í™€ ì½”ìŠ¤. ì„¸ê³„ ìœ ëª… ì½”ìŠ¤ë¥¼ ì¬í˜„í–ˆìŠµë‹ˆë‹¤.', facilities:['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ','ì—°ìŠµì¥'], source:'local' },
  { id:'f2', name:'ë ˆì´í¬ìš°ë“œ ì»¨íŠ¸ë¦¬í´ëŸ½', location:'ê²½ê¸°ë„ ìš©ì¸ì‹œ ì²˜ì¸êµ¬', region:'ê²½ê¸°', holes:27, par:108, price_wd:160000, price_we:240000, rating:4.8, reviews:324, color:'#2e7d32', desc:'ê²½ê¸° ìš©ì¸ì˜ 27í™€ ëŒ€í˜• ê³¨í”„í´ëŸ½. ë„“ì€ í˜ì–´ì›¨ì´ì™€ ì•„ë¦„ë‹¤ìš´ ê²½ê´€ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.', facilities:['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ','ì—°ìŠµì¥','ìˆ™ë°•'], source:'local' },
  { id:'f3', name:'ë‚¨ì„œìš¸ ì»¨íŠ¸ë¦¬í´ëŸ½', location:'ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ìˆ˜ì •êµ¬', region:'ê²½ê¸°', holes:18, par:72, price_wd:150000, price_we:220000, rating:4.6, reviews:182, color:'#388e3c', desc:'ì„œìš¸ ê·¼êµ ì ‘ê·¼ì„±ì´ ì¢‹ì€ 18í™€ ì •ê·œ ì½”ìŠ¤ì…ë‹ˆë‹¤.', facilities:['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ'], source:'local' },
  { id:'f4', name:'íŒŒì¸ë°¸ë¦¬ ê³¨í”„ ë¦¬ì¡°íŠ¸', location:'ê²½ê¸°ë„ ì´ì²œì‹œ ë§ˆì¥ë©´', region:'ê²½ê¸°', holes:18, par:72, price_wd:190000, price_we:260000, rating:4.9, reviews:411, color:'#1b5e20', desc:'í”„ë¦¬ë¯¸ì—„ ë¦¬ì¡°íŠ¸ ê³¨í”„í´ëŸ½. ìŠ¤íŒŒÂ·ìˆ™ë°• ì‹œì„¤ì„ í•¨ê»˜ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', facilities:['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ','ì—°ìŠµì¥','ìŠ¤íŒŒ','ìˆ™ë°•'], source:'local' },
  { id:'f5', name:'ì œì£¼ ì¤‘ë¬¸ GC', location:'ì œì£¼íŠ¹ë³„ìì¹˜ë„ ì„œê·€í¬ì‹œ ì¤‘ë¬¸ë™', region:'ì œì£¼', holes:27, par:108, price_wd:170000, price_we:230000, rating:4.7, reviews:253, color:'#00695c', desc:'ì œì£¼ ì¤‘ë¬¸ ê´€ê´‘ë‹¨ì§€ ë‚´ ìœ„ì¹˜í•œ 27í™€ ê³¨í”„í´ëŸ½. ë°”ë‹¤ ì „ë§ì´ ì¼í’ˆì…ë‹ˆë‹¤.', facilities:['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ','ì—°ìŠµì¥','ìˆ™ë°•'], source:'local' },
  { id:'f6', name:'ìŠ¤ì¹´ì´72 ê³¨í”„í´ëŸ½', location:'ì¸ì²œê´‘ì—­ì‹œ ì¤‘êµ¬ ì„ì™•ë™', region:'ì¸ì²œ', holes:72, par:288, price_wd:140000, price_we:200000, rating:4.5, reviews:895, color:'#0277bd', desc:'êµ­ë‚´ ìµœëŒ€ 72í™€ ê·œëª¨. ì˜¤ì…˜Â·ë ˆì´í¬Â·í´ë˜ì‹Â·ë“œë¦¼ì½”ìŠ¤ 4ê°œ ì½”ìŠ¤ ë³´ìœ .', facilities:['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ','ì—°ìŠµì¥'], source:'local' },
  { id:'f7', name:'ì—˜ë¦¬ì‹œì•ˆ ê°•ì´Œ CC', location:'ê°•ì›ë„ ì¶˜ì²œì‹œ ë‚¨ì‚°ë©´', region:'ê°•ì›', holes:18, par:72, price_wd:130000, price_we:190000, rating:4.4, reviews:198, color:'#37474f', desc:'ê°•ì´Œ ìì—° ì† 18í™€ ì½”ìŠ¤. ìŠ¤í‚¤ì¥ê³¼ í•¨ê»˜ ì‚¬ê³„ì ˆ ë¦¬ì¡°íŠ¸ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.', facilities:['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ','ìŠ¤í‚¤ì¥'], source:'local' },
  { id:'f8', name:'ë¶€ì‚° ì•„ì‹œì•„ë“œ CC', location:'ë¶€ì‚°ê´‘ì—­ì‹œ ì—°ì œêµ¬ ê±°ì œë™', region:'ê²½ìƒ', holes:18, par:72, price_wd:130000, price_we:190000, rating:4.4, reviews:145, color:'#1565c0', desc:'ë¶€ì‚° ë„ì‹¬ì—ì„œ ê°€ê¹Œìš´ 18í™€ ì½”ìŠ¤. ë„ì‹¬ ì ‘ê·¼ì„±ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.', facilities:['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ','ì—°ìŠµì¥'], source:'local' },
];

let golfCoursesData = [];       // ë¡œë“œëœ ì „ì²´ ì½”ìŠ¤ ëª©ë¡
let selectedGolfCourse = null;  // í˜„ì¬ ì„ íƒëœ ì½”ìŠ¤
let selectedTeeDate   = null;   // ì„ íƒëœ ë‚ ì§œ
let selectedTeeTime   = null;   // ì„ íƒëœ í‹°íƒ€ì„
let playerCount       = 4;      // í”Œë ˆì´ì–´ ìˆ˜

// â”€â”€ Overpass APIë¡œ ì‹¤ì œ í•œêµ­ ê³¨í”„ì¥ ì¡°íšŒ â”€â”€
async function fetchGolfCoursesFromAPI(region) {
  const bbox = REGION_BBOX[region] || REGION_BBOX['ì „ì²´'];
  const query = `[out:json][timeout:20];(way["leisure"="golf_course"](${bbox});relation["leisure"="golf_course"](${bbox}););out center tags;`;
  const res = await fetch('https://overpass-api.de/api/interpreter', {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: 'data=' + encodeURIComponent(query),
  });
  if (!res.ok) throw new Error('Overpass API ì˜¤ë¥˜');
  const json = await res.json();
  return json.elements
    .filter(el => el.tags?.name || el.tags?.['name:ko'])
    .map(el => ({
      id: 'osm_' + el.id,
      name: el.tags?.['name:ko'] || el.tags?.name || 'ê³¨í”„ì¥',
      location: [el.tags?.['addr:full'], el.tags?.['addr:city'], el.tags?.['addr:province']].filter(Boolean).join(' ') || 'ìœ„ì¹˜ ì •ë³´',
      region,
      holes: parseInt(el.tags?.holes) || 18,
      par: parseInt(el.tags?.par) || 72,
      price_wd: Math.floor(Math.random() * 8 + 12) * 10000,
      price_we: Math.floor(Math.random() * 8 + 18) * 10000,
      rating: (Math.random() * 0.8 + 4.1).toFixed(1),
      reviews: Math.floor(Math.random() * 300 + 50),
      color: ['#1b5e20','#2e7d32','#388e3c','#0277bd','#00695c','#37474f'][Math.floor(Math.random()*6)],
      desc: `${el.tags?.['name:ko'] || el.tags?.name || 'ê³¨í”„ì¥'}ì˜ ê³¨í”„ ì½”ìŠ¤ì…ë‹ˆë‹¤.`,
      facilities: ['í´ëŸ½í•˜ìš°ìŠ¤','ë ˆìŠ¤í† ë‘','í”„ë¡œìƒµ'].slice(0, Math.floor(Math.random()*2)+2),
      website: el.tags?.website || null,
      source: 'osm',
    }));
}

// â”€â”€ ê³¨í”„ì¥ ëª©ë¡ ë¡œë“œ (API â†’ fallback) â”€â”€
async function loadGolfCourses(region = 'ì „ì²´') {
  const listEl   = document.getElementById('golf-list');
  const countEl  = document.getElementById('golf-count');
  const statusEl = document.getElementById('golf-api-status');

  listEl.innerHTML = `<div class="golf-loading"><div class="spinner"></div><div>OpenStreetMap API ì¡°íšŒ ì¤‘...</div></div>`;
  countEl.textContent = 'ê³¨í”„ì¥ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';

  try {
    const apiData = await fetchGolfCoursesFromAPI(region);
    // OSM ë°ì´í„° + í´ë°± ë°ì´í„° ë³‘í•© (ì¤‘ë³µ ì´ë¦„ ì œê±°)
    const names = new Set(apiData.map(c => c.name));
    const fallback = GOLF_FALLBACK.filter(c => !names.has(c.name) && (region === 'ì „ì²´' || c.region === region));
    golfCoursesData = [...apiData, ...fallback];
    statusEl.textContent = `API ì—°ë™ ì™„ë£Œ Â· ì‹¤ì‹œê°„ ë°ì´í„°`;
    statusEl.style.color = '#a5d6a7';
  } catch (e) {
    golfCoursesData = region === 'ì „ì²´' ? [...GOLF_FALLBACK] : GOLF_FALLBACK.filter(c => c.region === region);
    statusEl.textContent = 'ë¡œì»¬ ë°ì´í„° ì‚¬ìš© ì¤‘';
    statusEl.style.color = 'rgba(255,255,255,0.6)';
  }
  renderGolfList();
}

function filterGolfCourses() {
  const kw = (document.getElementById('golf-search-input')?.value || '').trim().toLowerCase();
  const active = document.querySelector('#golf-region-chips .chip.active')?.dataset.region || 'ì „ì²´';
  let filtered = golfCoursesData.filter(c => {
    if (active !== 'ì „ì²´' && c.region !== active) return false;
    if (kw && !c.name.toLowerCase().includes(kw) && !c.location.toLowerCase().includes(kw)) return false;
    return true;
  });
  renderGolfList(filtered);
}

function selectGolfRegion(el) {
  document.querySelectorAll('#golf-region-chips .chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  const region = el.dataset.region;
  // ì§€ì—­ ë³€ê²½ ì‹œ API ì¬ì¡°íšŒ
  loadGolfCourses(region);
}

function renderGolfList(list) {
  const data = list !== undefined ? list : golfCoursesData;
  const listEl  = document.getElementById('golf-list');
  const countEl = document.getElementById('golf-count');
  if (!listEl) return;
  countEl.textContent = `ì´ ${data.length}ê°œ ê³¨í”„ì¥`;
  listEl.innerHTML = '';
  if (data.length === 0) {
    listEl.innerHTML = '<div style="text-align:center;padding:40px;color:#aaa">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
    return;
  }
  data.forEach(c => {
    const card = document.createElement('div');
    card.className = 'golf-card';
    card.onclick = () => openGolfDetail(c);
    const srcBadge = c.source === 'osm'
      ? `<span class="golf-api-badge">OSM</span>`
      : `<span class="golf-tag">ë¡œì»¬</span>`;
    const price = Number(c.price_wd).toLocaleString();
    card.innerHTML = `
      <div class="golf-card-banner" style="background:${c.color}">
        <div>
          <div class="golf-card-name">${c.name}</div>
          <div class="golf-card-holes">${c.holes}í™€ Par ${c.par}</div>
        </div>
        <div class="golf-card-icon"><svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.65)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="3" x2="12" y2="22"/><path d="M12 3l8 4-8 4V3z"/><ellipse cx="12" cy="22" rx="5" ry="1.5"/></svg></div>
      </div>
      <div class="golf-card-body">
        <div class="golf-card-loc">${IC.pin} ${c.location}</div>
        <div class="golf-card-row">
          <div class="golf-rating">â˜… ${c.rating} <span style="font-size:11px;color:#aaa;font-weight:400">(${c.reviews}ë¦¬ë·°)</span></div>
          <div class="golf-price">í‰ì¼ ${price}ì›~</div>
        </div>
        <div class="golf-tags" style="margin-top:8px">
          ${srcBadge}
          ${(c.facilities||[]).slice(0,3).map(f=>`<span class="golf-tag">${f}</span>`).join('')}
        </div>
      </div>`;
    listEl.appendChild(card);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  GOLF DETAIL â€” í‹°íƒ€ì„ ì„ íƒ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openGolfDetail(course) {
  selectedGolfCourse = course;
  selectedTeeDate = null;
  selectedTeeTime = null;
  document.getElementById('golf-selected-time').textContent = 'ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”';
  document.getElementById('golf-detail-title').textContent = course.name;

  // ë‚ ì§œ ë²„íŠ¼ ìƒì„± (ì˜¤ëŠ˜ í¬í•¨ 7ì¼)
  const today = new Date();
  const days  = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];
  let dateBtns = '';
  for (let i = 0; i < 7; i++) {
    const d = new Date(today); d.setDate(today.getDate() + i);
    const month = d.getMonth() + 1;
    const date  = d.getDate();
    const day   = days[d.getDay()];
    const label = i === 0 ? 'ì˜¤ëŠ˜' : i === 1 ? 'ë‚´ì¼' : day;
    const iso   = `${d.getFullYear()}-${String(month).padStart(2,'0')}-${String(date).padStart(2,'0')}`;
    dateBtns += `<div class="date-btn${i===0?' active':''}" data-date="${iso}" data-label="${month}/${date}(${day})" onclick="selectGolfDate(this)">
      <div class="d-day">${label}</div>
      <div class="d-date">${date}</div>
    </div>`;
  }

  // ì²« ë²ˆì§¸ ë‚ ì§œë¡œ ì´ˆê¸°í™”
  const firstDate = new Date(today);
  const firstIso  = `${firstDate.getFullYear()}-${String(firstDate.getMonth()+1).padStart(2,'0')}-${String(firstDate.getDate()).padStart(2,'0')}`;
  selectedTeeDate = firstIso;

  const teeGrid = buildTeeGrid(firstIso);
  const priceWd = Number(course.price_wd||0).toLocaleString();
  const priceWe = Number(course.price_we||0).toLocaleString();

  document.getElementById('golf-detail-content').innerHTML = `
    <div class="golf-detail-banner" style="background:${course.color}">
      <div class="golf-detail-name">${course.name}</div>
      <div class="golf-detail-sub">${IC.pin} ${course.location}</div>
      <div style="display:flex;gap:6px;margin-top:10px;flex-wrap:wrap">
        <span style="background:rgba(255,255,255,0.2);color:white;border-radius:10px;padding:3px 10px;font-size:11px">${course.holes}í™€ Par ${course.par}</span>
        <span style="background:rgba(255,255,255,0.2);color:white;border-radius:10px;padding:3px 10px;font-size:11px">â˜… ${course.rating}</span>
        ${course.source==='osm'?'<span style="background:rgba(255,255,255,0.2);color:white;border-radius:10px;padding:3px 10px;font-size:11px">OSM ì‹¤ì‹œê°„</span>':''}
      </div>
    </div>
    <div class="golf-detail-stats">
      <div class="golf-stat"><div class="golf-stat-num">${course.holes}í™€</div><div class="golf-stat-lbl">ì½”ìŠ¤</div></div>
      <div class="golf-stat"><div class="golf-stat-num">Par ${course.par}</div><div class="golf-stat-lbl">íŒŒ</div></div>
      <div class="golf-stat"><div class="golf-stat-num">${priceWd}~</div><div class="golf-stat-lbl">í‰ì¼(ì›)</div></div>
      <div class="golf-stat"><div class="golf-stat-num">${priceWe}~</div><div class="golf-stat-lbl">ì£¼ë§(ì›)</div></div>
    </div>
    <div class="tee-section-title">ë‚ ì§œ ì„ íƒ</div>
    <div class="date-picker-row" id="date-picker-row">${dateBtns}</div>
    <div class="tee-section-title">â° í‹°íƒ€ì„ ì„ íƒ</div>
    <div class="tee-grid" id="tee-grid">${teeGrid}</div>
    <div style="padding:0 16px 16px">
      <div class="detail-section-title" style="margin-bottom:10px">ì‹œì„¤ ì •ë³´</div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        ${(course.facilities||[]).map(f=>`<span class="golf-tag">âœ“ ${f}</span>`).join('')}
      </div>
      <div style="font-size:13px;color:#666;margin-top:14px;line-height:1.7;background:#f8f8f8;border-radius:10px;padding:14px">${course.desc}</div>
    </div>
    <div style="height:20px"></div>
  `;
  goScreen('golf-detail');
}

function buildTeeGrid(dateIso) {
  // ë‚ ì§œì— ë”°ë¼ ì‹œê°„ëŒ€ë³„ ì”ì—¬ ì—¬ë¶€ ì‹œë®¬ë ˆì´ì…˜
  const seed = dateIso ? parseInt(dateIso.replace(/-/g,'')) : 0;
  const times = ['06:00','06:10','06:20','06:30','07:00','07:10','07:20','07:30',
                  '08:00','08:10','08:30','09:00','09:30','10:00','11:00','13:00','14:00','15:00'];
  return times.map((t, i) => {
    const isFull = ((seed + i * 7) % 5 === 0);
    const remain = isFull ? 0 : ((seed + i * 3) % 4) + 1;
    return `<div class="tee-btn${isFull?' full':''}" data-time="${t}" ${isFull?'':'onclick="selectTeeTime(this)"'}>
      <div class="tee-time">${t}</div>
      <div class="tee-info">${isFull ? 'ë§ˆê°' : `ì”ì—¬ ${remain}ëª…`}</div>
    </div>`;
  }).join('');
}

function selectGolfDate(el) {
  document.querySelectorAll('.date-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  selectedTeeDate = el.dataset.date;
  selectedTeeTime = null;
  document.getElementById('golf-selected-time').textContent = 'ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”';
  const grid = document.getElementById('tee-grid');
  if (grid) grid.innerHTML = buildTeeGrid(selectedTeeDate);
}

function selectTeeTime(el) {
  document.querySelectorAll('.tee-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  selectedTeeTime = el.dataset.time;
  const label = document.getElementById('date-picker-row')?.querySelector('.date-btn.active')?.dataset.label || selectedTeeDate;
  document.getElementById('golf-selected-time').textContent = `${label} ${selectedTeeTime}`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  GOLF BOOKING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openGolfBooking() {
  if (!selectedTeeTime) { showToast('âš ï¸ í‹°íƒ€ì„ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”'); return; }
  const c = selectedGolfCourse;
  const dateLabel = document.getElementById('date-picker-row')?.querySelector('.date-btn.active')?.dataset.label || selectedTeeDate;
  playerCount = 4;
  document.getElementById('player-count-display').textContent = playerCount;

  document.getElementById('booking-summary-box').innerHTML = `
    <div class="booking-summary-title">ì˜ˆì•½ ì •ë³´ í™•ì¸</div>
    <div class="booking-summary-name">${c.name}</div>
    <div class="booking-summary-info">${dateLabel} ${selectedTeeTime} Â· ${c.holes}í™€ Par ${c.par}</div>
    <div class="booking-summary-info">${IC.pin} ${c.location}</div>
  `;
  updatePriceBreakdown();
  goScreen('golf-booking');
}

function changePlayerCount(delta) {
  playerCount = Math.max(1, Math.min(4, playerCount + delta));
  document.getElementById('player-count-display').textContent = playerCount;
  updatePriceBreakdown();
}

function updatePriceBreakdown() {
  const c = selectedGolfCourse;
  if (!c) return;
  const dateIso = selectedTeeDate || '';
  const d = new Date(dateIso);
  const isWeekend = d.getDay() === 0 || d.getDay() === 6;
  const basePrice = isWeekend ? (c.price_we || 220000) : (c.price_wd || 150000);
  const cartFee   = document.querySelector('#cart-radio .radio-btn.active')?.textContent === 'ë„ë³´' ? 0 : 50000;
  const total     = (basePrice + cartFee) * playerCount;
  document.getElementById('price-breakdown').innerHTML = `
    <div class="price-row"><span>ê·¸ë¦°í”¼ (${isWeekend?'ì£¼ë§':'í‰ì¼'}) Ã— ${playerCount}ëª…</span><span>${(basePrice * playerCount).toLocaleString()}ì›</span></div>
    <div class="price-row"><span>ì¹´íŠ¸/ìºë””ë¹„ Ã— ${playerCount}ëª…</span><span>${(cartFee * playerCount).toLocaleString()}ì›</span></div>
    <div class="price-row total"><span>ì´ ê²°ì œ ê¸ˆì•¡</span><span>${total.toLocaleString()}ì›</span></div>
  `;
}

async function confirmGolfBooking() {
  const name  = document.getElementById('booker-name').value.trim();
  const phone = document.getElementById('booker-phone').value.trim();
  if (!name)  { showToast('â— ì˜ˆì•½ì ì„±í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”'); return; }
  if (!phone) { showToast('â— ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”'); return; }

  const btn = document.querySelector('.booking-btn');
  btn.textContent = 'ì˜ˆì•½ ì²˜ë¦¬ ì¤‘...';
  btn.disabled = true;

  // â”€â”€ ì‹¤ì œ ì˜ˆì•½ API í˜¸ì¶œ êµ¬ì¡° (ì˜ˆì‹œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // try {
  //   const res = await fetch('https://api.golf-reservation.com/bookings', {
  //     method: 'POST',
  //     headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer YOUR_API_KEY' },
  //     body: JSON.stringify({ courseId: selectedGolfCourse.id, date: selectedTeeDate,
  //       time: selectedTeeTime, players: playerCount, name, phone })
  //   });
  //   const data = await res.json();
  //   showConfirm(data.bookingId, name, phone);
  // } catch(e) { showToast('âŒ ì˜ˆì•½ ì˜¤ë¥˜: ' + e.message); }
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  // í”„ë¡œí† íƒ€ì…: ì˜ˆì•½ ì‹œë®¬ë ˆì´ì…˜
  await new Promise(r => setTimeout(r, 900));
  const bookingId = 'GF' + Date.now().toString().slice(-8);
  btn.textContent = 'ì˜ˆì•½ í™•ì •í•˜ê¸°';
  btn.disabled = false;
  showConfirm(bookingId, name, phone);
}

function showConfirm(bookingId, name, phone) {
  const c = selectedGolfCourse;
  const dateLabel = document.getElementById('date-picker-row')?.querySelector('.date-btn.active')?.dataset.label || selectedTeeDate;
  const d = new Date(selectedTeeDate || '');
  const isWeekend = d.getDay() === 0 || d.getDay() === 6;
  const basePrice = isWeekend ? (c.price_we || 220000) : (c.price_wd || 150000);
  const cartFee   = document.querySelector('#cart-radio .radio-btn.active')?.textContent === 'ë„ë³´' ? 0 : 50000;
  const total     = (basePrice + cartFee) * playerCount;
  const cartType  = document.querySelector('#cart-radio .radio-btn.active')?.textContent || 'ì¹´íŠ¸+ìºë””';

  document.getElementById('confirm-booking-id').textContent = bookingId;
  document.getElementById('confirm-detail').innerHTML = `
    <div class="confirm-row"><span class="confirm-label">ê³¨í”„ì¥</span><span class="confirm-value">${c.name}</span></div>
    <div class="confirm-row"><span class="confirm-label">ì¼ì‹œ</span><span class="confirm-value">${dateLabel} ${selectedTeeTime}</span></div>
    <div class="confirm-row"><span class="confirm-label">ì¸ì›</span><span class="confirm-value">${playerCount}ëª…</span></div>
    <div class="confirm-row"><span class="confirm-label">ì¹´íŠ¸/ìºë””</span><span class="confirm-value">${cartType}</span></div>
    <div class="confirm-row"><span class="confirm-label">ì˜ˆì•½ì</span><span class="confirm-value">${name} (${phone})</span></div>
    <div class="confirm-row"><span class="confirm-label">ì´ ê²°ì œ</span><span class="confirm-value" style="color:var(--primary)">${total.toLocaleString()}ì›</span></div>
  `;
  goScreen('golf-confirm');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STRAVA â€” ë°ì´í„° & API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”€â”€ ì‹¤ì œ Strava API í˜¸ì¶œ êµ¬ì¡° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// OAuth2 ì¸ì¦ í›„:
// GET https://www.strava.com/api/v3/segments/explore
//   ?bounds=37.3,126.7,37.7,127.3
//   &activity_type=riding  // or 'running'
//   Authorization: Bearer {access_token}
//
// GET https://www.strava.com/api/v3/routes
//   Authorization: Bearer {access_token}
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const STRAVA_ROUTES = [
  // â”€â”€ Cycle ì½”ìŠ¤ (8ê°œ) â€” í•œêµ­ ì¸ê¸° ë¼ì´ë”© ì½”ìŠ¤ mock â”€â”€
  { id:'sc1', type:'cycle', name:'í•œê°• ìì „ê±°ë„ë¡œ ì „êµ¬ê°„', location:'ì„œìš¸ ì—¬ì˜ë„-ëšì„¬', region:'ì„œìš¸',
    distance:41.2, elevation:45, est_time:'2ì‹œê°„ 10ë¶„', avg_speed:19,
    kudos:1247, athletes:892, segments:8, color:'#111111',
    desc:'ì—¬ì˜ë„ì—ì„œ ëšì„¬ê¹Œì§€ í•œê°• ìì „ê±°ë„ë¡œ í’€ì½”ìŠ¤ì…ë‹ˆë‹¤. í‰íƒ„í•œ ì½”ìŠ¤ë¡œ ì´ˆë³´ìë„ ì¦ê¸¸ ìˆ˜ ìˆìœ¼ë©°, í•œê°•ì˜ ì•„ë¦„ë‹¤ìš´ í’ê²½ì„ ê°ìƒí•˜ë©° ë‹¬ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ê°„ì— í¸ì˜ì‹œì„¤ì´ ì˜ ê°–ì¶°ì ¸ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ì—¬ì˜ë„ êµ¬ê°„', dist:'5.2km', elev:'+3m', kom:'8:42'},
      {name:'ë§ˆí¬ëŒ€êµ-ë™ì‘ëŒ€êµ', dist:'7.8km', elev:'+8m', kom:'14:15'},
      {name:'ë°˜í¬-ì ìˆ˜êµ êµ¬ê°„', dist:'6.3km', elev:'+5m', kom:'11:28'},
      {name:'ì„±ìˆ˜-ëšì„¬ êµ¬ê°„', dist:'5.1km', elev:'+6m', kom:'9:03'},
    ]
  },
  { id:'sc2', type:'cycle', name:'ë‚¨ì‚° ìˆœí™˜ ë¼ì´ë”©', location:'ì„œìš¸ ì¤‘êµ¬ ë‚¨ì‚°', region:'ì„œìš¸',
    distance:15.3, elevation:312, est_time:'1ì‹œê°„ 05ë¶„', avg_speed:14,
    kudos:834, athletes:512, segments:5, color:'#374151',
    desc:'ë‚¨ì‚°ì„ í•œ ë°”í€´ ë„ëŠ” ë„ì‹¬ ë¼ì´ë”© ì½”ìŠ¤ì…ë‹ˆë‹¤. ê²½ì‚¬ê°€ ìˆì–´ ì¤‘ê¸‰ ì´ìƒì—ê²Œ ê¶Œì¥í•©ë‹ˆë‹¤. ì •ìƒì—ì„œ ì„œìš¸ ì‹œë‚´ ì „ê²½ì„ ê°ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ë‚¨ì‚°1í˜¸í„°ë„ ì• í´ë¼ì„', dist:'2.1km', elev:'+180m', kom:'7:30'},
      {name:'ë‚¨ì‚° ì •ìƒ êµ¬ê°„', dist:'1.8km', elev:'+82m', kom:'5:12'},
      {name:'ë‚¨ëŒ€ë¬¸ í•˜ê°• êµ¬ê°„', dist:'3.2km', elev:'-190m', kom:'4:45'},
    ]
  },
  { id:'sc3', type:'cycle', name:'ë¶í•œì‚° ì™¸ê³½ íˆ¬ì–´', location:'ì„œìš¸ ì€í‰-ë„ë´‰', region:'ì„œìš¸',
    distance:28.7, elevation:520, est_time:'1ì‹œê°„ 50ë¶„', avg_speed:15,
    kudos:623, athletes:378, segments:6, color:'#1F1F1F',
    desc:'ë¶í•œì‚° ì™¸ê³½ì„ ë”°ë¼ ë‹¬ë¦¬ëŠ” ì¤‘ê¸‰ ì½”ìŠ¤ì…ë‹ˆë‹¤. ìì—° ê²½ê´€ì´ ì•„ë¦„ë‹¤ìš°ë©°, ì—¬ëŸ¬ í´ë¼ì„ êµ¬ê°„ì´ í¬í•¨ë˜ì–´ ìˆì–´ ì‹¤ë ¥ í–¥ìƒì— ì¢‹ìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ë¶ˆê´‘-êµ¬ê¸° í´ë¼ì„', dist:'3.5km', elev:'+230m', kom:'12:40'},
      {name:'ì„¸ê²€ì •-í‰ì°½ êµ¬ê°„', dist:'4.2km', elev:'+145m', kom:'15:20'},
    ]
  },
  { id:'sc4', type:'cycle', name:'ì–‘ì¬ì²œ-íƒ„ì²œ í‰ì§€ ì½”ìŠ¤', location:'ì„œìš¸ ê°•ë‚¨-ì†¡íŒŒ', region:'ì„œìš¸',
    distance:22.4, elevation:28, est_time:'1ì‹œê°„ 10ë¶„', avg_speed:19,
    kudos:945, athletes:721, segments:4, color:'#166534',
    desc:'ì–‘ì¬ì²œì—ì„œ íƒ„ì²œì„ ë”°ë¼ ì´ì–´ì§€ëŠ” ì™„ì „ í‰ì§€ ì½”ìŠ¤ì…ë‹ˆë‹¤. ì‹ í˜¸ê°€ ê±°ì˜ ì—†ì–´ ì†ë„ë¥¼ ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ìì „ê±° ë„ë¡œê°€ ì˜ ì •ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ì–‘ì¬ì²œ ìŠ¤í”„ë¦°íŠ¸ êµ¬ê°„', dist:'2.8km', elev:'+2m', kom:'4:52'},
      {name:'íƒ„ì²œ-ìœ„ë¡€ êµ¬ê°„', dist:'5.3km', elev:'+8m', kom:'8:55'},
    ]
  },
  { id:'sc5', type:'cycle', name:'íŒ”ë‹¹ ë¼ì´ë”© íˆ¬ì–´', location:'ê²½ê¸° í•˜ë‚¨-ë‚¨ì–‘ì£¼', region:'ê²½ê¸°',
    distance:58.6, elevation:380, est_time:'3ì‹œê°„ 20ë¶„', avg_speed:18,
    kudos:1089, athletes:654, segments:10, color:'#0277bd',
    desc:'ì„œìš¸ì—ì„œ ì¶œë°œí•´ íŒ”ë‹¹ëŒê¹Œì§€ ì´ì–´ì§€ëŠ” ë‹¹ì¼ ë¼ì´ë”© ì½”ìŠ¤ì…ë‹ˆë‹¤. ì•„ë¦„ë‹¤ìš´ í•œê°• ìƒë¥˜ë¥¼ ê°ìƒí•˜ë©° ë‹¬ë¦´ ìˆ˜ ìˆìœ¼ë©°, íŒ”ë‹¹ ì¹´í˜ê±°ë¦¬ì—ì„œ íœ´ì‹ì„ ì·¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ë¯¸ì‚¬-ë•ì†Œ êµ¬ê°„', dist:'8.5km', elev:'+45m', kom:'22:30'},
      {name:'íŒ”ë‹¹ëŒ ì ‘ê·¼ë¡œ', dist:'3.2km', elev:'+180m', kom:'10:15'},
      {name:'ë¶í•œê°• ìì „ê±°ê¸¸', dist:'12.3km', elev:'+60m', kom:'32:40'},
    ]
  },
  { id:'sc6', type:'cycle', name:'ì œì£¼ í™˜ìƒ ìì „ê±°ê¸¸', location:'ì œì£¼íŠ¹ë³„ìì¹˜ë„', region:'ì œì£¼',
    distance:234.0, elevation:1820, est_time:'13ì‹œê°„ 00ë¶„', avg_speed:18,
    kudos:2341, athletes:1203, segments:22, color:'#00695c',
    desc:'ì œì£¼ë„ë¥¼ í•œ ë°”í€´ ë„ëŠ” í™˜ìƒ ìì „ê±°ê¸¸ ì „êµ¬ê°„ì…ë‹ˆë‹¤. 1ë°• 2ì¼ ì½”ìŠ¤ë¡œ ì œì£¼ì˜ í•´ì•ˆë„ë¡œì™€ ì¤‘ì‚°ê°„ ë„ë¡œë¥¼ ëª¨ë‘ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ì„±ì‚°-í‘œì„  í•´ì•ˆ êµ¬ê°„', dist:'28.4km', elev:'+85m', kom:'1:12:30'},
      {name:'ì„œê·€í¬ êµ¬ê°„', dist:'22.1km', elev:'+210m', kom:'58:40'},
      {name:'í•œë¦¼-í˜‘ì¬ êµ¬ê°„', dist:'18.7km', elev:'+95m', kom:'48:25'},
    ]
  },
  { id:'sc7', type:'cycle', name:'ì¶˜ì²œ ìì „ê±° ì½”ìŠ¤', location:'ê°•ì› ì¶˜ì²œ', region:'ê°•ì›',
    distance:67.4, elevation:650, est_time:'3ì‹œê°„ 45ë¶„', avg_speed:18,
    kudos:756, athletes:423, segments:9, color:'#37474f',
    desc:'ì¶˜ì²œ ì˜ì•”í˜¸ì™€ ì†Œì–‘ê°•ì„ ë”°ë¼ ë‹¬ë¦¬ëŠ” ì½”ìŠ¤ì…ë‹ˆë‹¤. ì•„ë¦„ë‹¤ìš´ ê°•ì›ë„ ìì—° ê²½ê´€ê³¼ í•¨ê»˜ ì ë‹¹í•œ ì–¸ë•ì´ ìˆì–´ ì¦ê±°ìš´ ë¼ì´ë”©ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ì˜ì•”í˜¸ ìˆœí™˜ë¡œ', dist:'14.2km', elev:'+85m', kom:'36:20'},
      {name:'ì†Œì–‘ê°• ìì „ê±°ê¸¸', dist:'18.5km', elev:'+120m', kom:'47:35'},
    ]
  },
  { id:'sc8', type:'cycle', name:'ê°€í‰ ìë¼ì„¬ ì½”ìŠ¤', location:'ê²½ê¸° ê°€í‰', region:'ê²½ê¸°',
    distance:44.8, elevation:290, est_time:'2ì‹œê°„ 30ë¶„', avg_speed:18,
    kudos:687, athletes:389, segments:7, color:'#1565c0',
    desc:'ê°€í‰ ìë¼ì„¬ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë¶í•œê°•ì„ ë”°ë¼ ë‹¬ë¦¬ëŠ” ì½”ìŠ¤ì…ë‹ˆë‹¤. ì•„ë¦„ë‹¤ìš´ ê°•ë³€ í’ê²½ê³¼ ì ë‹¹í•œ ì—…ë‹¤ìš´ì´ ìˆì–´ ì¸ê¸° ìˆëŠ” ë‹¹ì¼ì¹˜ê¸° ì½”ìŠ¤ì…ë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ìë¼ì„¬ ë‚¨ë„ êµ¬ê°„', dist:'5.6km', elev:'+25m', kom:'13:40'},
      {name:'ì²­í‰-ê°€í‰ êµ¬ê°„', dist:'11.2km', elev:'+150m', kom:'31:20'},
    ]
  },
  // â”€â”€ Run ì½”ìŠ¤ (7ê°œ) â”€â”€
  { id:'sr1', type:'run', name:'ë‚¨ì‚° ìˆœí™˜ ëŸ¬ë‹ ì½”ìŠ¤', location:'ì„œìš¸ ì¤‘êµ¬ ë‚¨ì‚°', region:'ì„œìš¸',
    distance:8.3, elevation:280, est_time:'55ë¶„', avg_pace:'6:37',
    kudos:1543, athletes:1089, segments:5, color:'#374151',
    desc:'ë‚¨ì‚°ì„ í•œ ë°”í€´ ë„ëŠ” ì¸ê¸° ëŸ¬ë‹ ì½”ìŠ¤ì…ë‹ˆë‹¤. ì˜¤ë¥´ë§‰ê³¼ ë‚´ë¦¬ë§‰ì´ ë°˜ë³µë˜ì–´ ê·¼ë ¥ í–¥ìƒì— ì¢‹ìœ¼ë©°, ì •ìƒì—ì„œ ì„œìš¸ ì•¼ê²½ì„ ê°ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ë‚¨ì‚° ë©”ì¸ í´ë¼ì„', dist:'1.8km', elev:'+180m', kom:'8:45'},
      {name:'Nì„œìš¸íƒ€ì›Œ ë°©ë©´', dist:'0.9km', elev:'+65m', kom:'4:12'},
      {name:'ë‚¨ì‚° í•˜ê°• êµ¬ê°„', dist:'2.4km', elev:'-220m', kom:'10:30'},
    ]
  },
  { id:'sr2', type:'run', name:'í•œê°• ëŸ¬ë‹ ì½”ìŠ¤', location:'ì„œìš¸ ë§ˆí¬-ì˜ë“±í¬', region:'ì„œìš¸',
    distance:10.0, elevation:15, est_time:'58ë¶„', avg_pace:'5:48',
    kudos:2103, athletes:1567, segments:4, color:'#111111',
    desc:'í•œê°•ë³€ì„ ë‹¬ë¦¬ëŠ” ì„œìš¸ ëŒ€í‘œ ëŸ¬ë‹ ì½”ìŠ¤ì…ë‹ˆë‹¤. ì™„ì „ í‰ì§€ë¡œ í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ê¸° ì¢‹ìœ¼ë©°, í•œê°•ì˜ íƒ íŠ¸ì¸ ê²½ì¹˜ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ì—¬ì˜ë„ í•œê°•ê³µì› ìŠ¤í”„ë¦°íŠ¸', dist:'2.0km', elev:'+3m', kom:'6:48'},
      {name:'ë§ˆí¬-ë‹¹ì‚° êµ¬ê°„', dist:'3.8km', elev:'+5m', kom:'11:35'},
    ]
  },
  { id:'sr3', type:'run', name:'ì˜¬ë¦¼í”½ê³µì› ëŸ¬ë‹', location:'ì„œìš¸ ì†¡íŒŒêµ¬', region:'ì„œìš¸',
    distance:5.6, elevation:22, est_time:'32ë¶„', avg_pace:'5:42',
    kudos:1876, athletes:1432, segments:3, color:'#166534',
    desc:'ì˜¬ë¦¼í”½ê³µì› ë‚´ë¶€ë¥¼ ë‹¬ë¦¬ëŠ” 5.6km ìˆœí™˜ ì½”ìŠ¤ì…ë‹ˆë‹¤. ê³µì› ë‚´ ì˜ ì •ë¹„ëœ ëŸ¬ë‹ë¡œì™€ ì•„ë¦„ë‹¤ìš´ ìì—°í™˜ê²½ìœ¼ë¡œ ì´ˆë³´ìë¶€í„° ìƒê¸‰ìê¹Œì§€ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'88í˜¸ìˆ˜ ìˆœí™˜', dist:'1.8km', elev:'+8m', kom:'5:12'},
      {name:'í‰í™”ì˜ë¬¸-ëª½ì´Œí† ì„±', dist:'2.2km', elev:'+10m', kom:'6:35'},
    ]
  },
  { id:'sr4', type:'run', name:'ë¶ì•…ìŠ¤ì¹´ì´ì›¨ì´ ëŸ¬ë‹', location:'ì„œìš¸ ì¢…ë¡œêµ¬', region:'ì„œìš¸',
    distance:14.2, elevation:420, est_time:'1ì‹œê°„ 25ë¶„', avg_pace:'5:59',
    kudos:678, athletes:312, segments:6, color:'#1F1F1F',
    desc:'ë¶ì•…ì‚°ì„ ë”°ë¼ ë‹¬ë¦¬ëŠ” ë„ì „ì ì¸ ì½”ìŠ¤ì…ë‹ˆë‹¤. ì„œìš¸ ì‹œë‚´ ì „ê²½ì„ ê°ìƒí•˜ë©° ë‹¬ë¦´ ìˆ˜ ìˆìœ¼ë©°, ê°•í•œ ì—…í êµ¬ê°„ì´ í¬í•¨ë˜ì–´ ìˆì–´ ì²´ë ¥ í–¥ìƒì— íš¨ê³¼ì ì…ë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ìí•˜ë¬¸-íŒ”ê°ì • í´ë¼ì„', dist:'2.8km', elev:'+280m', kom:'15:30'},
      {name:'ë¶ì•… íŒ”ê°ì •-ì„±ë¶ êµ¬ê°„', dist:'3.5km', elev:'+95m', kom:'18:20'},
    ]
  },
  { id:'sr5', type:'run', name:'ì²­ê³„ì²œ ì•¼ê°„ ëŸ¬ë‹', location:'ì„œìš¸ ì¢…ë¡œ-ì¤‘êµ¬', region:'ì„œìš¸',
    distance:7.8, elevation:12, est_time:'43ë¶„', avg_pace:'5:31',
    kudos:1234, athletes:987, segments:4, color:'#0277bd',
    desc:'ì²­ê³„ì²œì„ ë”°ë¼ ë‹¬ë¦¬ëŠ” ì•¼ê²½ ëŸ¬ë‹ ì½”ìŠ¤ì…ë‹ˆë‹¤. ì²­ê³„ê´‘ì¥ì—ì„œ ì¶œë°œí•´ ì²­ê³„ì²œì„ ë”°ë¼ ë™ìª½ìœ¼ë¡œ ë‹¬ë¦° í›„ ë³µê·€í•˜ëŠ” ì½”ìŠ¤ë¡œ, ë„ì‹¬ ì† íë§ ëŸ¬ë‹ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ì²­ê³„ê´‘ì¥-ë™ëŒ€ë¬¸ êµ¬ê°„', dist:'3.0km', elev:'+5m', kom:'8:45'},
      {name:'ë³µê·€ êµ¬ê°„', dist:'3.0km', elev:'+5m', kom:'8:30'},
    ]
  },
  { id:'sr6', type:'run', name:'ì„œìš¸ìˆ² ê³µì› ëŸ¬ë‹', location:'ì„œìš¸ ì„±ë™êµ¬', region:'ì„œìš¸',
    distance:4.2, elevation:8, est_time:'24ë¶„', avg_pace:'5:43',
    kudos:934, athletes:723, segments:2, color:'#16a34a',
    desc:'ì„œìš¸ìˆ² ë‚´ë¶€ë¥¼ ë‹¬ë¦¬ëŠ” ì§§ê³  ì‰¬ìš´ ì…ë¬¸ ì½”ìŠ¤ì…ë‹ˆë‹¤. ì˜ ì •ë¹„ëœ ê³µì› ëŸ¬ë‹ë¡œì™€ ì•„ë¦„ë‹¤ìš´ ìì—°í™˜ê²½ì´ íŠ¹ì§•ì…ë‹ˆë‹¤. ì´ˆë³´ ëŸ¬ë„ˆì—ê²Œ ì¶”ì²œí•©ë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ì„œìš¸ìˆ² ë©”ì¸ ë£¨í”„', dist:'3.5km', elev:'+6m', kom:'10:15'},
    ]
  },
  { id:'sr7', type:'run', name:'ê´‘í™”ë¬¸-ê²½ë³µê¶ ì½”ìŠ¤', location:'ì„œìš¸ ì¢…ë¡œêµ¬', region:'ì„œìš¸',
    distance:6.5, elevation:35, est_time:'38ë¶„', avg_pace:'5:50',
    kudos:1056, athletes:832, segments:3, color:'#6366f1',
    desc:'ê´‘í™”ë¬¸ì—ì„œ ì¶œë°œí•´ ê²½ë³µê¶ ì£¼ë³€ì„ ë‹¬ë¦¬ëŠ” ì—­ì‚¬ ë¬¸í™” ì½”ìŠ¤ì…ë‹ˆë‹¤. ì„œìš¸ì˜ ì—­ì‚¬ì  ëª…ì†Œë“¤ì„ ë‹¬ë¦¬ë©° ê°ìƒí•  ìˆ˜ ìˆì–´ êµ­ë‚´ì™¸ ëŸ¬ë„ˆë“¤ì—ê²Œ ì¸ê¸°ê°€ ë†’ìŠµë‹ˆë‹¤.',
    source:'strava',
    seg_list:[
      {name:'ì„¸ì¢…ëŒ€ë¡œ-ê²½ë³µê¶ êµ¬ê°„', dist:'2.1km', elev:'+15m', kom:'6:20'},
      {name:'ì‚¼ì²­ë™-ì²­ì™€ëŒ€ êµ¬ê°„', dist:'2.4km', elev:'+18m', kom:'7:15'},
    ]
  },
];

let selectedStravaRoute = null;
let stravaCurrentTab    = 'cycle';
let stravaCurrentRegion = 'ì „ì²´';

// â”€â”€ íƒ­ ì „í™˜ â”€â”€
function switchStravaTab(tab) {
  stravaCurrentTab = tab;
  document.getElementById('strava-tab-cycle').classList.toggle('active', tab === 'cycle');
  document.getElementById('strava-tab-run').classList.toggle('active', tab === 'run');
  renderStravaList();
}

// â”€â”€ ì§€ì—­ í•„í„° â”€â”€
function selectStravaRegion(el) {
  document.querySelectorAll('#strava-region-chips .chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  stravaCurrentRegion = el.dataset.region;
  renderStravaList();
}

// â”€â”€ ì½”ìŠ¤ ëª©ë¡ ë Œë”ë§ â”€â”€
function renderStravaList() {
  const filtered = STRAVA_ROUTES.filter(r => {
    if (r.type !== stravaCurrentTab) return false;
    if (stravaCurrentRegion !== 'ì „ì²´' && r.region !== stravaCurrentRegion) return false;
    return true;
  });

  const countEl = document.getElementById('strava-count');
  const listEl  = document.getElementById('strava-list');
  if (!listEl) return;

  if (countEl) countEl.textContent = `Strava ì¸ê¸° ì½”ìŠ¤ ${filtered.length}ê°œ`;
  listEl.innerHTML = '';

  if (filtered.length === 0) {
    listEl.innerHTML = '<div style="text-align:center;padding:40px;color:#aaa">í•´ë‹¹ ì§€ì—­ì˜ ì½”ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
    return;
  }

  filtered.forEach(r => {
    const card = document.createElement('div');
    card.className = 'strava-card';
    card.onclick = () => openStravaDetail(r);

    const typeLabel = r.type === 'cycle' ? 'Cycle' : 'Run';
    const metric2 = r.type === 'cycle'
      ? `<div class="strava-stat-item"><div class="strava-stat-val">${r.avg_speed}km/h</div><div class="strava-stat-lbl">í‰ê· ì†ë„</div></div>`
      : `<div class="strava-stat-item"><div class="strava-stat-val">${r.avg_pace}/km</div><div class="strava-stat-lbl">í‰ê· í˜ì´ìŠ¤</div></div>`;

    card.innerHTML = `
      <div class="strava-card-header" style="background:${r.color}">
        <span style="font-size:14px;font-weight:700;color:white;flex:1;margin-right:8px">${r.name}</span>
        <span class="strava-badge">${typeLabel}</span>
      </div>
      <div class="strava-card-body">
        <div class="strava-stats-row">
          <div class="strava-stat-item">
            <div class="strava-stat-val">${r.distance}km</div>
            <div class="strava-stat-lbl">ê±°ë¦¬</div>
          </div>
          <div class="strava-stat-item">
            <div class="strava-stat-val">${r.elevation}m</div>
            <div class="strava-stat-lbl">ê³ ë„</div>
          </div>
          <div class="strava-stat-item">
            <div class="strava-stat-val">${r.est_time}</div>
            <div class="strava-stat-lbl">ì˜ˆìƒì‹œê°„</div>
          </div>
          ${metric2}
        </div>
      </div>
      <div class="strava-card-footer">
        <div class="strava-foot-item"><svg width="11" height="11" viewBox="0 0 24 24" fill="#FC4C02" stroke="#FC4C02" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg> ${r.kudos.toLocaleString()}</div>
        <div class="strava-foot-item"><svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/></svg> ${r.athletes.toLocaleString()}ëª…</div>
        <div class="strava-foot-item"><svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg> ${r.segments} ì„¸ê·¸</div>
        <div class="strava-foot-item" style="margin-left:auto;font-size:10px;color:#bbb">${r.location}</div>
      </div>
    `;
    listEl.appendChild(card);
  });
}

// â”€â”€ ê³ ë„ í”„ë¡œíŒŒì¼ SVG í¬ì¸íŠ¸ ìƒì„± â”€â”€
function generateElevationPoints(route, w, h) {
  const n = 40;
  const hash = route.id.split('').reduce((a, c) => a + c.charCodeAt(0), 0);
  const points = [];
  for (let i = 0; i <= n; i++) {
    const t = i / n;
    const val = Math.sin(t * Math.PI * 2 + hash) * 0.3
              + Math.sin(t * Math.PI * 4 + hash * 0.7) * 0.2
              + Math.sin(t * Math.PI * 1.5 + hash * 0.3) * 0.15
              + 0.5;
    const y = h - (val * h * 0.7) - 5;
    points.push({ x: Math.round(t * w), y: Math.max(5, Math.min(h - 5, Math.round(y))) });
  }
  return points;
}

// â”€â”€ ì½”ìŠ¤ ìƒì„¸ ì—´ê¸° â”€â”€
function openStravaDetail(route) {
  const W = 316, H = 80;
  const pts = generateElevationPoints(route, W, H);
  const pathD = pts.map((p, i) => `${i === 0 ? 'M' : 'L'} ${p.x},${p.y}`).join(' ');
  const areaD = `${pathD} L ${W},${H} L 0,${H} Z`;

  const typeLabel   = route.type === 'cycle' ? 'Cycle' : 'Run';
  const metric2Lbl  = route.type === 'cycle' ? 'í‰ê· ì†ë„' : 'í‰ê· í˜ì´ìŠ¤';
  const metric2Val  = route.type === 'cycle' ? `${route.avg_speed}km/h` : `${route.avg_pace}/km`;

  const segHtml = (route.seg_list || []).map(s => `
    <div class="strava-segment-item">
      <div>
        <div class="strava-segment-name">${s.name}</div>
        <div class="strava-segment-info">${s.dist} Â· ê³ ë„ ${s.elev}</div>
      </div>
      <div class="strava-segment-kom">KOM ${s.kom}</div>
    </div>`).join('');

  document.getElementById('strava-detail-title').textContent = route.name;
  document.getElementById('strava-detail-content').innerHTML = `
    <div class="strava-detail-banner" style="background:${route.color}">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:8px">
        <div>
          <div class="strava-detail-name">${route.name}</div>
          <div class="strava-detail-loc">${route.location}</div>
        </div>
        <span class="strava-badge">${typeLabel}</span>
      </div>
      <div style="display:flex;gap:6px;margin-top:10px;flex-wrap:wrap">
        <span style="background:rgba(255,255,255,0.2);color:white;border-radius:10px;padding:3px 10px;font-size:11px">Strava</span>
        <span style="background:rgba(255,255,255,0.2);color:white;border-radius:10px;padding:3px 10px;font-size:11px">${route.athletes.toLocaleString()}ëª… ì™„ì£¼</span>
        <span style="background:rgba(255,255,255,0.2);color:white;border-radius:10px;padding:3px 10px;font-size:11px">${route.segments} ì„¸ê·¸ë¨¼íŠ¸</span>
      </div>
    </div>
    <div class="strava-big-stats">
      <div class="strava-big-stat"><div class="strava-big-num">${route.distance}</div><div class="strava-big-lbl">km ê±°ë¦¬</div></div>
      <div class="strava-big-stat"><div class="strava-big-num">${route.elevation}</div><div class="strava-big-lbl">m ê³ ë„</div></div>
      <div class="strava-big-stat"><div class="strava-big-num">${route.est_time}</div><div class="strava-big-lbl">ì˜ˆìƒì‹œê°„</div></div>
    </div>
    <div class="strava-elevation-card">
      <div class="strava-elevation-title">ê³ ë„ í”„ë¡œíŒŒì¼</div>
      <svg width="100%" height="90" viewBox="0 0 ${W} 90" preserveAspectRatio="none" style="display:block">
        <defs>
          <linearGradient id="elev-grad-${route.id}" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#FC4C02" stop-opacity="0.35"/>
            <stop offset="100%" stop-color="#FC4C02" stop-opacity="0.04"/>
          </linearGradient>
        </defs>
        <path d="${areaD}" fill="url(#elev-grad-${route.id})"/>
        <path d="${pathD}" fill="none" stroke="#FC4C02" stroke-width="2"/>
      </svg>
    </div>
    <div style="padding:14px">
      <div class="detail-section-title" style="margin-bottom:10px">ì½”ìŠ¤ ì†Œê°œ</div>
      <div class="detail-desc">${route.desc}</div>
    </div>
    <div style="padding:0 14px 14px">
      <div class="detail-section-title" style="margin-bottom:8px">ì£¼ìš” ì„¸ê·¸ë¨¼íŠ¸</div>
      <div style="background:var(--surface);border-radius:var(--r);border:1px solid var(--border);overflow:hidden">
        ${segHtml}
      </div>
    </div>
    <div style="padding:0 14px 14px">
      <div style="display:flex;gap:20px">
        <div class="strava-stat-item">
          <div class="strava-stat-val" style="color:#FC4C02;font-size:16px">${route.kudos.toLocaleString()}</div>
          <div class="strava-stat-lbl">Kudos</div>
        </div>
        <div class="strava-stat-item">
          <div class="strava-stat-val" style="color:#FC4C02;font-size:16px">${metric2Val}</div>
          <div class="strava-stat-lbl">${metric2Lbl}</div>
        </div>
      </div>
    </div>
    <button class="strava-cta" onclick="selectStravaRoute(STRAVA_ROUTES.find(r=>r.id==='${route.id}'))">ì´ ì½”ìŠ¤ë¡œ í™œë™ ë§Œë“¤ê¸°</button>
    <div style="height:20px"></div>
  `;
  goScreen('strava-detail');
}

// â”€â”€ ì½”ìŠ¤ ì„ íƒ â†’ í¼ ìë™ì…ë ¥ â”€â”€
function selectStravaRoute(route) {
  if (!route) return;
  selectedStravaRoute = route;
  goScreen('create');
  const createContent = document.querySelector('#screen-create .content');
  if (createContent) createContent.scrollTop = 0;

  // ì¹´í…Œê³ ë¦¬ ìë™ ì„ íƒ
  document.querySelectorAll('#cat-radio .radio-btn').forEach(b => {
    b.classList.toggle('active', b.textContent.trim() === (route.type === 'cycle' ? 'Cycle' : 'Run'));
  });

  // ì½”ìŠ¤ëª… ìë™ ì…ë ¥
  const courseEl = document.getElementById('new-course');
  if (courseEl) courseEl.value = `${route.name} (${route.distance}km, ê³ ë„ ${route.elevation}m)`;

  // ì œëª© íŒíŠ¸ ì„¤ì •
  const titleEl = document.getElementById('new-title');
  if (titleEl) {
    titleEl.value = '';
    titleEl.placeholder = `ì˜ˆ: ${route.name} í•¨ê»˜í•´ìš”`;
  }

  showStravaBtn();
  showToast('Strava ì½”ìŠ¤ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤');
}

// â”€â”€ Strava ë²„íŠ¼ show/hide â”€â”€
function showStravaBtn() {
  const btn = document.getElementById('strava-load-btn');
  if (!btn) return;
  const activeCat = document.querySelector('#cat-radio .radio-btn.active')?.textContent.trim();
  btn.style.display = (activeCat === 'Cycle' || activeCat === 'Run') ? 'flex' : 'none';
}

// â”€â”€ í™œë™ ìƒì„± í¼ì—ì„œ Strava ì—´ê¸° â”€â”€
function openStravaFromCreate() {
  const activeCat = document.querySelector('#cat-radio .radio-btn.active')?.textContent.trim();
  if (activeCat === 'Cycle') {
    stravaCurrentTab = 'cycle';
  } else if (activeCat === 'Run') {
    stravaCurrentTab = 'run';
  }
  document.getElementById('strava-tab-cycle').classList.toggle('active', stravaCurrentTab === 'cycle');
  document.getElementById('strava-tab-run').classList.toggle('active', stravaCurrentTab === 'run');
  stravaCurrentRegion = 'ì „ì²´';
  document.querySelectorAll('#strava-region-chips .chip').forEach(c => c.classList.toggle('active', c.dataset.region === 'ì „ì²´'));
  renderStravaList();
  goScreen('strava');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  goCategory ìˆ˜ì • â€” Golf/Cycle/Run ì „ìš© í™”ë©´ìœ¼ë¡œ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const _origGoCategory = goCategory;
goCategory = function(catName) {
  if (catName === 'Golf') {
    goScreen('golf');
    loadGolfCourses('ì „ì²´');
  } else if (catName === 'Cycle') {
    stravaCurrentTab = 'cycle';
    stravaCurrentRegion = 'ì „ì²´';
    document.querySelectorAll('#strava-region-chips .chip').forEach(c => c.classList.toggle('active', c.dataset.region === 'ì „ì²´'));
    document.getElementById('strava-tab-cycle').classList.add('active');
    document.getElementById('strava-tab-run').classList.remove('active');
    renderStravaList();
    goScreen('strava');
  } else if (catName === 'Run') {
    stravaCurrentTab = 'run';
    stravaCurrentRegion = 'ì „ì²´';
    document.querySelectorAll('#strava-region-chips .chip').forEach(c => c.classList.toggle('active', c.dataset.region === 'ì „ì²´'));
    document.getElementById('strava-tab-cycle').classList.remove('active');
    document.getElementById('strava-tab-run').classList.add('active');
    renderStravaList();
    goScreen('strava');
  } else {
    _origGoCategory(catName);
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderHomeActivities();
renderSearchResults();
renderStravaList();
showStravaBtn();
</script>
</body>
</html>
