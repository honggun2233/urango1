<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>URANGO â€” ì•„ì›ƒë„ì–´ ì†Œì…œ í”Œë«í¼ í”„ë¡œí† íƒ€ì… v2.0</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Segoe UI', Arial, sans-serif; background: #1a1a2e; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; padding: 20px; gap: 20px; flex-wrap: wrap; }

  :root {
    --primary: #028090;
    --secondary: #00A896;
    --accent: #02C39A;
    --dark: #212121;
    --light: #F5F5F5;
  }

  /* â”€â”€â”€ Phone Frame (Fix: height ê³ ì •) â”€â”€â”€ */
  .phone-frame {
    width: 375px;
    height: 812px;
    background: #fff;
    border-radius: 40px;
    overflow: hidden;
    box-shadow: 0 30px 80px rgba(0,0,0,0.5), 0 0 0 8px #2d2d2d, 0 0 0 10px #1a1a1a;
    position: relative;
    flex-shrink: 0;
  }

  .screen { display: none; flex-direction: column; height: 100%; }
  .screen.active { display: flex; }

  /* â”€â”€â”€ Status Bar â”€â”€â”€ */
  .status-bar {
    background: var(--primary);
    padding: 12px 20px 8px;
    display: flex; justify-content: space-between; align-items: center;
    color: white; font-size: 12px; font-weight: 600; flex-shrink: 0;
  }

  /* â”€â”€â”€ Header â”€â”€â”€ */
  .header {
    background: var(--primary); padding: 12px 20px 16px;
    color: white; display: flex; align-items: center; gap: 10px; flex-shrink: 0;
  }
  .header h1 { font-size: 20px; font-weight: 700; letter-spacing: 1px; }
  .back-btn { cursor: pointer; font-size: 22px; line-height: 1; user-select: none; }
  .header .subtitle { font-size: 12px; opacity: 0.8; }

  /* â”€â”€â”€ Content Area (Fix: min-height: 0 for proper flex scroll) â”€â”€â”€ */
  .content { flex: 1; overflow-y: auto; background: var(--light); min-height: 0; }
  .content::-webkit-scrollbar { width: 4px; }
  .content::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 2px; }

  /* â”€â”€â”€ Bottom Nav â”€â”€â”€ */
  .bottom-nav {
    background: white; border-top: 1px solid #e0e0e0;
    display: flex; padding: 8px 0 12px; flex-shrink: 0;
  }
  .nav-item {
    flex: 1; display: flex; flex-direction: column; align-items: center;
    gap: 3px; cursor: pointer; padding: 6px 0; transition: all 0.2s;
  }
  .nav-item.active .nav-icon { color: var(--primary); }
  .nav-item.active .nav-label { color: var(--primary); font-weight: 600; }
  .nav-icon { font-size: 22px; color: #aaa; transition: all 0.2s; }
  .nav-label { font-size: 10px; color: #aaa; }

  /* â”€â”€â”€ Hero Banner â”€â”€â”€ */
  .hero-banner { background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 24px 20px; color: white; }
  .hero-banner h2 { font-size: 22px; font-weight: 700; margin-bottom: 6px; }
  .hero-banner p { font-size: 13px; opacity: 0.85; }
  .hero-banner .hero-stats { display: flex; gap: 20px; margin-top: 16px; }
  .hero-stat { text-align: center; }
  .hero-stat .num { font-size: 20px; font-weight: 700; }
  .hero-stat .lbl { font-size: 10px; opacity: 0.8; }

  /* â”€â”€â”€ Categories â”€â”€â”€ */
  .categories-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 20px; }
  .category-card {
    background: white; border-radius: 16px; padding: 20px 16px; cursor: pointer;
    transition: all 0.2s; box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    text-align: center; border: 2px solid transparent;
  }
  .category-card:hover { transform: translateY(-2px); border-color: var(--accent); }
  .category-card .cat-emoji { font-size: 36px; margin-bottom: 8px; }
  .category-card .cat-name { font-size: 16px; font-weight: 700; color: var(--dark); }
  .category-card .cat-count { font-size: 11px; color: #888; margin-top: 4px; }
  .category-card.active { border-color: var(--primary); background: linear-gradient(135deg, #f0fafa, #fff); }

  .section-title { font-size: 15px; font-weight: 700; color: var(--dark); padding: 16px 20px 8px; }

  /* â”€â”€â”€ Activity Card â”€â”€â”€ */
  .activity-card {
    background: white; margin: 0 20px 12px; border-radius: 14px;
    overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.06); cursor: pointer; transition: all 0.2s;
  }
  .activity-card:hover { transform: translateY(-1px); box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
  .activity-card-header {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    padding: 14px 16px; color: white; display: flex; justify-content: space-between; align-items: center;
  }
  .activity-cat-badge { background: rgba(255,255,255,0.2); border-radius: 20px; padding: 3px 10px; font-size: 11px; font-weight: 600; }
  .activity-level { font-size: 11px; opacity: 0.9; }
  .activity-card-body { padding: 14px 16px; }
  .activity-title { font-size: 15px; font-weight: 700; color: var(--dark); margin-bottom: 6px; }
  .activity-meta { display: flex; gap: 12px; flex-wrap: wrap; }
  .meta-item { display: flex; align-items: center; gap: 4px; font-size: 12px; color: #666; }
  .activity-card-footer {
    padding: 10px 16px; border-top: 1px solid #f0f0f0;
    display: flex; justify-content: space-between; align-items: center;
  }
  .leader-info { display: flex; align-items: center; gap: 8px; }
  .leader-avatar {
    width: 28px; height: 28px; border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    display: flex; align-items: center; justify-content: center; font-size: 12px; color: white; font-weight: 700;
  }
  .leader-name { font-size: 12px; color: #555; }
  .stars { color: #FFB800; font-size: 12px; }
  .join-btn {
    background: var(--primary); color: white; border: none; border-radius: 20px;
    padding: 6px 16px; font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s;
  }
  .join-btn:hover { background: var(--secondary); }

  /* â”€â”€â”€ Search â”€â”€â”€ */
  .search-bar-wrap { background: white; padding: 12px 20px; display: flex; gap: 10px; flex-shrink: 0; }
  .search-input {
    flex: 1; border: 1.5px solid #e0e0e0; border-radius: 24px;
    padding: 10px 16px; font-size: 14px; outline: none; transition: border-color 0.2s;
  }
  .search-input:focus { border-color: var(--primary); }
  .search-btn { background: var(--primary); color: white; border: none; border-radius: 24px; padding: 10px 18px; font-size: 13px; font-weight: 600; cursor: pointer; }
  .filter-chips {
    background: white; padding: 10px 20px 12px; display: flex; gap: 8px;
    overflow-x: auto; border-bottom: 1px solid #f0f0f0; flex-shrink: 0;
  }
  .filter-chips::-webkit-scrollbar { display: none; }
  .chip {
    white-space: nowrap; border: 1.5px solid #e0e0e0; border-radius: 20px;
    padding: 5px 14px; font-size: 12px; color: #555; cursor: pointer; transition: all 0.2s; background: white;
  }
  .chip.active { background: var(--primary); color: white; border-color: var(--primary); }

  /* â”€â”€â”€ Create Form â”€â”€â”€ */
  .create-form { padding: 20px; }
  .form-group { margin-bottom: 18px; }
  .form-label { font-size: 13px; font-weight: 600; color: #555; margin-bottom: 8px; display: block; }
  .form-control {
    width: 100%; border: 1.5px solid #e0e0e0; border-radius: 12px;
    padding: 12px 16px; font-size: 14px; outline: none; transition: border-color 0.2s; background: white;
  }
  .form-control:focus { border-color: var(--primary); }
  .radio-group { display: flex; gap: 8px; flex-wrap: wrap; }
  .radio-btn {
    border: 1.5px solid #e0e0e0; border-radius: 24px; padding: 7px 16px;
    font-size: 13px; cursor: pointer; transition: all 0.2s; background: white;
  }
  .radio-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
  .create-submit {
    width: 100%; background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white; border: none; border-radius: 14px; padding: 16px;
    font-size: 16px; font-weight: 700; cursor: pointer; margin-top: 8px; transition: all 0.2s;
  }
  .create-submit:hover { opacity: 0.9; transform: translateY(-1px); }

  /* â”€â”€â”€ Profile â”€â”€â”€ */
  .profile-header {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    padding: 30px 20px 50px; color: white; text-align: center; flex-shrink: 0;
  }
  .profile-avatar {
    width: 80px; height: 80px; border-radius: 50%; background: rgba(255,255,255,0.2);
    display: flex; align-items: center; justify-content: center; font-size: 36px;
    margin: 0 auto 12px; border: 3px solid rgba(255,255,255,0.5);
  }
  .profile-name { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
  .profile-id { font-size: 13px; opacity: 0.8; }
  .profile-rating { font-size: 15px; margin-top: 8px; }
  .profile-stats {
    display: flex; background: white; margin: -30px 20px 0;
    border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); padding: 16px;
  }
  .stat-item { flex: 1; text-align: center; }
  .stat-num { font-size: 20px; font-weight: 700; color: var(--primary); }
  .stat-lbl { font-size: 11px; color: #888; margin-top: 3px; }
  .profile-menu { padding: 20px; }
  .menu-item {
    background: white; border-radius: 12px; padding: 14px 16px; margin-bottom: 10px;
    display: flex; align-items: center; gap: 12px; cursor: pointer;
    transition: all 0.2s; box-shadow: 0 1px 6px rgba(0,0,0,0.04);
  }
  .menu-item:hover { transform: translateX(4px); }
  .menu-icon { font-size: 20px; width: 36px; height: 36px; background: var(--light); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .menu-text { flex: 1; font-size: 14px; font-weight: 500; color: var(--dark); }
  .menu-arrow { color: #ccc; font-size: 16px; }

  /* â”€â”€â”€ Messages â”€â”€â”€ */
  .dm-list { padding: 12px; }
  .dm-item {
    background: white; border-radius: 14px; padding: 14px 16px; margin-bottom: 10px;
    display: flex; align-items: center; gap: 12px; cursor: pointer;
    transition: all 0.2s; box-shadow: 0 1px 6px rgba(0,0,0,0.05);
  }
  .dm-item:hover { background: #f0fafa; }
  .dm-avatar {
    width: 46px; height: 46px; border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; color: white; font-weight: 700; flex-shrink: 0;
  }
  .dm-info { flex: 1; min-width: 0; }
  .dm-name { font-size: 14px; font-weight: 600; color: var(--dark); }
  .dm-preview { font-size: 12px; color: #888; margin-top: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .dm-time { font-size: 11px; color: #aaa; flex-shrink: 0; }
  .unread-badge {
    background: var(--primary); color: white; border-radius: 50%;
    width: 18px; height: 18px; font-size: 10px;
    display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0;
  }

  /* â”€â”€â”€ Activity Detail â”€â”€â”€ */
  .detail-map {
    background: linear-gradient(135deg, #e8f8f5, #d0f0ea); height: 160px;
    display: flex; align-items: center; justify-content: center; flex-direction: column;
    color: var(--primary); font-size: 13px; flex-shrink: 0;
  }
  .detail-map-icon { font-size: 38px; margin-bottom: 6px; }
  .detail-body { padding: 16px 20px; }
  .detail-title { font-size: 19px; font-weight: 700; color: var(--dark); margin-bottom: 12px; }
  .detail-info-row { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px; font-size: 13px; color: #555; }
  .detail-info-icon { font-size: 16px; width: 24px; text-align: center; flex-shrink: 0; margin-top: 1px; }
  .detail-section { margin-top: 18px; }
  .detail-section-title { font-size: 14px; font-weight: 700; color: var(--dark); margin-bottom: 10px; padding-bottom: 6px; border-bottom: 2px solid var(--accent); }
  .detail-leader-card {
    background: #f8fdfc; border-radius: 12px; padding: 14px;
    display: flex; align-items: center; gap: 12px; border: 1px solid #e0f5f0;
  }
  .detail-avatar-lg {
    width: 50px; height: 50px; border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    display: flex; align-items: center; justify-content: center; font-size: 20px; color: white; font-weight: 700; flex-shrink: 0;
  }
  .detail-leader-info { flex: 1; }
  .detail-leader-name { font-size: 15px; font-weight: 700; color: var(--dark); }
  .detail-leader-stats { font-size: 12px; color: #888; margin-top: 3px; }
  .detail-stars { color: #FFB800; font-size: 13px; margin-top: 3px; }
  .detail-desc { font-size: 13px; color: #555; line-height: 1.7; background: #f8f8f8; border-radius: 10px; padding: 14px; }
  .participants-row { display: flex; gap: 8px; flex-wrap: wrap; }
  .participant-avatar {
    width: 34px; height: 34px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center; font-size: 13px; color: white; font-weight: 700;
  }
  .detail-join-bar {
    padding: 14px 20px; background: white; border-top: 1px solid #eee;
    display: flex; gap: 12px; align-items: center; flex-shrink: 0;
  }
  .detail-join-info { font-size: 13px; color: #888; flex: 1; }
  .detail-join-info strong { color: var(--primary); font-size: 15px; }
  .detail-join-btn {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white; border: none; border-radius: 12px; padding: 12px 22px;
    font-size: 15px; font-weight: 700; cursor: pointer; transition: all 0.2s;
  }
  .detail-join-btn:hover { opacity: 0.9; transform: translateY(-1px); }

  /* â”€â”€â”€ Chat â”€â”€â”€ */
  .chat-header-info { flex: 1; }
  .chat-header-name { font-size: 16px; font-weight: 700; }
  .chat-header-status { font-size: 11px; opacity: 0.8; }
  .chat-messages { flex: 1; overflow-y: auto; padding: 16px; background: #f0f4f8; min-height: 0; }
  .chat-messages::-webkit-scrollbar { width: 3px; }
  .chat-messages::-webkit-scrollbar-thumb { background: #ccc; border-radius: 2px; }
  .msg-row { display: flex; margin-bottom: 12px; align-items: flex-end; gap: 8px; }
  .msg-row.mine { flex-direction: row-reverse; }
  .msg-avatar {
    width: 32px; height: 32px; border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    display: flex; align-items: center; justify-content: center; font-size: 13px; color: white; font-weight: 700; flex-shrink: 0;
  }
  .msg-bubble {
    max-width: 220px; padding: 10px 14px; border-radius: 18px;
    font-size: 13px; line-height: 1.5;
  }
  .msg-row:not(.mine) .msg-bubble { background: white; color: var(--dark); border-bottom-left-radius: 4px; box-shadow: 0 1px 4px rgba(0,0,0,0.08); }
  .msg-row.mine .msg-bubble { background: var(--primary); color: white; border-bottom-right-radius: 4px; }
  .msg-time { font-size: 10px; color: #aaa; margin-bottom: 2px; }
  .chat-input-bar {
    background: white; padding: 10px 16px; display: flex;
    gap: 10px; align-items: center; border-top: 1px solid #eee; flex-shrink: 0;
  }
  .chat-input { flex: 1; border: 1.5px solid #e0e0e0; border-radius: 24px; padding: 10px 16px; font-size: 14px; outline: none; }
  .chat-input:focus { border-color: var(--primary); }
  .chat-send-btn {
    background: var(--primary); color: white; border: none;
    border-radius: 50%; width: 40px; height: 40px; font-size: 16px; cursor: pointer;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }

  /* â”€â”€â”€ Notifications â”€â”€â”€ */
  .notify-list { padding: 12px; }
  .notify-item {
    background: white; border-radius: 14px; padding: 14px 16px; margin-bottom: 10px;
    display: flex; align-items: flex-start; gap: 12px;
    box-shadow: 0 1px 6px rgba(0,0,0,0.05); cursor: pointer; transition: all 0.2s;
  }
  .notify-item:hover { background: #f0fafa; }
  .notify-item.unread { border-left: 3px solid var(--accent); }
  .notify-icon { font-size: 24px; flex-shrink: 0; margin-top: 2px; }
  .notify-content { flex: 1; }
  .notify-text { font-size: 13px; color: var(--dark); line-height: 1.5; }
  .notify-text strong { color: var(--primary); }
  .notify-time { font-size: 11px; color: #aaa; margin-top: 4px; }
  .notify-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); flex-shrink: 0; margin-top: 6px; }

  /* â”€â”€â”€ Page Info â”€â”€â”€ */
  .page-info { text-align: center; padding: 12px 20px; background: white; border-bottom: 1px solid #eee; font-size: 13px; color: #666; }

  /* â”€â”€â”€ Demo Label â”€â”€â”€ */
  .demo-info { color: white; text-align: center; max-width: 340px; padding-top: 20px; align-self: flex-start; }
  .demo-info h2 { font-size: 28px; font-weight: 800; color: var(--accent); margin-bottom: 8px; }
  .demo-info p { font-size: 14px; opacity: 0.7; line-height: 1.6; }
  .demo-screens { margin-top: 16px; display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
  .demo-chip { background: rgba(255,255,255,0.1); border-radius: 20px; padding: 5px 14px; font-size: 12px; color: var(--accent); border: 1px solid rgba(2,195,154,0.3); }
  .demo-fix { background: rgba(255,100,100,0.1); border-color: rgba(255,100,100,0.3); color: #ff9999; }
</style>
</head>
<body>

<!-- â”€â”€â”€ Demo Info Panel â”€â”€â”€ -->
<div class="demo-info">
  <h2>URANGO</h2>
  <p>ì•„ì›ƒë„ì–´ ì•¡í‹°ë¹„í‹°<br>ì†Œì…œ í”Œë«í¼<br>ì¸í„°ë™í‹°ë¸Œ í”„ë¡œí† íƒ€ì…</p>
  <div class="demo-screens">
    <div class="demo-chip">ğŸ  í™ˆ</div>
    <div class="demo-chip">ğŸ” ê²€ìƒ‰</div>
    <div class="demo-chip">â• í™œë™ ìƒì„±</div>
    <div class="demo-chip">ğŸ‘¤ í”„ë¡œí•„</div>
    <div class="demo-chip">ğŸ’¬ ë©”ì‹œì§€</div>
    <div class="demo-chip">ğŸ“‹ í™œë™ ìƒì„¸ âœ¨</div>
    <div class="demo-chip">ğŸ’¬ ì±„íŒ… âœ¨</div>
    <div class="demo-chip">ğŸ”” ì•Œë¦¼ âœ¨</div>
  </div>
  <div style="margin-top:20px; background:rgba(255,255,255,0.05); border-radius:12px; padding:14px; text-align:left; font-size:12px; line-height:1.8; color:rgba(255,255,255,0.6)">
    <div style="color:var(--accent); font-weight:700; margin-bottom:6px">âœ… v2.0 ê°œì„  ì‚¬í•­</div>
    <div>ğŸ”§ í° í”„ë ˆì„ ë†’ì´ ê³ ì •</div>
    <div>ğŸ• ì‹¤ì‹œê°„ ì‹œê° í‘œì‹œ</div>
    <div>ğŸš´ ì¹´í…Œê³ ë¦¬ â†’ ê²€ìƒ‰ ì—°ë™</div>
    <div>ğŸ“‹ í™œë™ ìƒì„¸ í™”ë©´ ì¶”ê°€</div>
    <div>ğŸ’¬ ì±„íŒ… í™”ë©´ (ì „ì†¡ ê°€ëŠ¥)</div>
    <div>ğŸ”” ì•Œë¦¼ í™”ë©´ ì¶”ê°€</div>
    <div>ğŸ” ê²€ìƒ‰ í•„í„° ë³µìˆ˜ ì„ íƒ</div>
    <div>ğŸš€ í™œë™ ìƒì„± â†’ í™ˆ ë°˜ì˜</div>
    <div>ğŸ“ ì§€ì—­ ì„ íƒ ì˜µì…˜ ì¶”ê°€</div>
    <div>ğŸ‘¤ í”„ë¡œí•„ ë©”ë‰´ ë°˜ì‘ ì¶”ê°€</div>
  </div>
  <div style="margin-top:12px; font-size:11px; opacity:0.4;">Version 2.0 Â· 2026.02.25</div>
</div>

<!-- â”€â”€â”€ Phone Frame â”€â”€â”€ -->
<div class="phone-frame">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HOME SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen active" id="screen-home">
    <div class="status-bar">
      <span id="clock-home">9:41</span><span>ğŸ“¶ ğŸ”‹</span>
    </div>
    <div class="header" style="justify-content:space-between">
      <div>
        <h1>URANGO</h1>
        <div class="subtitle">ì–´ë””ë¡œ ë– ë‚ ê¹Œìš”?</div>
      </div>
      <div style="font-size:22px;cursor:pointer;position:relative" onclick="goScreen('notify')">
        ğŸ””
        <div style="position:absolute;top:-2px;right:-4px;width:10px;height:10px;background:#ff4444;border-radius:50%;border:2px solid var(--primary)"></div>
      </div>
    </div>
    <div class="content" id="content-home">
      <div class="hero-banner">
        <h2>í•¨ê»˜ ë‹¬ë¦¬ê³ ,<br>í•¨ê»˜ ì˜¤ë¥´ê³ ! ğŸš€</h2>
        <p>ê²€ì¦ëœ ë¦¬ë”ì™€ í•¨ê»˜í•˜ëŠ” ì•ˆì „í•œ ì•„ì›ƒë„ì–´</p>
        <div class="hero-stats">
          <div class="hero-stat"><div class="num">1,247</div><div class="lbl">í™œì„± í™œë™</div></div>
          <div class="hero-stat"><div class="num">8,924</div><div class="lbl">í™œë™ ë¦¬ë”</div></div>
          <div class="hero-stat"><div class="num">42,100</div><div class="lbl">ì „ì²´ íšŒì›</div></div>
        </div>
      </div>
      <div class="page-info">ğŸ“ ì„œìš¸íŠ¹ë³„ì‹œ ê¸°ì¤€ ì¶”ì²œ í™œë™</div>
      <div class="categories-grid">
        <div class="category-card" onclick="goCategory('Cycle')">
          <div class="cat-emoji">ğŸš´</div>
          <div class="cat-name">Cycle</div>
          <div class="cat-count">342ê°œ í™œë™</div>
        </div>
        <div class="category-card" onclick="goCategory('Bike')">
          <div class="cat-emoji">ğŸï¸</div>
          <div class="cat-name">Bike</div>
          <div class="cat-count">187ê°œ í™œë™</div>
        </div>
        <div class="category-card" onclick="goCategory('Run')">
          <div class="cat-emoji">ğŸƒ</div>
          <div class="cat-name">Run</div>
          <div class="cat-count">426ê°œ í™œë™</div>
        </div>
        <div class="category-card" onclick="goCategory('Mountain')">
          <div class="cat-emoji">â›°ï¸</div>
          <div class="cat-name">Mountain</div>
          <div class="cat-count">292ê°œ í™œë™</div>
        </div>
      </div>
      <div class="section-title">âš¡ ì´ë²ˆ ì£¼ ì¶”ì²œ í™œë™</div>
      <div id="home-activity-list"></div>
      <div style="height:20px"></div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item active" onclick="goScreen('home')"><div class="nav-icon">ğŸ </div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item" onclick="goScreen('search')"><div class="nav-icon">ğŸ”</div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item" onclick="goScreen('create')"><div class="nav-icon">â•</div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item" onclick="goScreen('profile')"><div class="nav-icon">ğŸ‘¤</div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item" onclick="goScreen('messages')"><div class="nav-icon">ğŸ’¬</div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SEARCH SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-search">
    <div class="status-bar"><span id="clock-search">9:41</span><span>ğŸ“¶ ğŸ”‹</span></div>
    <div class="header"><h1>í™œë™ ê²€ìƒ‰</h1></div>
    <div class="search-bar-wrap">
      <input class="search-input" id="search-input" placeholder="ë¦¬ë”, ì¥ì†Œ, ì½”ìŠ¤ ê²€ìƒ‰..." type="text" oninput="renderSearchResults()">
      <button class="search-btn" onclick="renderSearchResults()">ê²€ìƒ‰</button>
    </div>
    <!-- Fix: ì¹´í…Œê³ ë¦¬ ì¹©(ë‹¨ì¼) + ì˜µì…˜ ì¹©(ë³µìˆ˜) ë¶„ë¦¬ -->
    <div class="filter-chips" id="filter-chips">
      <div class="chip cat-chip active" data-cat="ì „ì²´" onclick="toggleCatChip(this)">ì „ì²´</div>
      <div class="chip cat-chip" data-cat="Cycle" onclick="toggleCatChip(this)">ğŸš´ Cycle</div>
      <div class="chip cat-chip" data-cat="Bike" onclick="toggleCatChip(this)">ğŸï¸ Bike</div>
      <div class="chip cat-chip" data-cat="Run" onclick="toggleCatChip(this)">ğŸƒ Run</div>
      <div class="chip cat-chip" data-cat="Mountain" onclick="toggleCatChip(this)">â›°ï¸ Mountain</div>
      <div class="chip opt-chip" data-opt="ì´ë²ˆì£¼" onclick="toggleOptChip(this)">ì´ë²ˆì£¼</div>
      <div class="chip opt-chip" data-opt="ì¦‰ì‹œì°¸ì—¬" onclick="toggleOptChip(this)">âš¡ ì¦‰ì‹œì°¸ì—¬</div>
      <div class="chip opt-chip" data-opt="ì´ˆê¸‰" onclick="toggleOptChip(this)">ì´ˆê¸‰</div>
    </div>
    <div class="content">
      <div class="page-info" id="search-count">ì´ 5ê°œì˜ í™œë™ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤</div>
      <div id="search-results-list"></div>
      <div style="height:20px"></div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item" onclick="goScreen('home')"><div class="nav-icon">ğŸ </div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item active" onclick="goScreen('search')"><div class="nav-icon">ğŸ”</div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item" onclick="goScreen('create')"><div class="nav-icon">â•</div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item" onclick="goScreen('profile')"><div class="nav-icon">ğŸ‘¤</div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item" onclick="goScreen('messages')"><div class="nav-icon">ğŸ’¬</div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CREATE SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-create">
    <div class="status-bar"><span id="clock-create">9:41</span><span>ğŸ“¶ ğŸ”‹</span></div>
    <div class="header"><h1>â• í™œë™ ë§Œë“¤ê¸°</h1></div>
    <div class="content">
      <div class="create-form">
        <div class="form-group">
          <label class="form-label">ì¹´í…Œê³ ë¦¬ ì„ íƒ</label>
          <div class="radio-group" id="cat-radio">
            <div class="radio-btn active" onclick="selectRadio(this,'cat-radio')">ğŸš´ Cycle</div>
            <div class="radio-btn" onclick="selectRadio(this,'cat-radio')">ğŸï¸ Bike</div>
            <div class="radio-btn" onclick="selectRadio(this,'cat-radio')">ğŸƒ Run</div>
            <div class="radio-btn" onclick="selectRadio(this,'cat-radio')">â›°ï¸ Mountain</div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">í™œë™ ì œëª©</label>
          <input class="form-control" id="new-title" type="text" placeholder="ì˜ˆ: í•œê°• ë¼ì´ë”© í•¨ê»˜í•´ìš”!">
        </div>
        <div class="form-group">
          <label class="form-label">ğŸ“… ë‚ ì§œ</label>
          <input class="form-control" id="new-date" type="date" value="2026-03-15">
        </div>
        <!-- Fix: ì§€ì—­ ì„ íƒ ì˜µì…˜ ì¶”ê°€ -->
        <div class="form-group">
          <label class="form-label">ğŸ“ ì§€ì—­</label>
          <select class="form-control" id="new-region">
            <option value="ì„œìš¸">ì„œìš¸íŠ¹ë³„ì‹œ</option>
            <option value="ê²½ê¸°">ê²½ê¸°ë„</option>
            <option value="ì¸ì²œ">ì¸ì²œê´‘ì—­ì‹œ</option>
            <option value="ë¶€ì‚°">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ëŒ€êµ¬">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
            <option value="ëŒ€ì „">ëŒ€ì „ê´‘ì—­ì‹œ</option>
            <option value="ê´‘ì£¼">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
            <option value="ìš¸ì‚°">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ê°•ì›">ê°•ì›ë„</option>
            <option value="ì¶©ì²­">ì¶©ì²­ë„</option>
            <option value="ì „ë¼">ì „ë¼ë„</option>
            <option value="ê²½ìƒ">ê²½ìƒë„</option>
            <option value="ì œì£¼">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">ìƒì„¸ ì½”ìŠ¤</label>
          <input class="form-control" id="new-course" type="text" placeholder="ì˜ˆ: ì—¬ì˜ë„ í•œê°•ê³µì› â†’ ëšì„¬ ì™•ë³µ">
        </div>
        <div class="form-group">
          <label class="form-label">ğŸ’ª ë‚œì´ë„</label>
          <div class="radio-group" id="level-radio">
            <div class="radio-btn active" onclick="selectRadio(this,'level-radio')">ğŸŸ¢ ì´ˆê¸‰</div>
            <div class="radio-btn" onclick="selectRadio(this,'level-radio')">ğŸŸ¡ ì¤‘ê¸‰</div>
            <div class="radio-btn" onclick="selectRadio(this,'level-radio')">ğŸ”´ ê³ ê¸‰</div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">ğŸ‘¥ ì¸ì› ì œí•œ</label>
          <div class="radio-group" id="size-radio">
            <div class="radio-btn" onclick="selectRadio(this,'size-radio')">2~5ëª…</div>
            <div class="radio-btn active" onclick="selectRadio(this,'size-radio')">6~10ëª…</div>
            <div class="radio-btn" onclick="selectRadio(this,'size-radio')">11ëª… ì´ìƒ</div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">í™œë™ ì†Œê°œ</label>
          <textarea class="form-control" id="new-desc" rows="3" placeholder="í™œë™ì— ëŒ€í•œ ê°„ë‹¨í•œ ì†Œê°œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
        </div>
        <button class="create-submit" onclick="submitCreate()">ğŸš€ í™œë™ ìƒì„±í•˜ê¸°</button>
      </div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item" onclick="goScreen('home')"><div class="nav-icon">ğŸ </div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item" onclick="goScreen('search')"><div class="nav-icon">ğŸ”</div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item active" onclick="goScreen('create')"><div class="nav-icon">â•</div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item" onclick="goScreen('profile')"><div class="nav-icon">ğŸ‘¤</div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item" onclick="goScreen('messages')"><div class="nav-icon">ğŸ’¬</div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PROFILE SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-profile">
    <div class="status-bar"><span id="clock-profile">9:41</span><span>ğŸ“¶ ğŸ”‹</span></div>
    <div class="profile-header">
      <div class="profile-avatar">ğŸ‘¤</div>
      <div class="profile-name">í™ê¸¸ë™</div>
      <div class="profile-id">@hong_outdoor</div>
      <div class="profile-rating">â­ 4.8ì   â€¢  ë¦¬ë”</div>
    </div>
    <div class="content">
      <div class="profile-stats">
        <div class="stat-item"><div class="stat-num">24</div><div class="stat-lbl">ë¦¬ë“œ í™œë™</div></div>
        <div class="stat-item" style="border-left:1px solid #eee;border-right:1px solid #eee"><div class="stat-num">87</div><div class="stat-lbl">ì°¸ì—¬ í™œë™</div></div>
        <div class="stat-item"><div class="stat-num">312</div><div class="stat-lbl">íŒ”ë¡œì›Œ</div></div>
      </div>
      <div style="padding:16px 20px 8px;font-size:13px;font-weight:600;color:#555">ì„ í˜¸ ì¹´í…Œê³ ë¦¬</div>
      <div style="padding:0 20px;display:flex;gap:8px;flex-wrap:wrap">
        <div class="chip active">ğŸš´ Cycle</div>
        <div class="chip active">â›°ï¸ Mountain</div>
      </div>
      <!-- Fix: ë©”ë‰´ í•­ëª© í´ë¦­ ë°˜ì‘ ì¶”ê°€ -->
      <div class="profile-menu">
        <div class="menu-item" onclick="showToast('ğŸ† ë‚´ í™œë™ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤...')">
          <div class="menu-icon">ğŸ†</div><div class="menu-text">ë‚´ í™œë™ ëª©ë¡</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('ğŸ‘¥ íŒ”ë¡œì‰ 198ëª… / íŒ”ë¡œì›Œ 312ëª…')">
          <div class="menu-icon">ğŸ‘¥</div><div class="menu-text">íŒ”ë¡œì‰ / íŒ”ë¡œì›Œ</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('ğŸ“¸ ì‚¬ì§„ì²© 87ì¥ì˜ ì‚¬ì§„ì´ ìˆìŠµë‹ˆë‹¤')">
          <div class="menu-icon">ğŸ“¸</div><div class="menu-text">ì‚¬ì§„ì²©</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('â­ í‰ê·  í‰ì  4.8ì  (ì´ 56íšŒ í‰ê°€)')">
          <div class="menu-icon">â­</div><div class="menu-text">í‰ê°€ ë‚´ì—­</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('ğŸ”” ì•Œë¦¼ ì„¤ì •ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤')">
          <div class="menu-icon">ğŸ””</div><div class="menu-text">ì•Œë¦¼ ì„¤ì •</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('âš™ï¸ ê³„ì • ì„¤ì •ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤')">
          <div class="menu-icon">âš™ï¸</div><div class="menu-text">ê³„ì • ì„¤ì •</div><div class="menu-arrow">â€º</div>
        </div>
        <div class="menu-item" onclick="showToast('ğŸ‘‹ ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤')">
          <div class="menu-icon">ğŸšª</div><div class="menu-text" style="color:#ff4444">ë¡œê·¸ì•„ì›ƒ</div><div class="menu-arrow">â€º</div>
        </div>
      </div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item" onclick="goScreen('home')"><div class="nav-icon">ğŸ </div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item" onclick="goScreen('search')"><div class="nav-icon">ğŸ”</div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item" onclick="goScreen('create')"><div class="nav-icon">â•</div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item active" onclick="goScreen('profile')"><div class="nav-icon">ğŸ‘¤</div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item" onclick="goScreen('messages')"><div class="nav-icon">ğŸ’¬</div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MESSAGES SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-messages">
    <div class="status-bar"><span id="clock-messages">9:41</span><span>ğŸ“¶ ğŸ”‹</span></div>
    <div class="header"><h1>ğŸ’¬ ë©”ì‹œì§€</h1></div>
    <div class="content">
      <div class="page-info">ì½ì§€ ì•Šì€ ë©”ì‹œì§€ 3ê°œ</div>
      <div class="dm-list">
        <div class="dm-item" onclick="openChat('ë°•ë¯¼ì¤€','ë°•','linear-gradient(135deg,#028090,#02C39A)')">
          <div class="dm-avatar">ë°•</div>
          <div class="dm-info">
            <div class="dm-name">ë°•ë¯¼ì¤€ ë¦¬ë”</div>
            <div class="dm-preview">ì•ˆë…•í•˜ì„¸ìš”! í•œê°• ë¼ì´ë”© ì‹ ì²­ í™•ì¸í–ˆìŠµë‹ˆë‹¤ ğŸ˜Š</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">ë°©ê¸ˆ</div><div class="unread-badge">2</div>
          </div>
        </div>
        <div class="dm-item" onclick="openChat('ê¹€ì„œì—°','ê¹€','linear-gradient(135deg,#00A896,#02C39A)')">
          <div class="dm-avatar" style="background:linear-gradient(135deg,#00A896,#02C39A)">ê¹€</div>
          <div class="dm-info">
            <div class="dm-name">ê¹€ì„œì—° ë¦¬ë”</div>
            <div class="dm-preview">ë¶í•œì‚° íŠ¸ë ˆí‚¹ ì¤€ë¹„ë¬¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤ ğŸ’</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">1ì‹œê°„ ì „</div><div class="unread-badge">1</div>
          </div>
        </div>
        <div class="dm-item" onclick="openChat('ì •í˜„ìš°','ì •','linear-gradient(135deg,#028090,#0891B2)')">
          <div class="dm-avatar" style="background:linear-gradient(135deg,#028090,#0891B2)">ì •</div>
          <div class="dm-info">
            <div class="dm-name">ì •í˜„ìš° ë¦¬ë”</div>
            <div class="dm-preview">ê°€í‰ íˆ¬ì–´ ì˜ ë‹¤ë…€ì™”ìŠµë‹ˆë‹¤! ë‹¤ìŒì— ë˜ ë´¬ìš”</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">ì–´ì œ</div>
          </div>
        </div>
        <div class="dm-item" onclick="openChat('ì´ì¤€í˜¸','ì´','linear-gradient(135deg,#02C39A,#028090)')">
          <div class="dm-avatar" style="background:linear-gradient(135deg,#02C39A,#028090)">ì´</div>
          <div class="dm-info">
            <div class="dm-name">ì´ì¤€í˜¸ ë¦¬ë”</div>
            <div class="dm-preview">5K ëŸ¬ë‹ ê°™ì´ ë‹¬ë ¸ë˜ ë¶„ë“¤ ë‹¨ì²´ ì±„íŒ…ë°© ë§Œë“¤ì—ˆì–´ìš”!</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">2ì¼ ì „</div>
          </div>
        </div>
        <div class="dm-item" onclick="openChat('ìµœë‹¤í˜„','ìµœ','linear-gradient(135deg,#6366f1,#8b5cf6)')">
          <div class="dm-avatar" style="background:linear-gradient(135deg,#6366f1,#8b5cf6)">ìµœ</div>
          <div class="dm-info">
            <div class="dm-name">ìµœë‹¤í˜„ ë¦¬ë”</div>
            <div class="dm-preview">ë‹¤ìŒ ë„ë´‰ì‚° íŠ¸ë ˆí‚¹ë„ ê¸°ëŒ€í•´ì£¼ì„¸ìš”! â›°ï¸</div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px">
            <div class="dm-time">3ì¼ ì „</div>
          </div>
        </div>
      </div>
    </div>
    <nav class="bottom-nav">
      <div class="nav-item" onclick="goScreen('home')"><div class="nav-icon">ğŸ </div><div class="nav-label">í™ˆ</div></div>
      <div class="nav-item" onclick="goScreen('search')"><div class="nav-icon">ğŸ”</div><div class="nav-label">ê²€ìƒ‰</div></div>
      <div class="nav-item" onclick="goScreen('create')"><div class="nav-icon">â•</div><div class="nav-label">ìƒì„±</div></div>
      <div class="nav-item" onclick="goScreen('profile')"><div class="nav-icon">ğŸ‘¤</div><div class="nav-label">í”„ë¡œí•„</div></div>
      <div class="nav-item active" onclick="goScreen('messages')"><div class="nav-icon">ğŸ’¬</div><div class="nav-label">ë©”ì‹œì§€</div></div>
    </nav>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] ACTIVITY DETAIL SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-detail">
    <div class="status-bar"><span id="clock-detail">9:41</span><span>ğŸ“¶ ğŸ”‹</span></div>
    <div class="header">
      <span class="back-btn" onclick="goBack()">â†</span>
      <h1 id="detail-cat-label">í™œë™ ìƒì„¸</h1>
    </div>
    <div class="content" id="detail-content"></div>
    <div class="detail-join-bar">
      <div class="detail-join-info">ë‚¨ì€ ìë¦¬ <strong id="detail-slots">-</strong></div>
      <button class="detail-join-btn" onclick="showToast('âœ… ì°¸ê°€ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!')">ì°¸ê°€ ì‹ ì²­í•˜ê¸°</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] CHAT SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-chat">
    <div class="status-bar"><span id="clock-chat">9:41</span><span>ğŸ“¶ ğŸ”‹</span></div>
    <div class="header">
      <span class="back-btn" onclick="goScreen('messages')">â†</span>
      <div class="chat-header-info">
        <div class="chat-header-name" id="chat-name">ë°•ë¯¼ì¤€ ë¦¬ë”</div>
        <div class="chat-header-status">ì˜¨ë¼ì¸</div>
      </div>
      <div style="font-size:20px;cursor:pointer" onclick="showToast('ğŸ“ í†µí™” ì—°ê²° ì¤‘...')">ğŸ“</div>
    </div>
    <div class="chat-messages" id="chat-messages"></div>
    <div class="chat-input-bar">
      <input class="chat-input" id="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="if(event.key==='Enter')sendMessage()">
      <button class="chat-send-btn" onclick="sendMessage()">â¤</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       [NEW] NOTIFY SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="screen-notify">
    <div class="status-bar"><span id="clock-notify">9:41</span><span>ğŸ“¶ ğŸ”‹</span></div>
    <div class="header">
      <span class="back-btn" onclick="goScreen('home')">â†</span>
      <h1>ğŸ”” ì•Œë¦¼</h1>
    </div>
    <div class="content">
      <div class="page-info">ì½ì§€ ì•Šì€ ì•Œë¦¼ 4ê°œ</div>
      <div class="notify-list">
        <div class="notify-item unread" onclick="this.classList.remove('unread');this.querySelector('.notify-dot')?.remove();showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon">âœ…</div>
          <div class="notify-content">
            <div class="notify-text"><strong>ë°•ë¯¼ì¤€ ë¦¬ë”</strong>ê°€ ê·€í•˜ì˜ í•œê°• ë¼ì´ë”© ì°¸ê°€ ì‹ ì²­ì„ <strong>ìŠ¹ì¸</strong>í–ˆìŠµë‹ˆë‹¤.</div>
            <div class="notify-time">ë°©ê¸ˆ ì „</div>
          </div>
          <div class="notify-dot"></div>
        </div>
        <div class="notify-item unread" onclick="this.classList.remove('unread');this.querySelector('.notify-dot')?.remove();showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon">ğŸ’¬</div>
          <div class="notify-content">
            <div class="notify-text"><strong>ë°•ë¯¼ì¤€ ë¦¬ë”</strong>ê°€ ë©”ì‹œì§€ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤: "ì•ˆë…•í•˜ì„¸ìš”! í•œê°• ë¼ì´ë”©..."</div>
            <div class="notify-time">5ë¶„ ì „</div>
          </div>
          <div class="notify-dot"></div>
        </div>
        <div class="notify-item unread" onclick="this.classList.remove('unread');this.querySelector('.notify-dot')?.remove();showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon">ğŸ‘¥</div>
          <div class="notify-content">
            <div class="notify-text"><strong>ê¹€ì„œì—°</strong>ë‹˜ì´ íŒ”ë¡œìš°í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.</div>
            <div class="notify-time">1ì‹œê°„ ì „</div>
          </div>
          <div class="notify-dot"></div>
        </div>
        <div class="notify-item unread" onclick="this.classList.remove('unread');this.querySelector('.notify-dot')?.remove();showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon">â­</div>
          <div class="notify-content">
            <div class="notify-text"><strong>ì´ì¤€í˜¸</strong>ë‹˜ì´ <strong>â˜…â˜…â˜…â˜…â˜… 5.0</strong> í‰ì ì„ ë‚¨ê²¼ìŠµë‹ˆë‹¤.</div>
            <div class="notify-time">3ì‹œê°„ ì „</div>
          </div>
          <div class="notify-dot"></div>
        </div>
        <div class="notify-item" onclick="showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon">ğŸš´</div>
          <div class="notify-content">
            <div class="notify-text">ì°¸ê°€í•˜ì‹  <strong>ì˜¬ë¦¼í”½ê³µì› 5K ëŸ¬ë‹í¬ë£¨</strong> í™œë™ì´ ë‚´ì¼ì…ë‹ˆë‹¤!</div>
            <div class="notify-time">ì–´ì œ</div>
          </div>
        </div>
        <div class="notify-item" onclick="showToast('ì•Œë¦¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤')">
          <div class="notify-icon">ğŸ“</div>
          <div class="notify-content">
            <div class="notify-text">ê·¼ì²˜ì— ìƒˆ í™œë™ ë“±ë¡: <strong>í•œê°• ìì „ê±° ë¼ì´ë”© ì´ˆë³´í™˜ì˜</strong></div>
            <div class="notify-time">2ì¼ ì „</div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div><!-- /phone-frame -->

<!-- Toast -->
<div id="toast" style="display:none;position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:#212121;color:white;padding:12px 24px;border-radius:24px;font-size:14px;z-index:9999;box-shadow:0 4px 20px rgba(0,0,0,0.3);white-space:nowrap;transition:opacity 0.3s"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ACTIVITY DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ACTIVITIES = [
  {
    id: 0, cat: 'Cycle', catEmoji: 'ğŸš´',
    title: 'í•œê°• ë¼ì´ë”© í•¨ê»˜í•´ìš” ğŸŒŠ',
    date: '2026.03.15 (í† ) 08:00', location: 'ì—¬ì˜ë„ í•œê°•ê³µì›',
    course: 'ì—¬ì˜ë„ í•œê°•ê³µì› â†’ ëšì„¬ ì™•ë³µ (ì•½ 40km)', level: 'ğŸŸ¢ ì´ˆê¸‰',
    current: 4, max: 6, popJoin: false,
    leader: 'ë°•ë¯¼ì¤€', initial: 'ë°•', grad: 'linear-gradient(135deg,#028090,#02C39A)',
    rating: 'â˜…â˜…â˜…â˜…â˜… 4.9', ratingCount: '(48íšŒ ë¦¬ë“œ)',
    headerGrad: 'linear-gradient(135deg,#028090,#00A896)',
    desc: 'í•œê°•ì„ ë”°ë¼ ì‹œì›í•˜ê²Œ ë¼ì´ë”©í•˜ëŠ” ëª¨ì„ì…ë‹ˆë‹¤! ì´ˆë³´ìë„ í™˜ì˜í•˜ë©° ì•ˆì „í•˜ê²Œ ì¦ê¸¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ë“œë¦½ë‹ˆë‹¤. ìì „ê±° ëŒ€ì—¬ ê°€ëŠ¥í•˜ë©°, ì¤‘ê°„ ì¹´í˜ íœ´ì‹ ìˆìŠµë‹ˆë‹¤. í—¬ë©§ê³¼ ì¥ê°‘ì€ í•„ì°¸ì´ì—ìš” ğŸ˜Š'
  },
  {
    id: 1, cat: 'Mountain', catEmoji: 'â›°ï¸',
    title: 'ë¶í•œì‚° ë‘˜ë ˆê¸¸ íŠ¸ë ˆí‚¹ ğŸŒ¿',
    date: '2026.03.20 (ëª©) 07:30', location: 'ë¶í•œì‚°êµ­ë¦½ê³µì› ì…êµ¬',
    course: 'ë¶í•œì‚°ì„± ì…êµ¬ â†’ ëŒ€ì„±ë¬¸ â†’ ì¹¼ë°”ìœ„ ëŠ¥ì„  (ì•½ 12km)', level: 'ğŸŸ¡ ì¤‘ê¸‰',
    current: 7, max: 10, popJoin: false,
    leader: 'ê¹€ì„œì—°', initial: 'ê¹€', grad: 'linear-gradient(135deg,#00A896,#02C39A)',
    rating: 'â˜…â˜…â˜…â˜…Â½ 4.7', ratingCount: '(31íšŒ ë¦¬ë“œ)',
    headerGrad: 'linear-gradient(135deg,#00A896,#02C39A)',
    desc: 'ë¶í•œì‚° ë‘˜ë ˆê¸¸ ì½”ìŠ¤ë¥¼ í•¨ê»˜ ê±·ëŠ” íŠ¸ë ˆí‚¹ì…ë‹ˆë‹¤. ìì—° ì†ì—ì„œ íë§í•˜ë©° ê±´ê°•ì„ ì±™ê²¨ìš”! ë“±ì‚° ìŠ¤í‹±ê³¼ ì ì ˆí•œ ë“±ì‚°í™” ì°©ìš© ê¶Œì¥í•©ë‹ˆë‹¤. í•˜ì‚° í›„ ë’¤í’€ì´ë„ ì˜ˆì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤ ğŸº'
  },
  {
    id: 2, cat: 'Run', catEmoji: 'ğŸƒ',
    title: 'ì˜¬ë¦¼í”½ê³µì› 5K ëŸ¬ë‹í¬ë£¨ ğŸ…',
    date: '2026.03.22 (í† ) 07:00', location: 'ì˜¬ë¦¼í”½ê³µì› 88í˜¸ìˆ˜',
    course: '88í˜¸ìˆ˜ â†’ í‰í™”ì˜ë¬¸ â†’ 88í˜¸ìˆ˜ (5km ìˆœí™˜)', level: 'ğŸŸ¢ ì´ˆê¸‰',
    current: 12, max: 15, popJoin: false,
    leader: 'ì´ì¤€í˜¸', initial: 'ì´', grad: 'linear-gradient(135deg,#02C39A,#028090)',
    rating: 'â˜…â˜…â˜…â˜…â˜… 5.0', ratingCount: '(67íšŒ ë¦¬ë“œ)',
    headerGrad: 'linear-gradient(135deg,#02C39A,#028090)',
    desc: '5km ê°€ë³ê²Œ ë‹¬ë¦¬ëŠ” ëŸ¬ë‹í¬ë£¨ì…ë‹ˆë‹¤. í˜ì´ìŠ¤ëŠ” 6~7ë¶„/kmë¡œ ì²œì²œíˆ ì¦ê¸°ë©° ë‹¬ë ¤ìš”! ëŸ¬ë‹ í›„ ìŠ¤íŠ¸ë ˆì¹­ ë° ì•„ì¹¨ ì‹ì‚¬ í•¨ê»˜ í•©ë‹ˆë‹¤. ì´ˆë³´ìë„ ì™„ì£¼ ê°€ëŠ¥í•œ ì½”ìŠ¤ì˜ˆìš” ğŸ…'
  },
  {
    id: 3, cat: 'Mountain', catEmoji: 'â›°ï¸',
    title: 'ë„ë´‰ì‚° ë‹¨í’ íŠ¸ë ˆí‚¹ ğŸ',
    date: '2026.03.16 (ì¼) 08:00', location: 'ë„ë´‰ì‚°ì—­ 1ë²ˆ ì¶œêµ¬',
    course: 'ë„ë´‰ì‚°ì—­ â†’ ë„ë´‰ì‚°ì¥ â†’ ë§ˆë‹¹ë°”ìœ„ (ì™•ë³µ ì•½ 8km)', level: 'ğŸŸ¡ ì¤‘ê¸‰',
    current: 3, max: 5, popJoin: true,
    leader: 'ìµœë‹¤í˜„', initial: 'ìµœ', grad: 'linear-gradient(135deg,#6366f1,#8b5cf6)',
    rating: 'â˜…â˜…â˜…â˜…Â½ 4.8', ratingCount: '(31íšŒ ë¦¬ë“œ)',
    headerGrad: 'linear-gradient(135deg,#00A896,#02C39A)',
    desc: 'ë„ë´‰ì‚°ì˜ ì•„ë¦„ë‹¤ìš´ ê²½ì¹˜ë¥¼ ì¦ê¸°ëŠ” íŠ¸ë ˆí‚¹ì…ë‹ˆë‹¤. ì¤‘ê¸‰ ì½”ìŠ¤ì´ì§€ë§Œ ê°€ì´ë“œê°€ í•¨ê»˜í•˜ë‹ˆ ê±±ì • ë§ˆì„¸ìš”! ì¦‰ì‹œ ì°¸ì—¬ ê°€ëŠ¥í•œ í™œë™ì…ë‹ˆë‹¤.'
  },
  {
    id: 4, cat: 'Bike', catEmoji: 'ğŸï¸',
    title: 'ê°€í‰ ë°”ì´í¬ íˆ¬ì–´ë§ ğŸ›£ï¸',
    date: '2026.03.22 (í† ) 09:00', location: 'ì²­í‰IC ì§‘ê²°',
    course: 'ì²­í‰IC â†’ ê°€í‰ â†’ ì¶˜ì²œ (ì™•ë³µ ì•½ 200km)', level: 'ğŸŸ¡ ì¤‘ê¸‰',
    current: 6, max: 8, popJoin: false,
    leader: 'ì •í˜„ìš°', initial: 'ì •', grad: 'linear-gradient(135deg,#028090,#0891B2)',
    rating: 'â˜…â˜…â˜…â˜…â˜… 5.0', ratingCount: '(67íšŒ ë¦¬ë“œ)',
    headerGrad: 'linear-gradient(135deg,#028090,#0891B2)',
    desc: 'ê°€í‰-ì¶˜ì²œ ì½”ìŠ¤ë¥¼ ë‹¬ë¦¬ëŠ” ë°”ì´í¬ íˆ¬ì–´ë§ì…ë‹ˆë‹¤. ê²½ì¹˜ ì¢‹ì€ ë“œë¼ì´ë¸Œ ì½”ìŠ¤ë¥¼ í•¨ê»˜ ë‹¬ë ¤ìš”! ì¤‘ê°„ ë§›ì§‘ë„ ë“¤ë¦…ë‹ˆë‹¤ ğŸ½ï¸'
  }
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CHAT DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CHAT_HISTORY = {
  'ë°•ë¯¼ì¤€': [
    { mine: false, text: 'ì•ˆë…•í•˜ì„¸ìš”! í•œê°• ë¼ì´ë”© ì‹ ì²­ í™•ì¸í–ˆìŠµë‹ˆë‹¤ ğŸ˜Š', time: 'ì˜¤ì „ 9:20' },
    { mine: false, text: 'ì´ë²ˆ ì£¼ í† ìš”ì¼ ì˜¤ì „ 8ì‹œì— ì—¬ì˜ë„ í•œê°•ê³µì› ìì „ê±° ëŒ€ì—¬ì†Œ ì•ì—ì„œ ë§Œë‚˜ìš”!', time: 'ì˜¤ì „ 9:21' },
    { mine: true,  text: 'ë„¤! í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê¼­ ì°¸ì„í• ê²Œìš” ğŸš´', time: 'ì˜¤ì „ 9:35' },
    { mine: false, text: 'í—¬ë©§ì´ë‘ ì¥ê°‘ì€ ê¼­ ì±™ê²¨ì˜¤ì„¸ìš”. ì—†ìœ¼ì‹œë©´ í˜„ì¥ ëŒ€ì—¬ë„ ê°€ëŠ¥í•´ìš” ğŸ˜„', time: 'ì˜¤ì „ 9:36' },
  ],
  'ê¹€ì„œì—°': [
    { mine: false, text: 'ë¶í•œì‚° íŠ¸ë ˆí‚¹ ì¤€ë¹„ë¬¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤ ğŸ’', time: 'ì˜¤ì „ 8:00' },
    { mine: false, text: 'ë“±ì‚°í™”, ë“±ì‚° ìŠ¤í‹±, ë¬¼ 2L ì´ìƒ, ê°„ì‹ í•„ì°¸!', time: 'ì˜¤ì „ 8:01' },
    { mine: true,  text: 'ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ ì¤€ë¹„í•´ì„œ ê°€ê² ìŠµë‹ˆë‹¤', time: 'ì˜¤ì „ 8:30' },
  ],
  'ì •í˜„ìš°': [
    { mine: true,  text: 'ê°€í‰ íˆ¬ì–´ ì •ë§ ì¬ë¯¸ìˆì—ˆì–´ìš”!', time: 'ì–´ì œ ì˜¤í›„ 6:00' },
    { mine: false, text: 'ê°€í‰ íˆ¬ì–´ ì˜ ë‹¤ë…€ì™”ìŠµë‹ˆë‹¤! ë‹¤ìŒì— ë˜ ë´¬ìš” ğŸ›£ï¸', time: 'ì–´ì œ ì˜¤í›„ 6:15' },
  ],
  'ì´ì¤€í˜¸': [
    { mine: false, text: '5K ëŸ¬ë‹ ê°™ì´ ë‹¬ë ¸ë˜ ë¶„ë“¤ ë‹¨ì²´ ì±„íŒ…ë°© ë§Œë“¤ì—ˆì–´ìš”!', time: '2ì¼ ì „' },
    { mine: true,  text: 'ì˜¤ ì´ˆëŒ€í•´ì£¼ì„¸ìš”!', time: '2ì¼ ì „' },
    { mine: false, text: 'ì´ˆëŒ€í–ˆìŠµë‹ˆë‹¤! í™•ì¸í•´ë³´ì„¸ìš” ğŸ˜„', time: '2ì¼ ì „' },
  ],
  'ìµœë‹¤í˜„': [
    { mine: false, text: 'ë‹¤ìŒ ë„ë´‰ì‚° íŠ¸ë ˆí‚¹ë„ ê¸°ëŒ€í•´ì£¼ì„¸ìš”! â›°ï¸', time: '3ì¼ ì „' },
    { mine: true,  text: 'ë„¤, ê¼­ ì‹ ì²­í• ê²Œìš”!', time: '3ì¼ ì „' },
  ]
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NAVIGATION (Fix: history stack for back)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let screenHistory = ['home'];

function goScreen(name) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  const next = document.getElementById('screen-' + name);
  if (!next) return;
  next.classList.add('active');
  // scroll to top
  const content = next.querySelector('.content');
  if (content) content.scrollTop = 0;
  // push to history (avoid duplicates)
  if (screenHistory[screenHistory.length - 1] !== name) {
    screenHistory.push(name);
    if (screenHistory.length > 10) screenHistory.shift();
  }
}

function goBack() {
  if (screenHistory.length > 1) {
    screenHistory.pop(); // remove current
    const prev = screenHistory[screenHistory.length - 1];
    // navigate without pushing to history again
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    const prevEl = document.getElementById('screen-' + prev);
    if (prevEl) {
      prevEl.classList.add('active');
      const content = prevEl.querySelector('.content');
      if (content) content.scrollTop = 0;
    }
  } else {
    goScreen('home');
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CATEGORY â†’ SEARCH (Fix: ì—°ë™)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function goCategory(catName) {
  document.querySelectorAll('#filter-chips .cat-chip').forEach(c => {
    c.classList.toggle('active', c.dataset.cat === catName);
  });
  renderSearchResults();
  goScreen('search');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SEARCH FILTER (Fix: ë³µìˆ˜ ì„ íƒ)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleCatChip(el) {
  if (el.dataset.cat === 'ì „ì²´') {
    document.querySelectorAll('#filter-chips .cat-chip').forEach(c => c.classList.remove('active'));
    el.classList.add('active');
  } else {
    document.querySelector('.cat-chip[data-cat="ì „ì²´"]').classList.remove('active');
    el.classList.toggle('active');
    const anyActive = document.querySelectorAll('.cat-chip:not([data-cat="ì „ì²´"]).active').length > 0;
    if (!anyActive) document.querySelector('.cat-chip[data-cat="ì „ì²´"]').classList.add('active');
  }
  renderSearchResults();
}

function toggleOptChip(el) {
  el.classList.toggle('active'); // ë³µìˆ˜ ì„ íƒ í—ˆìš©
  renderSearchResults();
}

function renderSearchResults() {
  const keyword = (document.getElementById('search-input')?.value || '').trim().toLowerCase();
  const allActive = document.querySelector('.cat-chip[data-cat="ì „ì²´"]')?.classList.contains('active');
  const activeCats = allActive ? null : Array.from(document.querySelectorAll('.cat-chip:not([data-cat="ì „ì²´"]).active')).map(c => c.dataset.cat);
  const popJoinOnly = document.querySelector('.opt-chip[data-opt="ì¦‰ì‹œì°¸ì—¬"]')?.classList.contains('active');
  const beginnerOnly = document.querySelector('.opt-chip[data-opt="ì´ˆê¸‰"]')?.classList.contains('active');

  const results = ACTIVITIES.filter(a => {
    if (activeCats && !activeCats.includes(a.cat)) return false;
    if (popJoinOnly && !a.popJoin) return false;
    if (beginnerOnly && !a.level.includes('ì´ˆê¸‰')) return false;
    if (keyword && !a.title.toLowerCase().includes(keyword) &&
        !a.location.toLowerCase().includes(keyword) &&
        !a.leader.toLowerCase().includes(keyword)) return false;
    return true;
  });

  const countEl = document.getElementById('search-count');
  if (countEl) countEl.textContent = `ì´ ${results.length}ê°œì˜ í™œë™ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤`;

  const list = document.getElementById('search-results-list');
  if (!list) return;
  list.innerHTML = '';
  results.forEach(a => list.appendChild(buildCard(a, true)));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CARD BUILDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildCard(a, showLevel) {
  const div = document.createElement('div');
  div.className = 'activity-card';
  div.onclick = () => openDetail(a.id);
  div.innerHTML = `
    <div class="activity-card-header" style="background:${a.headerGrad}">
      <span class="activity-cat-badge">${a.catEmoji} ${a.cat}</span>
      <span class="activity-level">${a.popJoin ? 'âš¡ ì¦‰ì‹œì°¸ì—¬' : a.level}</span>
    </div>
    <div class="activity-card-body">
      <div class="activity-title">${a.title}</div>
      <div class="activity-meta">
        <div class="meta-item">ğŸ“… ${a.date}</div>
        <div class="meta-item">ğŸ“ ${a.location}</div>
        <div class="meta-item">ğŸ‘¥ ${a.current}/${a.max}ëª…</div>
      </div>
    </div>
    <div class="activity-card-footer">
      <div class="leader-info">
        <div class="leader-avatar" style="background:${a.grad}">${a.initial}</div>
        <div>
          <div class="leader-name">${a.leader} ë¦¬ë”</div>
          <div class="stars">${a.rating}</div>
        </div>
      </div>
      <button class="join-btn" style="background:var(--primary)"
        onclick="event.stopPropagation();openDetail(${a.id})">
        ${a.popJoin ? 'ì¦‰ì‹œì°¸ì—¬' : 'ì°¸ê°€ ì‹ ì²­'}
      </button>
    </div>
  `;
  return div;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ACTIVITY DETAIL (New Screen)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openDetail(id) {
  const a = ACTIVITIES[id];
  if (!a) return;

  document.getElementById('detail-cat-label').textContent = `${a.catEmoji} ${a.cat}`;
  document.getElementById('detail-slots').textContent = `${a.max - a.current}ëª…`;

  const pColors = ['#028090','#00A896','#02C39A','#0891B2','#6366f1','#8b5cf6','#f59e0b','#ef4444'];
  const pNames  = ['ì´','ìµœ','ì •','ê°•','ìœ¤','í•œ','ì˜¤','ë¬¸'];
  const participantsHtml = pNames.slice(0, a.current).map((n, i) =>
    `<div class="participant-avatar" style="background:${pColors[i % pColors.length]}">${n}</div>`
  ).join('') + (a.max - a.current > 0
    ? `<div class="participant-avatar" style="background:#eee;color:#999;border:2px dashed #ccc">+${a.max - a.current}</div>`
    : '');

  document.getElementById('detail-content').innerHTML = `
    <div class="detail-map">
      <div class="detail-map-icon">ğŸ—ºï¸</div>
      <div>ğŸ“ ${a.location}</div>
      <div style="font-size:11px;opacity:0.6;margin-top:4px">ì§€ë„ ì—°ë™ ì˜ˆì • (Google Maps API)</div>
    </div>
    <div class="detail-body">
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px">
        <span style="background:${a.headerGrad};color:white;border-radius:20px;padding:4px 12px;font-size:12px;font-weight:600">${a.catEmoji} ${a.cat}</span>
        <span style="background:#f0fafa;color:var(--primary);border-radius:20px;padding:4px 12px;font-size:12px;font-weight:600">${a.level}</span>
        ${a.popJoin ? '<span style="background:#fff3cd;color:#f59e0b;border-radius:20px;padding:4px 12px;font-size:12px;font-weight:600">âš¡ ì¦‰ì‹œì°¸ì—¬</span>' : ''}
      </div>
      <div class="detail-title">${a.title}</div>
      <div class="detail-info-row"><div class="detail-info-icon">ğŸ“…</div><div>${a.date}</div></div>
      <div class="detail-info-row"><div class="detail-info-icon">ğŸ“</div><div>${a.location}</div></div>
      <div class="detail-info-row"><div class="detail-info-icon">ğŸ›£ï¸</div><div>${a.course}</div></div>
      <div class="detail-info-row"><div class="detail-info-icon">ğŸ‘¥</div><div>${a.current}ëª… ì°¸ê°€ ì¤‘ / ìµœëŒ€ ${a.max}ëª…</div></div>
      <div class="detail-section">
        <div class="detail-section-title">ë¦¬ë” ì •ë³´</div>
        <div class="detail-leader-card">
          <div class="detail-avatar-lg" style="background:${a.grad}">${a.initial}</div>
          <div class="detail-leader-info">
            <div class="detail-leader-name">${a.leader} ë¦¬ë”</div>
            <div class="detail-stars">${a.rating}</div>
            <div class="detail-leader-stats">${a.ratingCount} Â· ì¸ì¦ ë¦¬ë”</div>
          </div>
          <button style="background:#f0fafa;color:var(--primary);border:1.5px solid var(--accent);border-radius:20px;padding:6px 14px;font-size:12px;font-weight:600;cursor:pointer"
            onclick="openChat('${a.leader}','${a.initial}','${a.grad}')">DM</button>
        </div>
      </div>
      <div class="detail-section">
        <div class="detail-section-title">ì°¸ê°€ì (${a.current}/${a.max})</div>
        <div class="participants-row">${participantsHtml}</div>
      </div>
      <div class="detail-section">
        <div class="detail-section-title">í™œë™ ì†Œê°œ</div>
        <div class="detail-desc">${a.desc}</div>
      </div>
    </div>
    <div style="height:20px"></div>
  `;

  goScreen('detail');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CHAT (New Screen)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openChat(name, initial, grad) {
  document.getElementById('chat-name').textContent = name + ' ë¦¬ë”';
  const msgs = CHAT_HISTORY[name] || [];
  const container = document.getElementById('chat-messages');
  container.innerHTML = msgs.map(m => `
    <div class="msg-row ${m.mine ? 'mine' : ''}">
      ${!m.mine ? `<div class="msg-avatar" style="background:${grad}">${initial}</div>` : ''}
      <div>
        <div class="msg-time" style="text-align:${m.mine ? 'right' : 'left'}">${m.time}</div>
        <div class="msg-bubble">${m.text}</div>
      </div>
    </div>
  `).join('');
  setTimeout(() => { container.scrollTop = container.scrollHeight; }, 50);
  goScreen('chat');
}

function sendMessage() {
  const input = document.getElementById('chat-input');
  const text = input.value.trim();
  if (!text) return;
  const container = document.getElementById('chat-messages');
  const now = new Date();
  const t = `${now.getHours()}:${String(now.getMinutes()).padStart(2,'0')}`;
  const div = document.createElement('div');
  div.className = 'msg-row mine';
  div.innerHTML = `<div><div class="msg-time" style="text-align:right">${t}</div><div class="msg-bubble">${text}</div></div>`;
  container.appendChild(div);
  container.scrollTop = container.scrollHeight;
  input.value = '';
  // auto reply
  setTimeout(() => {
    const name = document.getElementById('chat-name').textContent;
    const reply = document.createElement('div');
    reply.className = 'msg-row';
    reply.innerHTML = `<div class="msg-avatar" style="background:var(--primary)">${name[0]}</div><div><div class="msg-time">${t}</div><div class="msg-bubble">í™•ì¸í–ˆìŠµë‹ˆë‹¤! ğŸ˜Š</div></div>`;
    container.appendChild(reply);
    container.scrollTop = container.scrollHeight;
  }, 800);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CREATE ACTIVITY (Fix: í™ˆ ë°˜ì˜)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function submitCreate() {
  const title = document.getElementById('new-title').value.trim();
  if (!title) { showToast('â— í™œë™ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”'); return; }

  const catBtn  = document.querySelector('#cat-radio .radio-btn.active')?.textContent.trim() || 'ğŸš´ Cycle';
  const catParts = catBtn.split(' ');
  const catEmoji = catParts[0];
  const cat = catParts[1];
  const level = document.querySelector('#level-radio .radio-btn.active')?.textContent.trim() || 'ğŸŸ¢ ì´ˆê¸‰';
  const dateVal = document.getElementById('new-date').value;
  const region  = document.getElementById('new-region');
  const regionText = region.options[region.selectedIndex].text;
  const course  = document.getElementById('new-course').value || 'ì½”ìŠ¤ ë¯¸ì •';
  const desc    = document.getElementById('new-desc').value || 'í™œë™ ì†Œê°œê°€ ì—†ìŠµë‹ˆë‹¤.';

  const newA = {
    id: ACTIVITIES.length, cat, catEmoji, title,
    date: `${dateVal.replace(/-/g,'.')} 09:00`,
    location: regionText, course, level,
    current: 1, max: 10, popJoin: false,
    leader: 'í™ê¸¸ë™', initial: 'í™',
    grad: 'linear-gradient(135deg,#028090,#02C39A)',
    rating: 'â˜…â˜…â˜…â˜…â˜… -', ratingCount: '(ì‹ ê·œ ë¦¬ë”)',
    headerGrad: 'linear-gradient(135deg,#028090,#00A896)',
    desc
  };
  ACTIVITIES.push(newA);

  // í¼ ì´ˆê¸°í™”
  document.getElementById('new-title').value = '';
  document.getElementById('new-course').value = '';
  document.getElementById('new-desc').value = '';

  showToast('âœ… í™œë™ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');

  setTimeout(() => {
    goScreen('home');
    renderHomeActivities();
  }, 1000);
}

function selectRadio(el, groupId) {
  document.querySelectorAll('#' + groupId + ' .radio-btn').forEach(r => r.classList.remove('active'));
  el.classList.add('active');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HOME ACTIVITY LIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderHomeActivities() {
  const list = document.getElementById('home-activity-list');
  if (!list) return;
  list.innerHTML = '';
  ACTIVITIES.forEach(a => list.appendChild(buildCard(a, false)));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TOAST (Fix: ì¤‘ë³µ timer ë°©ì§€)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let toastTimer;
function showToast(msg) {
  clearTimeout(toastTimer);
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.style.display = 'block';
  t.style.opacity = '1';
  toastTimer = setTimeout(() => { t.style.opacity = '0'; setTimeout(() => { t.style.display = 'none'; }, 300); }, 2500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  REAL-TIME CLOCK (Fix: ì‹¤ì‹œê°„ ì‹œê°)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateClock() {
  const now = new Date();
  const h = now.getHours();
  const m = String(now.getMinutes()).padStart(2, '0');
  const timeStr = `${h}:${m}`;
  document.querySelectorAll('[id^="clock-"]').forEach(el => el.textContent = timeStr);
}
updateClock();
setInterval(updateClock, 10000);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderHomeActivities();
renderSearchResults();
</script>
</body>
</html>
